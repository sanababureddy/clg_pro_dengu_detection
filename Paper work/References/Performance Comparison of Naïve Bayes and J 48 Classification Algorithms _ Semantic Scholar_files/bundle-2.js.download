(window.webpackJsonp=window.webpackJsonp||[]).push([[2,6],{1075:function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},1076:function(e,t,r){"use strict";var a=r(1077);function n(){}function o(){}o.resetWarningCache=n,e.exports=function(){function e(e,t,r,n,o,i){if(i!==a){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:n};return r.PropTypes=r,r}},1077:function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},1078:function(e,t,r){"use strict";var a=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/;t.validate=function(e){if(!e)return!1;if(e.length>254)return!1;if(!a.test(e))return!1;var t=e.split("@");return!(t[0].length>64)&&!t[1].split(".").some((function(e){return e.length>63}))}},1083:function(e,t,r){"use strict";r.r(t);var a=r(8),n=r.n(a);function o(e){let{children:t}=e;if(!t)return null;const r=a.Children.toArray(t);return a.createElement("div",{className:"account-bar"},a.createElement("div",{className:"account-bar__columns"},a.createElement("div",{className:"account-bar__column account-bar__left"},r.find(e=>e.type===i)),a.createElement("div",{className:"account-bar__column account-bar__message"},r.find(e=>e.type===c)),a.createElement("div",{className:"account-bar__column account-bar__right"},r.find(e=>e.type===s))))}function i(e){let{children:t}=e;return t}function s(e){let{children:t}=e;return t}function c(e){let{children:t}=e;return t}var l=r(225),u=r(758);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const m=e=>Object(u.a)(d({},e,{id:"author_add_paper_position_select"})),b=e=>Object(u.a)(d({},e,{},e,{id:"author_add_paper_position_unselect"}));var g=r(7);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}class _ extends a.PureComponent{constructor(){var e,t,r;super(...arguments),r=e=>{const{onChangePosition:t,position:r}=this.props;if(t)try{const a=JSON.parse(e.currentTarget.getAttribute("data-position")||"");a!==r&&t(a)}catch(e){g.a.error("failed to parse position",e)}},(t="onClickPosition")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}render(){const{paper:e,position:t,reason:r,viewerFullName:n}=this.props;return a.createElement("div",{className:"author-add-papers__position__between"},e.authors.map(e=>e.alias.name).map((o,i)=>a.createElement(a.Fragment,{key:"".concat(e.id,"|").concat(o,"|").concat(i)},t===i?a.createElement(E,{viewerFullName:n,reason:r,position:i,onClick:this.onClickPosition}):a.createElement(y,{reason:r,position:i,onClick:this.onClickPosition}),a.createElement("div",{className:"author-add-papers__position__between__name"},o))),t===e.authors.size?a.createElement(E,{viewerFullName:n,reason:r,position:e.authors.size,onClick:this.onClickPosition}):a.createElement(y,{reason:r,position:e.authors.size,onClick:this.onClickPosition}))}}const y=e=>{let{reason:t,position:r,onClick:n}=e;return a.createElement("div",f({className:"author-add-papers__position__between__placement","data-position":r},m({reason:t,position:r}),{onClick:n}))},E=e=>{let{viewerFullName:t,reason:r,position:n,onClick:o}=e;return a.createElement("div",f({className:"author-add-papers__position__between__selected","data-position":"null"},b({reason:r,position:n}),{onClick:o}),a.createElement("div",{className:"author-add-papers__position__between__selected__author-name"},t),a.createElement("div",{className:"author-add-papers__position__you-tag"},Object(l.b)(e=>e.authorAddPapers.youTagLabel)))};function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}const S=Object.freeze({NOT_LISTED:"notListed",WRONG_AUTHOR:"wrongAuthor",WRONG_NAME:"wrongName"}),v=Object.freeze(Object.keys(S).map(e=>e)),C=Object.freeze(v.map(e=>S[e]));class w extends a.PureComponent{constructor(){var e,t,r;super(...arguments),r=()=>{const{reason:e,onSelect:t}=this.props;t(e)},(t="onClickReason")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}render(){const{label:e,reason:t}=this.props;return a.createElement("div",O({},(r={reason:t},Object(u.a)(d({},r,{id:"author_add_paper_reason"}))),{className:"author-add-papers__position-reason"}),a.createElement("div",{className:"author-add-papers__position-reason__label",onClick:this.onClickReason},e));var r}}var P=r(722),N=r.n(P);function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class j extends a.PureComponent{constructor(){super(...arguments),R(this,"onClickPosition",e=>{const{onChangePosition:t,position:r}=this.props;if(t)try{const a=JSON.parse(e.currentTarget.getAttribute("data-position")||"");a!==r&&t(a)}catch(e){g.a.error("failed to parse position",e)}})}render(){const{paper:e,position:t,reason:r,viewerFullName:n,showReplacedName:o}=this.props;return a.createElement("div",{className:"author-add-papers__position__replace"},e.authors.map(e=>e.alias.name).map((i,s)=>{const c=s===t,u=o||!c;return a.createElement("div",x({className:N()({"author-add-papers__position__replace__name":!0,"author-add-papers__position__replace__is-selected":c}),key:"".concat(e.id,"|").concat(i,"|").concat(s),"data-position":c?"null":s},c?b({reason:r,position:s}):m({reason:r,position:s}),{onClick:this.onClickPosition}),u&&a.createElement("div",{className:"author-add-papers__position__replace__name__author-name"},i),a.createElement("div",{className:"author-add-papers__position__replace__name__viewer-name"},n),a.createElement("div",{className:"author-add-papers__position__you-tag"},Object(l.b)(e=>e.authorAddPapers.youTagLabel)))}))}}R(j,"defaultProps",{showReplacedName:!1});var T=r(150),A=r(149),I=r(113),F=r(4),k=r.n(F),D=r(9),L=r.n(D);function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class z extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),H(this,"onClickBack",()=>{const{onChangeReason:e}=this.props;e&&e(null)}),H(this,"onSelectReason",e=>{const{onChangeReason:t}=this.props;t&&t(e)}),H(this,"onSelectPosition",e=>{const{reason:t,onChangePosition:r}=this.props;r&&(k()(t,"reason was not selected before a position was"),r(t,e))}),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){H(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromAuthorProfileStore(),{},this.getStateFromAuthorCorrectionsStore(),{},this.getStateFromAuthorStore()),this.context.authorProfileStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorProfileStore())}),this.context.authorCorrectionsStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorCorrectionsStore())}),this.context.authorStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorStore())})}getStateFromAuthorProfileStore(){const e=this.context.authorProfileStore.getAuthorProfile();return{viewerFullName:e?e.fullName:null}}getStateFromAuthorCorrectionsStore(){const e=this.context.authorCorrectionsStore;return{moderatorCorrectionsAuthorId:e.getModeratorCorrectionsAuthorId(),isModeratorCorrecting:e.isModeratorCorrecting()}}getStateFromAuthorStore(){var e;const{authorStore:t}=this.context;return{authorName:null!=(e=t)&&null!=(e=e.author)?e.name:e}}render(){const{paper:e,reason:t,position:r}=this.props,{viewerFullName:n,authorName:o,isModeratorCorrecting:i}=this.state,s=i?o:n;return a.createElement("div",{className:"author-add-papers__position"},a.createElement("div",{className:"author-add-papers__position__instructions"},t?a.createElement(a.Fragment,null,a.createElement("span",{className:"author-add-papers__position__instructions__label"},Object(l.b)(e=>e.authorAddPapers.reason.choices[t].instructions)),a.createElement("span",{className:"author-add-papers__position__instructions__back"},"(",a.createElement("a",q({onClick:this.onClickBack},(c={reason:t},Object(u.a)(d({},c,{id:"author_add_paper_reason_back"})))),Object(l.b)(e=>e.authorAddPapers.reason.backLabel)),")")):a.createElement("span",{className:"author-add-papers__position__instructions__label"},Object(l.b)(e=>e.authorAddPapers.reason.instructions))),a.createElement("div",{className:"author-add-papers__position__controls"},(()=>{switch(t){case S.NOT_LISTED:return a.createElement(_,{paper:e,position:r,reason:S.NOT_LISTED,viewerFullName:s,onChangePosition:this.onSelectPosition});case S.WRONG_AUTHOR:return a.createElement(j,{paper:e,position:r,reason:S.WRONG_AUTHOR,viewerFullName:s,onChangePosition:this.onSelectPosition,showReplacedName:!0});case S.WRONG_NAME:return a.createElement(j,{paper:e,position:r,reason:S.WRONG_NAME,viewerFullName:s,onChangePosition:this.onSelectPosition});default:return C.map(e=>a.createElement(w,{key:e,onSelect:this.onSelectReason,reason:e,label:Object(l.b)(t=>t.authorAddPapers.reason.choices[e].reasonLabel)}))}})()));var c}}H(z,"contextTypes",{authorProfileStore:L.a.instanceOf(I.a).isRequired,authorCorrectionsStore:L.a.instanceOf(A.a).isRequired,authorStore:L.a.instanceOf(T.a).isRequired});var U=r(723);function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class B extends a.PureComponent{constructor(){super(...arguments),V(this,"onClickRemove",()=>{const{paper:e,onRemovePaper:t}=this.props;t&&t(e)}),V(this,"onChangeReason",e=>{const{paper:t,onChangeReason:r}=this.props;r&&r(t,e)}),V(this,"onChangePosition",(e,t)=>{const{paper:r,onChangePosition:a}=this.props;a&&a(r,e,t)})}render(){const{paper:e,position:t,reason:r}=this.props,n=!r||"number"!=typeof t;return a.createElement("div",{"data-paper-id":e.id,className:N()({"author-add-papers__paper":!0,"author-add-papers__paper__is-draft":n})},a.createElement("div",{className:"author-add-papers__paper__remove-button",onClick:this.onClickRemove},a.createElement(U.a,{icon:"circle-plus"})),a.createElement("div",{className:"author-add-papers__paper__content"},a.createElement("div",{className:"author-add-papers__paper__section author-add-papers__paper__details"},a.createElement("div",{className:"author-add-papers__paper__title"},e.title.text),!r&&a.createElement("div",{className:"author-add-papers__paper__authors"},e.authors.map(e=>e.alias.name).join(", "))),a.createElement("div",{className:"author-add-papers__paper__section author-add-papers__paper__position"},a.createElement(z,{paper:e,position:t,reason:r,onChangeReason:this.onChangeReason,onChangePosition:this.onChangePosition}))))}}function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class W extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),K(this,"onFocusSearch",()=>{const{onFocus:e}=this.props;e&&e()}),K(this,"onInputSearch",e=>{const{onChange:t}=this.props;if(t){const{value:r}=e.currentTarget;this.setState({searchText:r}),t(r)}}),this.state={searchText:""}}render(){const{isLoading:e}=this.props,{searchText:t}=this.state;return a.createElement("div",{className:N()({"author-add-papers__search":!0,"author-add-papers__search__is-loading":e})},a.createElement("input",Y({className:"legacy__input author-add-papers__search__input",type:"text",value:t,placeholder:Object(l.b)(e=>e.authorAddPapers.searchLabel)},Object(u.a)({id:"author_add_paper_search"}),{onFocus:this.onFocusSearch,onChange:this.onInputSearch})),a.createElement(U.a,{icon:e?"gear":"search-small"}))}}var Q=r(740),G=r(0),X=r.n(G);function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function Z(e){let{onAddPaper:t,papers:r}=e;return a.createElement("div",{className:"author-add-papers__results"},r.isEmpty()?a.createElement("div",{className:"author-add-papers__results__empty"},Object(l.b)(e=>e.authorAddPapers.noResultsLabel)):a.createElement("ul",{className:"author-add-papers__results__paper-list"},r.map(e=>a.createElement($,{key:e.id,onAddPaper:t,paper:e}))))}function $(e){let{onAddPaper:t,paper:r}=e;const n=function(e){let{venue:t,year:r}=e;if(t&&r)return Object(l.b)(e=>e.authorRemovePapers.publisher.bothYearAndVenue,r.text,t.text);if(r)return Object(l.b)(e=>e.authorRemovePapers.publisher.onlyYear,r.text);if(t)return Object(l.b)(e=>e.authorRemovePapers.publisher.onlyVenue,t.text);return null}({year:r.year,venue:r.venue});return a.createElement("li",J({className:"author-add-papers__results__paper"},Object(u.a)({id:"author_add_paper_result"}),{onClick:()=>t(r)}),a.createElement("div",{className:"author-add-papers__results__paper__title"},a.createElement(Q.a,{field:r.title})),a.createElement("div",{className:"author-add-papers__results__paper__author-list"},r.authors.map(e=>a.createElement(Q.a,{key:"".concat(r.id,"|").concat(e.alias.ids.join(","),"|").concat(e.alias.slug),className:"author-add-papers__results__paper__author",field:e.highlightedField}))),n&&a.createElement("div",{className:"author-add-papers__results__paper__publisher"},n))}class ee extends a.PureComponent{render(){return a.createElement("div",{className:"author-add-papers__blank-state"},a.createElement("div",{className:"author-add-papers__blank-state__content"},a.createElement(U.a,{className:"author-add-papers__blank-state__icon",icon:"paper-magnifying-glass",width:"60",height:"77.5"}),a.createElement("div",{className:"author-add-papers__blank-state__description"},Object(l.b)(e=>e.authorAddPapers.blankLabel))))}}const te={ENTER:13,ESC:27};Object.freeze(te);Object.freeze(Object.keys(te).reduce((e,t)=>(e[te[t]]=t,e),{}));var re=r(759),ae=r(108),ne=r(147),oe=r(47),ie=r(14),se=r(53),ce=r.n(se);function le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ue extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),le(this,"onKeyDown",e=>{switch(e.keyCode){case 27:this.setState({canResultsBeVisible:!1})}}),le(this,"onChangeSearch",e=>{this.setState({searchText:e},()=>{e?this.searchPapers().catch(e=>this.onApiError(e)):this.setState({searchPapers:G.List()})})}),le(this,"onFocusSearch",()=>{this.setState({canResultsBeVisible:!0})}),le(this,"onAddPaper",e=>{const t=this.context.authorCorrectionsStore,{addedPapers:r}=this.state;this.setState({canResultsBeVisible:!1,addedPapers:r.set(e.id,{paper:e,position:null,reason:null})}),t.addDraftPaperId(e.id)}),le(this,"onRemovePaper",e=>{const{addedPapers:t}=this.state;this.setState({addedPapers:t.delete(e.id)}),this.context.authorCorrectionsStore.cancelPendingCorrectionByPaperId(e.id)}),le(this,"onChangeReason",(e,t)=>{const{addedPapers:r}=this.state;this.setState({addedPapers:r.set(e.id,{paper:e,position:null,reason:t})});const a=this.context.authorCorrectionsStore;a.cancelPendingCorrectionByPaperId(e.id),a.addDraftPaperId(e.id)}),le(this,"onChangePosition",(e,t,r)=>{const{addedPapers:a}=this.state;this.setState({addedPapers:a.set(e.id,{paper:e,position:r,reason:t})});const n=this.context.authorCorrectionsStore;if("number"==typeof r)switch(t){case S.NOT_LISTED:n.enqueueAddPaperCorrection({paperId:e.id,position:r});break;case S.WRONG_AUTHOR:case S.WRONG_NAME:{const t=e.authors.get(r).alias.canonicalId(),a=t?parseInt(t,10):null;n.enqueueSwapPaperCorrection({fromAuthorId:a,paperId:e.id,position:r});break}}else n.cancelPendingCorrectionByPaperId(e.id),n.addDraftPaperId(e.id)}),le(this,"onClickCapture",e=>{e.preventDefault(),e.stopPropagation(),this.setState({canResultsBeVisible:!1})}),this.state={isLoading:!1,errorMessage:null,canResultsBeVisible:!1,hasFetchedPapers:!1,addedPapers:G.OrderedMap(),searchPapers:G.List(),searchText:""},this.onChangeSearchThrottled=Object(re.a)(this.onChangeSearch,1e3,{leading:!0,trailing:!0})}onApiError(e){g.a.error("Api Error",e),this.setState({errorMessage:Object(l.b)(e=>e.authorRemovePapers.error.apiQueryFailed),isLoading:!1})}async searchPapers(){var e;await Object(ae.c)(this,{isLoading:!0,canResultsBeVisible:!0});const{authorId:t}=this.props,{api:r}=this.context,{searchText:a}=this.state;let n=a;const{protocol:o,pathname:i}=ce.a.parse(a);if(o){const e=ie.a.PAPER_DETAIL.exec(i)[2];e&&(n=e)}const s=await r.searchPapers({query:n,page:1,limit:10,excludeAuthorId:t,model:"Paper",prependSuggestions:!0});if(this.state.searchText!==a)return void g.a.info("Search results dropped, text is no longer ".concat(a));await Object(ae.c)(this,{isLoading:!1,hasFetchedPapers:!0});const c=G.List((null!=(e=s)&&null!=(e=e.resultData)?e.papers:e)||[]).map(oe.a.fromJs);await Object(ae.c)(this,{searchPapers:c})}render(){const{showDraftAsError:e}=this.props,{isLoading:t,hasFetchedPapers:r,addedPapers:n,searchPapers:o,searchText:i,canResultsBeVisible:s}=this.state,c=s&&r&&i;return a.createElement("div",{onKeyDown:this.onKeyDown,className:N()({"author-add-papers":!0,"author-add-papers__is-empty":!1,"author-add-papers__is-loading":t,"author-add-papers__show-draft-as-error":e})},c&&a.createElement("div",{className:"author-add-papers__click-capture",onClick:this.onClickCapture}),a.createElement("div",{className:"author-add-papers__controls"},a.createElement(W,{isLoading:t,onChange:this.onChangeSearchThrottled,onFocus:this.onFocusSearch}),c&&a.createElement(Z,{onAddPaper:this.onAddPaper,papers:o})),n.isEmpty()&&a.createElement(ee,null),a.createElement("div",{className:"author-add-papers__paper-list"},n.valueSeq().reverse().map(e=>{let{paper:t,position:r,reason:n}=e;return a.createElement(B,{key:t.id,paper:t,position:r,reason:n,onRemovePaper:this.onRemovePaper,onChangeReason:this.onChangeReason,onChangePosition:this.onChangePosition})})))}}le(ue,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,authorCorrectionsStore:L.a.instanceOf(A.a).isRequired});var he,de,pe,me=r(726),be=r(37);class ge extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),this.state={isLoading:!0,authorPapers:G.List()}}componentDidMount(){this.fetchAuthorPapers().catch(e=>this.onApiError(e))}onApiError(e){g.a.error("Api Error",e),this.setState({isLoading:!1})}async fetchAuthorPapers(){var e,t;await Object(ae.c)(this,{isLoading:!0});const{authorId:r}=this.props,{api:a}=this.context,n=await a.fetchPapersWithCorrectionsAppliedForAuthor({authorId:r,model:"PaperLite"});await Object(ae.c)(this,{isLoading:!1});const o=null!=(t=n)&&null!=(t=t.resultData)?t.authorId:t;k()(r===o,"browser and server author IDs do not match");const i=G.List((null!=(e=n)&&null!=(e=e.resultData)?e.paperLites:e)||[]).map(be.a.fromJs);await Object(ae.c)(this,{authorPapers:i})}render(){const{isLoading:e,authorPapers:t}=this.state;return e?a.createElement(me.a,null):a.createElement("div",null,a.createElement("h2",null,Object(l.a)(e=>e.correctionsCurrentPapers.headerText,t.size)),a.createElement("ul",null,t.map(e=>a.createElement("li",{key:e.id,className:"corrections-curent-papers__paper"},e.title))))}}he=ge,de="contextTypes",pe={api:L.a.instanceOf(ne.a).isRequired},de in he?Object.defineProperty(he,de,{value:pe,enumerable:!0,configurable:!0,writable:!0}):he[de]=pe;var fe=r(104),_e=r(72),ye=r(27),Ee=r.n(ye);function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ve=function(e){function t(){return Oe(this,t),Se(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.enable=function(e){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(e)},t.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},t.prototype.componentWillMount=function(){k()(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},t.prototype.componentWillReceiveProps=function(e){e.when?this.props.when&&this.props.message===e.message||this.enable(e.message):this.disable()},t.prototype.componentWillUnmount=function(){this.disable()},t.prototype.render=function(){return null},t}(n.a.Component);ve.propTypes={when:Ee.a.bool,message:Ee.a.oneOfType([Ee.a.func,Ee.a.string]).isRequired},ve.defaultProps={when:!0},ve.contextTypes={router:Ee.a.shape({history:Ee.a.shape({block:Ee.a.func.isRequired}).isRequired}).isRequired};var Ce=ve,we=r(5);function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const xe=[_e.a.AddAuthorship,_e.a.SwapAuthorship];class Re extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),Ne(this,"onSubmitForm",e=>{e.preventDefault(),this.state.hasDraftPapers?this.setState({hasAttemptedSubmit:!0,errorMessage:Object(l.b)(e=>e.authorAddPapers.error.papersInDraft)},()=>{Object(we.a)()&&this.scrollToPaper(this.context.authorCorrectionsStore.getDraftPaperIds().first())}):this.setState({hasAttemptedSubmit:!0},()=>{this.attemptSubmit()})}),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(r),!0).forEach((function(t){Ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isSending:!1,errorMessage:null,successMessage:null,hasAttemptedSubmit:!1},this.getStateFromAuthStore(),{},this.getStateFromAuthorCorrectionsStore(),{},this.getStateFromAuthorStore()),this.context.authStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthStore())}),this.context.authorCorrectionsStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorCorrectionsStore())}),this.context.authorStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorStore())}),this.state.authorId=this.state.isModeratorCorrecting?this.state.moderatorCorrectionsAuthorId:this.state.authorId}getStateFromAuthStore(){return{authorId:this.context.authStore.getClaimedAuthorId()}}getStateFromAuthorCorrectionsStore(){const e=this.context.authorCorrectionsStore,t=e.hasDraftPapers();return{isFormDirty:e.hasPendingCorrections()||t,pendingCorrections:e.getPendingCorrections().filter(e=>xe.includes(e.correctionType)),hasDraftPapers:t,isModeratorCorrecting:e.isModeratorCorrecting(),moderatorCorrectionsAuthorId:e.getModeratorCorrectionsAuthorId()}}getStateFromAuthorStore(){var e;const{authorStore:t}=this.context;return{authorName:null!=(e=t)&&null!=(e=e.author)?e.name:e}}scrollToPaper(e){if(!e)return!1;const t=document.querySelector('.author-add-papers__paper[data-paper-id="'.concat(e,'"]'));return!!t&&(t.scrollIntoView({behavior:"smooth"}),!0)}async attemptSubmit(){const{authorId:e,pendingCorrections:t,isModeratorCorrecting:r}=this.state,{api:a,authorCorrectionsStore:n}=this.context;await Object(ae.c)(this,{isSending:!0,errorMessage:null,successMessage:null});try{await a.submitPaperAuthorCorrections({authorId:e,corrections:t.toJS()}),await n.clearPendingCorrections();const o=this.context.router,i=r?"AUTHOR_CORRECTIONS_TOOL_STATUS":"ACCOUNT_CORRECTIONS";o.history.push(Object(ie.d)({routeName:i}))}catch(e){g.a.error("Failed to submit paper changes",e),this.setState({isSending:!1,errorMessage:Object(l.b)(e=>e.authorAddPapers.error.apiSubmitFailed),successMessage:null})}}renderMessage(){const{errorMessage:e,successMessage:t}=this.state;return e?a.createElement("div",{className:"account__error-msg"},e):t?a.createElement("div",{className:"account__success-msg"},t):null}render(){const{authorId:e,isSending:t,hasDraftPapers:r,hasAttemptedSubmit:n,isFormDirty:i,isModeratorCorrecting:u,authorName:h}=this.state,d=u?Object(l.b)(e=>e.moderatorCorrections.addPapers.pageHeading,h):Object(l.b)(e=>e.account.page.addPapers.pageHeading),p=u?Object(l.b)(e=>e.moderatorCorrections.addPapers.pageDescription):Object(l.b)(e=>e.account.page.addPapers.pageDescription);return a.createElement("div",{className:"account-add-papers"},a.createElement("h2",{className:"account-add-papers__headline"},d),a.createElement("div",{className:"account-add-papers__description"},p),a.createElement("hr",{className:"account__divider"}),e&&a.createElement(ue,{key:e,showDraftAsError:n&&r,authorId:e}),a.createElement(o,null,a.createElement(c,null,this.renderMessage()),a.createElement(s,null,t&&a.createElement(U.a,{className:"account__loading",icon:"gear"}),a.createElement("button",{className:"account-add-papers__submit-button button button--primary",onClick:this.onSubmitForm},Object(l.b)(e=>e.account.button.submit)))),e&&a.createElement(ge,{authorId:e}),a.createElement(Ce,{when:i,message:Object(l.b)(e=>e.authorAddPapers.error.dirtyForm)}))}}Ne(Re,"getPageTitle",()=>Object(l.b)(e=>e.account.page.addPapers.pageTitle)),Ne(Re,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,authStore:L.a.instanceOf(fe.a).isRequired,authorCorrectionsStore:L.a.instanceOf(A.a).isRequired,authorStore:L.a.instanceOf(T.a).isRequired,router:L.a.object.isRequired});var je=r(734),Te=r(724);function Ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Fe extends a.PureComponent{constructor(e,t){super(e,t),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(r),!0).forEach((function(t){Ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromAuthStore()),this.context.authStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthStore())})}getStateFromAuthStore(){return{claimedAuthorId:this.context.authStore.getClaimedAuthorId()}}render(){const{claimedAuthorId:e}=this.state;return e?a.createElement("div",{className:"account-author-claim-pending"},a.createElement("h2",null,Object(l.b)(e=>e.account.page.authorClaimPending.pageHeading)),a.createElement("div",{className:"account-author-claim-pending__description"},Object(l.b)(e=>e.authorClaimPending.description)),a.createElement("div",{className:"account-author-claim-pending__banner"},a.createElement(U.a,{icon:"status-waiting"}),a.createElement("div",{className:"account-author-claim-pending__banner__label"},Object(l.b)(e=>e.authorClaimPending.bannerLabel))),a.createElement("hr",{className:"account-author-claim-pending__rule"}),a.createElement("div",{className:"account-author-claim-pending__status-instructions"},a.createElement(je.a,{content:Object(l.b)(e=>e.authorClaimPending.statusInstruction)})),a.createElement("div",{className:"account-author-claim-pending__button-row"},a.createElement(Te.a,{to:"AUTHOR_PROFILE_BY_ID",params:{authorId:e},className:"button button--secondary"},Object(l.b)(e=>e.authorClaimPending.authorLinkLabel)))):null}}Ie(Fe,"getPageTitle",()=>Object(l.b)(e=>e.account.page.authorClaimPending.pageTitle)),Ie(Fe,"contextTypes",{authStore:L.a.instanceOf(fe.a).isRequired});var ke=r(6),De=r(165),Le=r.n(De);function qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(r),!0).forEach((function(t){He(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function He(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const{EventEmitter:ze}=Le.a;class Ue extends ke.a{constructor(e){super(),this._api=e,this._formEventEmitter=new ze,this._registeredFields=new Map,this._stateOfFields=new Map,this._isSending=!1,this._formErrorMsg=null,this._formEventEmitter.setMaxListeners(1e3)}destroy(){this._formEventEmitter.removeAllListeners(),this._stateOfFields.clear(),this._registeredFields.clear()}subscribe(e,t){return this._addListener(e,t),()=>{this._removeListener(e,t)}}triggerSubmit(){this._emit("submit")}async submitToApi(e){this._isSending&&g.a.warn("Second attempt to submit a form while data is sending to API."),this.setSending(!0);try{const t=this.getFormValues(),r=await e(this._api,t);return this._cleanFormValues(),r}catch(e){this.setFormErrorMessage(e.message)}finally{this.setSending(!1)}}_addListener(e,t){this._formEventEmitter.addListener(e,t)}_removeListener(e,t){this._formEventEmitter.removeListener(e,t)}_emit(e){this._formEventEmitter.emit(e)}registerField(e){const{fieldName:t,initialValue:r,onChange:a,onClear:n,onReset:o}=e;k()(!this._registeredFields.has(t),"Field ".concat(t," already exists in FormStore")),this._registeredFields.set(t,e),this._stateOfFields.set(t,{errorMessage:null,fieldName:t,value:r}),a&&this._addListener("change-".concat(t),a),n&&this._addListener("clear",n),o&&this._addListener("reset",o)}unregisterField(e){const t=this._registeredFields.get(e);t&&(this._registeredFields.delete(e),this._stateOfFields.delete(e),t.onChange&&this._removeListener("change-".concat(e),t.onChange),t.onClear&&this._removeListener("clear",t.onClear),t.onReset&&this._removeListener("reset",t.onReset))}getFieldNames(){return[...this._registeredFields.keys()]}setFieldErrorMessage(e,t){const r=this._stateOfFields.get(e);k()(r,"Field ".concat(e," cannot set error message, it's missing from state")),r.errorMessage!==t&&(this._stateOfFields.set(e,Me({},r,{errorMessage:t})),this._emit("change-".concat(e)),this.emitChange())}getFieldErrorMessage(e){const t=this._stateOfFields.get(e);return k()(t,"Field ".concat(e," cannot get error message, it's missing from state")),t.errorMessage||null}getFieldsWithErrors(){return[...this._stateOfFields.values()].filter(e=>!!e.errorMessage).map(e=>e.fieldName)}hasFieldError(e){return!!this.getFieldErrorMessage(e)}hasFieldErrors(){return this.getFieldsWithErrors().length>0}setInitialFieldValue(e,t){const r=this._registeredFields.get(e);return k()(r,"Field ".concat(e," was unable to set initial value because it was not yet registered.")),this.isFieldDirty(e)?(g.a.warn("Was unable to set the initial field value for ".concat(e," because it was dirty")),!1):(this._registeredFields.set(e,Me({},r,{initialValue:t})),this.setFieldValue(e,t),!0)}getFieldValue(e){const t=this._stateOfFields.get(e);return k()(t,"Field ".concat(e," cannot get value, it's missing from state")),t.value}setFieldValue(e,t){this._setFieldValue(e,t)&&this._emit("change-".concat(e))}_setFieldValue(e,t){const r=this._stateOfFields.get(e);return k()(r,"Field ".concat(e," cannot be updated, it's missing from state")),r.value!==t&&(this._stateOfFields.set(e,Me({},r,{errorMessage:null,value:t})),!0)}resetFieldValue(e){this._resetFieldValue(e)&&this._emit("change-".concat(e))}_resetFieldValue(e){const t=this._registeredFields.get(e);return k()(t,"Field ".concat(e," cannot be reset, it's missing from state")),k()(void 0!==t.initialValue,"Field ".concat(e," cannot be reset, it's initial value is undefined")),this._setFieldValue(e,t.initialValue)}clearFieldValue(e){this._clearFieldValue(e)&&this._emit("change-".concat(e))}_clearFieldValue(e){return this._setFieldValue(e,null)}resetForm(){const e=[];for(const[t]of this._stateOfFields)this._resetFieldValue(t)&&e.push(t);for(const t of e)this._emit("change-".concat(t));this._emit("reset")}clearForm(){const e=[];for(const[t]of this._stateOfFields)this._clearFieldValue(t)&&e.push(t);for(const t of e)this._emit("change-".concat(t));this._emit("clear")}hasError(){return!!this.getFormErrorMessage()||this.hasFieldErrors()}getFormErrorMessage(){return this._formErrorMsg||null}setFormErrorMessage(e){this._formErrorMsg!==e&&(this._formErrorMsg=e||null,this.emitChange())}_clearFormErrorMessage(){this._formErrorMsg=null}getFormValues(){const e={};for(const[t,r]of this._stateOfFields)e[t]=r.value;return e}getDirtyFieldNames(){return this.getFieldNames().filter(e=>this.isFieldDirty(e))}_cleanFormValues(){for(const[e]of this._stateOfFields){const t=this._registeredFields.get(e),r=this._stateOfFields.get(e);k()(t&&r,"Field ".concat(e," was missing when attempting to clean the fieldValue.")),this._registeredFields.set(e,Me({},t,{initialValue:r.value}))}}isFieldDirty(e){const t=this._registeredFields.get(e),r=this._stateOfFields.get(e);return k()(t&&r,"Field ".concat(e," was not registered at the time of checking dirty state.")),t.initialValue&&"function"==typeof t.initialValue.equals?!t.initialValue.equals(r.value):t.initialValue!==r.value}isFormDirty(){const e=this.getFieldNames();for(const t of e)if(this.isFieldDirty(t))return!0;return!1}isSending(){return this._isSending}setSending(e){this._isSending!==e&&(this._isSending=e,this.emitChange())}async validate(){this._clearFormErrorMessage();const e=[...this._registeredFields.values()].filter(e=>e.onValidate),t=0===(await Promise.all(e.map(e=>e.onValidate&&e.onValidate(this).then(t=>(this.setFieldErrorMessage(e.fieldName,t),!t),t=>(t instanceof Error?(g.a.error("Failed to validate ".concat(e.fieldName,": threw Error"),t),this.setFieldErrorMessage(e.fieldName,t.message)):"string"==typeof t?this.setFieldErrorMessage(e.fieldName,t):t?(g.a.error("Failed to validate ".concat(e.fieldName,": unexpected error message type"),t),this.setFieldErrorMessage(e.fieldName,t.toString())):(g.a.error("Failed to validate ".concat(e.fieldName,": message was falsy"),t),this.setFieldErrorMessage(e.fieldName,"Field is invalid.")),!1))))).filter(e=>!e).length;return this._emit("validate"),t}}function Ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ye extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),this.onChange=this.onChange.bind(this);const{fieldName:n,initialValue:o}=this.props;this.context.formStore.registerField({fieldName:n,initialValue:o,onValidate:e.onValidate,onChange:()=>this.setState(this.getStateFromFormStore())}),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(r),!0).forEach((function(t){Be(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromFormStore())}componentDidUpdate(e){const t=this.context.formStore,r=this.props.initialValue||"";e.initialValue!==r&&t.setInitialFieldValue(e.fieldName,r)}componentWillUnmount(){this.context.formStore.unregisterField(this.props.fieldName)}getStateFromFormStore(){const e=this.context.formStore,{fieldName:t}=this.props;return{value:e.getFieldValue(t)||"",error:e.getFieldErrorMessage(t)}}onChange(e){const t=this.context.formStore,{fieldName:r}=this.props,{value:a}=e.currentTarget;t.setFieldValue(r,a)}render(){const{fieldName:e,label:t,placeholder:r,isRequired:n}=this.props,{value:o,error:i}=this.state;return a.createElement("label",{className:N()("author-edit__field",{"author-edit__has-error":i})},a.createElement("div",{className:"author-edit__field__label"},a.createElement("span",{className:"author-edit__field__label-text"},t),!n&&a.createElement("span",{className:"author-edit__field__label-optional"},Object(l.b)(e=>e.authorEdit.form.optional))),a.createElement("div",{className:"author-edit__field__input"},a.createElement("input",{type:"text",name:e,className:"legacy__input author-edit__field__input-text",value:o,onChange:this.onChange,placeholder:r}),a.createElement("div",{className:"author-edit__field__error"},i)))}}function Ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function We(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Be(Ye,"contextTypes",{formStore:L.a.instanceOf(Ue).isRequired});class Qe extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(r),!0).forEach((function(t){We(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromAuthorProfileStore()),this.context.authorProfileStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorProfileStore())})}getStateFromAuthorProfileStore(){const e=this.context.authorProfileStore.getAuthorProfile();return e?{initialFirstName:e.firstName,initialMiddleNames:e.middleNames.join(" "),initialLastName:e.lastName}:{initialFirstName:"",initialMiddleNames:"",initialLastName:""}}render(){const{initialFirstName:e,initialMiddleNames:t,initialLastName:r}=this.state;return a.createElement(a.Fragment,null,a.createElement(Ye,{fieldName:"firstName",initialValue:e,label:Object(l.b)(e=>e.authorEdit.form.firstNameLabel),placeholder:Object(l.b)(e=>e.authorEdit.form.firstNamePlaceholder),isRequired:!1}),a.createElement(Ye,{fieldName:"middleNames",initialValue:t,label:Object(l.b)(e=>e.authorEdit.form.middleNamesLabel),placeholder:Object(l.b)(e=>e.authorEdit.form.middleNamesPlaceholder),isRequired:!1}),a.createElement(Ye,{fieldName:"lastName",initialValue:r,label:Object(l.b)(e=>e.authorEdit.form.lastNameLabel),placeholder:Object(l.b)(e=>e.authorEdit.form.lastNamePlaceholder),onValidate:Ge,isRequired:!0}))}}async function Ge(e){const t=e.getFieldValue("lastName");return"string"!=typeof t||0===t.trim().length?Object(l.b)(e=>e.authorEdit.error.lastNameMissing):null}We(Qe,"contextTypes",{authorProfileStore:L.a.instanceOf(I.a).isRequired});var Xe=r(847),Je=r(848);function Ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function $e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class et extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(r),!0).forEach((function(t){$e(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromAuthorProfileStore()),this.context.authorProfileStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorProfileStore())})}getStateFromAuthorProfileStore(){const e=this.context.authorProfileStore.getAuthorProfile();if(!e)return{initialAffiliation:"",initialOrcidId:"",initialHomepageUrl:""};const{affiliations:t=[],orcidId:r="",homepageUrl:a=""}=e;return{initialAffiliation:t.join("; "),initialOrcidId:r,initialHomepageUrl:a}}render(){const{initialAffiliation:e,initialOrcidId:t,initialHomepageUrl:r}=this.state;return a.createElement(a.Fragment,null,a.createElement(Ye,{fieldName:"affiliation",initialValue:e,label:Object(l.b)(e=>e.authorEdit.form.affiliationLabel),placeholder:Object(l.b)(e=>e.authorEdit.form.affiliationPlaceholder),isRequired:!1}),a.createElement(Ye,{fieldName:"orcidId",initialValue:t,label:Object(l.b)(e=>e.authorEdit.form.orcidIdLabel),placeholder:Object(l.b)(e=>e.authorEdit.form.orcidIdPlaceholder),onValidate:tt,isRequired:!1}),a.createElement(Ye,{fieldName:"homepageUrl",initialValue:r,label:Object(l.b)(e=>e.authorEdit.form.homepageUrlLabel),placeholder:Object(l.b)(e=>e.authorEdit.form.homepageUrlPlaceholder),onValidate:rt,isRequired:!1}))}}async function tt(e){const t=e.getFieldValue("orcidId");return t?(k()("string"==typeof t,"value of orcid id was not a string"),t&&!Je.a.test(t)?Object(l.b)(e=>e.authorEdit.error.orcidIdInvalid):null):null}async function rt(e){const t=e.getFieldValue("homepageUrl");return t?(k()("string"==typeof t,"value of homepage was not a string"),t&&!Xe.a.test(t)?Object(l.b)(e=>e.authorEdit.error.homepageUrlInvalid):null):null}function at(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function nt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}$e(et,"contextTypes",{authorProfileStore:L.a.instanceOf(I.a).isRequired});class ot extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?at(Object(r),!0).forEach((function(t){nt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromFormStore()),this.context.formStore.registerComponent(this,()=>{this.setState(this.getStateFromFormStore())})}getStateFromFormStore(){return{isSending:this.context.formStore.isSending()}}render(){return a.createElement("div",{className:"author-edit"},a.createElement("div",{className:"author-edit__fields"},a.createElement(Qe,null),a.createElement("hr",{className:"author-edit__divider"}),a.createElement(et,null)))}}nt(ot,"contextTypes",{formStore:L.a.instanceOf(Ue).isRequired});var it=r(230),st=r(32);function ct(){return(ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function lt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ht(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class dt extends a.PureComponent{static async willRouteTo(e){let{api:t,authStore:r,authorProfileStore:a,authorCorrectionsStore:n}=e;if(n.isModeratorCorrecting()){const e=n.getModeratorCorrectionsAuthorId();if(e)return t.fetchAuthorDetail(e,null,!1)}else{const e=r.getClaimedAuthorId(),n=a.getAuthorProfile();if(!e)return new st.a({routeName:"ACCOUNT_CONTACT",replace:!0,status:302});if(!n)return t.fetchAuthorProfile({authorId:e})}}constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(r),!0).forEach((function(t){ht(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({successMessage:null},this.getStateFromFormStore(),{},this.getStateFromAuthorCorrectionsStore(),{},this.getStateFromAuthorStore()),this.props.formStore.registerComponent(this,()=>{this.setState(this.getStateFromFormStore())}),this.props.formStore.subscribe("submit",()=>{this.attemptSubmit()}),this.context.authorCorrectionsStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorCorrectionsStore())}),this.context.authorStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorStore())}),this.onClickUnclaim=this.onClickUnclaim.bind(this),this.onSubmitForm=this.onSubmitForm.bind(this)}getStateFromFormStore(){const{formStore:e}=this.props;return{errorMessage:e.getFormErrorMessage(),isFormDirty:e.isFormDirty(),isSending:e.isSending()}}getStateFromAuthorCorrectionsStore(){const{authorCorrectionsStore:e}=this.context;return{moderatorCorrectionsAuthorId:e.getModeratorCorrectionsAuthorId(),isModeratorCorrecting:e.isModeratorCorrecting()}}getStateFromAuthorStore(){var e;const{authorStore:t}=this.context;return{authorName:null!=(e=t)&&null!=(e=e.author)?e.name:e}}onSubmitForm(e){e.preventDefault(),this.attemptSubmit()}onClickUnclaim(e){e.preventDefault(),window.confirm(Object(l.b)(e=>e.authorEdit.unclaimDialogue))&&this.attemptUnclaim()}navigateToAuthorPage(e){this.context.router.history.push(Object(ie.d)({routeName:"AUTHOR_PROFILE_BY_ID",params:{authorId:e}}))}async attemptSubmit(){const{formStore:e,history:t}=this.props,{moderatorCorrectionsAuthorId:r,isModeratorCorrecting:a}=this.state;if(!await e.validate())return;const n=r||this.context.authStore.getClaimedAuthorId();if(!n)return void e.setFormErrorMessage(Object(l.b)(e=>e.authorEdit.error.noAuthorClaimed));await e.submitToApi(async(e,t)=>{try{await Promise.all([e.updateAuthorProfile({authorId:n,lastName:(t.lastName||"").trim(),middleNames:(t.middleNames||"").split(/\s+/).map(e=>e.trim()),firstName:(t.firstName||"").trim(),affiliation:(t.affiliation||"").split("; ").map(e=>e.trim()),homepageUrl:(t.homepageUrl||"").trim(),orcidId:(t.orcidId||"").trim()}),Object(ae.a)(2e3)])}catch(e){throw new Error(Object(l.b)(e=>e.authorEdit.error.apiFailed))}});const o=a?"AUTHOR_CORRECTIONS_TOOL_STATUS":"ACCOUNT_CORRECTIONS",i=new st.a({routeName:o,replace:!0,status:302});Object(it.a)({redirect:i,history:t})}async attemptUnclaim(){const{formStore:e}=this.props,t=this.context.authStore.getClaimedAuthorId();if(!t)return void e.setFormErrorMessage(Object(l.b)(e=>e.authorEdit.error.noAuthorClaimed));const r=this.context.api;await r.unclaimAuthorProfile({authorId:t}),await r.fetchUserInfo(),this.navigateToAuthorPage(t)}renderMessage(){const{errorMessage:e,successMessage:t}=this.state;return e?a.createElement("div",{className:"account__error-msg"},e):t?a.createElement("div",{className:"account__success-msg"},t):null}render(){const{isSending:e,isFormDirty:t,isModeratorCorrecting:r,authorName:n}=this.state,u=r?Object(l.b)(e=>e.moderatorCorrections.contactInfo.pageHeading,n):Object(l.b)(e=>e.account.page.authorContact.pageHeading),h=r?Object(l.b)(e=>e.moderatorCorrections.contactInfo.pageDescription):Object(l.b)(e=>e.account.page.authorContact.pageDescription);return a.createElement("div",{className:"account-author-contact"},a.createElement("div",{className:"account-author-contact__headline"},u),a.createElement("div",{className:"account-author-contact__description"},a.createElement(je.a,{content:h})),a.createElement("hr",{className:"account__divider"}),a.createElement("form",{onSubmit:this.onSubmitForm},a.createElement(ot,null),a.createElement(o,null,a.createElement(c,null,this.renderMessage()),a.createElement(s,null,e&&a.createElement(U.a,{className:"account__loading",icon:"gear"}),a.createElement("button",{className:"account-author-contact__submit-button button button--primary",onClick:this.onSubmitForm},Object(l.b)(e=>e.account.button.submit))),a.createElement(i,null,!r&&a.createElement("button",{className:"button button--tertiary",onClick:this.onClickUnclaim},Object(l.b)(e=>e.authorEdit.form.unlinkLabel))))),a.createElement(Ce,{when:t,message:Object(l.b)(e=>e.authorEdit.error.dirtyForm)}))}}ht(dt,"getPageTitle",()=>Object(l.b)(e=>e.account.page.authorContact.pageTitle)),ht(dt,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,authorCorrectionsStore:L.a.instanceOf(A.a).isRequired,authorProfileStore:L.a.instanceOf(I.a).isRequired,authStore:L.a.instanceOf(fe.a).isRequired,authorStore:L.a.instanceOf(T.a).isRequired,router:L.a.object.isRequired});var pt=function(e){class t extends a.Component{constructor(e,t){super(e,t);const r=new Ue(this.context.api);this.state={formStore:r},e.getFormStore&&e.getFormStore(r)}getChildContext(){const{formStore:e}=this.state;return{formStore:e}}render(){return a.createElement(e,ct({},this.props,{formStore:this.state.formStore}))}}return lt(t,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired}),lt(t,"childContextTypes",{formStore:L.a.instanceOf(Ue)}),new Proxy(t,{get:(t,r)=>r in t?t[r]:r in e?e[r]:void 0})}(dt),mt=r(137),bt=r(162);function gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ft(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class _t extends a.PureComponent{constructor(){super(...arguments),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(r),!0).forEach((function(t){ft(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromAuthStore(),{},this.getStateFromCorrectionsStore()),this.context.authStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthStore())}),this.context.correctionsStore.registerComponent(this,()=>{this.setState(this.getStateFromCorrectionsStore())})}getStateFromAuthStore(){return{viewerClaimedAuthorId:this.context.authStore.getClaimedAuthorId()}}getStateFromCorrectionsStore(){const e=this.context.correctionsStore,{correction:t}=this.props;return{paper:e.getCorrectedPaperById(t.paperHash)}}buildViewerAuthor(){const{correction:{authorId:e}}=this.props,t=this.context.correctionsStore.getAuthorCorrections().findLast(e=>e.fieldNames.includes("authorName"));if(t){const{first:r,middle:a,last:n}=t.fieldCorrections.find(e=>"authorName"===e.field).changeValue;return mt.a.fromJs({ids:[e],name:[r,...a,n].join(" ")})}const r=this.context.authorProfileStore.getAuthorProfile();return r?mt.a.fromJs({ids:[e],name:r.fullName}):mt.a.fromJs({ids:[e],name:"You"})}renderAuthor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{correction:r}=this.props,n=e.canonicalId()===this.state.viewerClaimedAuthorId;return a.createElement("li",{key:[r.paperHash,e.canonicalId()].join("|"),className:N()({"corrections-summary__paper-correction__author":!0,"corrections-summary__paper-correction__author__added":t.isAdd,"corrections-summary__paper-correction__author__removed":t.isRemove})},a.createElement("span",{className:"corrections-summary__paper-correction__author__name"},e.name),n&&a.createElement("span",{className:"corrections-summary__paper-correction__author__viewer-claimed-tag"},Object(l.b)(e=>e.correctionSummary.viewerClaimedLabel)))}renderAddAuthorship(e){const{correction:t}=this.props,r=t.position,n=e.slice(0,r),o=e.slice(r);return a.createElement("ul",{className:"corrections-summary__paper-correction__author-list corrections-summary__paper-correction__add-authorship"},n.map(e=>this.renderAuthor(e)),this.renderAuthor(this.buildViewerAuthor(),{isAdd:!0}),o.map(e=>this.renderAuthor(e)))}renderRemoveAuthorship(e){const{correction:t}=this.props,r=t.position,n=e.slice(0,r),o=e.slice(r+1),i=e.get(r);return a.createElement("ul",{className:"corrections-summary__paper-correction__author-list corrections-summary__paper-correction__remove-authorship"},n.map(e=>this.renderAuthor(e)),this.renderAuthor(i,{isRemove:!0}),o.map(e=>this.renderAuthor(e)))}renderSwapAuthorship(e){const{correction:t}=this.props,r=t.position,n=e.slice(0,r),o=e.slice(r+1),i=e.get(r);return a.createElement("ul",{className:"corrections-summary__paper-correction__author-list corrections-summary__paper-correction__swap-authorship"},n.map(e=>this.renderAuthor(e)),this.renderAuthor(i,{isRemove:!0}),this.renderAuthor(this.buildViewerAuthor(),{isAdd:!0}),o.map(e=>this.renderAuthor(e)))}render(){const{correction:e}=this.props,{paper:t}=this.state;if(!t)return null;const r=t.authors.map(e=>e.alias);return a.createElement("div",{className:"corrections-summary__paper-correction"},a.createElement("div",{className:"corrections-summary__paper-correction__title"},a.createElement(Te.a,{to:"PAPER_DETAIL",params:{paperId:t.id,slug:t.slug}},t.title)),(()=>{switch(e.correctionType){case _e.a.AddAuthorship:return this.renderAddAuthorship(r);case _e.a.SwapAuthorship:return this.renderSwapAuthorship(r)}})())}}ft(_t,"contextTypes",{authStore:L.a.instanceOf(fe.a).isRequired,authorProfileStore:L.a.instanceOf(I.a).isRequired,correctionsStore:L.a.instanceOf(bt.a).isRequired});r(428);const yt={ChangeNameField:"authorName",ChangeOrcidField:"orcidId",ChangeHomepageField:"homepage",ChangeAffiliationField:"affiliations"},Et=Object.keys(yt).reduce((e,t)=>(e[yt[t]]=t,e),{});var Ot=Object.freeze(yt);Object.freeze(Et);var St=r(39);r(54);function vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ct(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const wt=[_e.a.AddAuthorship,_e.a.SwapAuthorship],Pt=[_e.a.RemoveAuthorship];class Nt extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(r),!0).forEach((function(t){Ct(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({errorMessage:null},this.getStateFromAuthStore(),{},this.getStateFromCorrectionsStore()),this.context.authStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthStore())}),this.context.correctionsStore.registerComponent(this,()=>{this.setState(this.getStateFromCorrectionsStore())})}getStateFromAuthStore(){return{authorId:this.context.authStore.getClaimedAuthorId()}}getStateFromCorrectionsStore(){const e=this.context.correctionsStore;return{isLoading:e.isLoading(),authorCorrectionsStatus:e.getAuthorCorrectionsStatus(),nameFieldCorrections:e.getFieldCorrectionsByName(Ot.ChangeNameField),affiliationsFieldCorrections:e.getFieldCorrectionsByName(Ot.ChangeAffiliationField),homepageFieldCorrections:e.getFieldCorrectionsByName(Ot.ChangeHomepageField),orcidFieldCorrections:e.getFieldCorrectionsByName(Ot.ChangeOrcidField),addCorrections:e.getPaperAuthorCorrectionsByTypes(wt),addCorrectionsStatus:e.getPaperAuthorCorrectionsStatusByTypes(wt),removeCorrections:e.getPaperAuthorCorrectionsByTypes(Pt),removeCorrectionsStatus:e.getPaperAuthorCorrectionsStatusByTypes(Pt)}}renderNameFieldCorrection(){const{nameFieldCorrections:e}=this.state;if(e.isEmpty())return null;const{previousValue:t}=e.first(),{changeValue:r}=e.last(),n=[t.first,...t.middle,t.last].join(" "),o=[r.first,...r.middle,r.last].join(" ");return a.createElement("li",{key:"name-field",className:"corrections-summary__author-corrections__item"},a.createElement("div",{className:"corrections-summary__author-corrections__item-label"},Object(l.b)(e=>e.correctionSummary.authorCorrections.nameFieldLabel)),a.createElement("div",{className:"corrections-summary__author-corrections__item-change"},a.createElement("div",{className:"corrections-summary__author-corrections__item-change__old-value"},n),a.createElement("div",{className:"corrections-summary__author-corrections__item-change__new-value"},o)))}renderAffiliationsFieldCorrection(){const{affiliationsFieldCorrections:e}=this.state;if(e.isEmpty())return null;const{previousValue:t}=e.first(),{changeValue:r}=e.last(),n=r.filter(e=>!t.includes(e)),o=t.filter(e=>!r.includes(e));return n.length+o.length===0?null:a.createElement("li",{key:"affiliations-field",className:"corrections-summary__author-corrections__item"},a.createElement("div",{className:"corrections-summary__author-corrections__item-label"},Object(l.b)(e=>e.correctionSummary.authorCorrections.affiliationsFieldLabel)),a.createElement("div",{className:"corrections-summary__author-corrections__item-change"},o.map(e=>a.createElement("div",{key:e,className:"corrections-summary__author-corrections__item-change__remove-value"},e)),n.map(e=>a.createElement("div",{key:e,className:"corrections-summary__author-corrections__item-change__add-value"},e))))}renderOrcidFieldCorrection(){var e,t;const{orcidFieldCorrections:r}=this.state;if(r.isEmpty())return null;const n=null!=(t=r.first())&&null!=(t=t.previousValue)?t.id:t,o=null!=(e=r.last())&&null!=(e=e.changeValue)?e.id:e;return a.createElement("li",{key:"orcid-field",className:"corrections-summary__author-corrections__item"},a.createElement("div",{className:"corrections-summary__author-corrections__item-label"},Object(l.b)(e=>e.correctionSummary.authorCorrections.orcidFieldLabel)),a.createElement("div",{className:"corrections-summary__author-corrections__item-change"},n&&a.createElement("div",{className:"corrections-summary__author-corrections__item-change__old-value"},n),o&&a.createElement("div",{className:"corrections-summary__author-corrections__item-change__new-value"},o)))}renderHomepageFieldCorrection(){const{homepageFieldCorrections:e}=this.state;if(e.isEmpty())return null;const t=e.first().previousValue,r=e.last().changeValue;return a.createElement("li",{key:"homepage-field",className:"corrections-summary__author-corrections__item"},a.createElement("div",{className:"corrections-summary__author-corrections__item-label"},Object(l.b)(e=>e.correctionSummary.authorCorrections.homepageFieldLabel)),a.createElement("div",{className:"corrections-summary__author-corrections__item-change"},t&&a.createElement("div",{className:"corrections-summary__author-corrections__item-change__old-value"},t),r&&a.createElement("div",{className:"corrections-summary__author-corrections__item-change__new-value"},r)))}renderAuthorCorrections(){const{authorCorrectionsStatus:e}=this.state,t=[this.renderNameFieldCorrection(),this.renderAffiliationsFieldCorrection(),this.renderOrcidFieldCorrection(),this.renderHomepageFieldCorrection()].filter(e=>!!e);return 0===t.length?null:a.createElement("section",{className:"corrections-summary__section corrections-summary__author-corrections"},a.createElement("h3",{className:"corrections-summary__correction-headline"},a.createElement("span",{className:"corrections-summary__correction-headline__text"},Object(l.b)(e=>e.correctionSummary.authorCorrections.headerText))),a.createElement(xt,{status:e}),a.createElement("ul",{className:"corrections-summary__author-corrections__list"},t))}renderAddCorrections(){const{addCorrections:e}=this.state;return e.isEmpty()?null:a.createElement("section",{className:"corrections-summary__section corrections-summary__paper-corrections corrections-summary__add-corrections"},a.createElement("h3",{className:"corrections-summary__correction-headline"},a.createElement("span",{className:"corrections-summary__correction-headline__text"},Object(l.a)(e=>e.correctionSummary.addCorrections.headerText,e.size))),a.createElement("ul",{className:"corrections-summary__paper-corrections__list"},e.map(e=>a.createElement("li",{key:"add-"+e.id,className:"corrections-summary__paper-corrections__item"},a.createElement(xt,{status:e.completionStatus}),a.createElement(_t,{correction:e})))))}renderRemoveCorrections(){const{removeCorrections:e}=this.state;return e.isEmpty()?null:a.createElement("section",{className:"corrections-summary__section corrections-summary__paper-corrections corrections-summary__remove-corrections"},a.createElement("h3",{className:"corrections-summary__correction-headline"},a.createElement("span",{className:"corrections-summary__correction-headline__text"},Object(l.a)(e=>e.correctionSummary.removeCorrections.headerText,e.size))),a.createElement("ul",{className:"corrections-summary__paper-corrections__list"},e.map(e=>a.createElement("li",{key:"remove-"+e.id,className:"corrections-summary__paper-corrections__item"},a.createElement(xt,{status:e.completionStatus}),a.createElement(_t,{correction:e})))))}render(){return a.createElement("div",{className:"corrections-summary"},this.renderAuthorCorrections(),this.renderRemoveCorrections(),this.renderAddCorrections())}}function xt(e){let{status:t}=e;return t?a.createElement("span",{className:"corrections-summary__correction-headline__status"},a.createElement("span",{className:"corrections-summary__correction-headline__status__label"},Object(l.b)(e=>e.correctionSummary.statusLabel[t])),(()=>{switch(t){default:return null;case St.a.Submitted:case St.a.Processing:return a.createElement(U.a,{icon:"status-waiting"});case St.a.Cancelled:case St.a.Failed:return a.createElement(U.a,{icon:"status-warning"});case St.a.Succeeded:return a.createElement(U.a,{icon:"status-approved"})}})()):null}Ct(Nt,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,authStore:L.a.instanceOf(fe.a).isRequired,correctionsStore:L.a.instanceOf(bt.a).isRequired});r(69);function Rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function jt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Tt extends a.PureComponent{constructor(e,t){super(e,t),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(r),!0).forEach((function(t){jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromAuthStore(),{},this.getStateFromAuthorCorrectionsStore()),this.context.authStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthStore())}),this.context.authorCorrectionsStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorCorrectionsStore())})}getStateFromAuthStore(){return{claimedAuthorId:this.context.authStore.getClaimedAuthorId()}}getStateFromAuthorCorrectionsStore(){const e=this.context.authorCorrectionsStore;return{isModeratorCorrecting:e.isModeratorCorrecting(),moderatorCorrectionsAuthorId:e.getModeratorCorrectionsAuthorId()}}static async willRouteTo(e){let{api:t,authorCorrectionsStore:r}=e;const a=r.isModeratorCorrecting?r.getModeratorCorrectionsAuthorId():null;if(a)return Promise.all([t.fetchAuthorCorrectionsForAuthor({authorId:a}),t.fetchPaperAuthorCorrectionsForAuthor({authorId:a,includePaperModel:"PaperLite"})])}render(){const{claimedAuthorId:e,isModeratorCorrecting:t,moderatorCorrectionsAuthorId:r}=this.state,n=t?r:e;return a.createElement("div",{className:"account-correction-summary"},a.createElement("h2",{className:"account-correction-summary__headline"},Object(l.b)(e=>e.account.page.corrections.pageHeading)),a.createElement(Nt,null),a.createElement(o,null,a.createElement(s,null,!!n&&a.createElement(Te.a,{className:"account-correction-summary__link-button button button--primary",to:"AUTHOR_PROFILE_BY_ID",params:{authorId:n}},Object(l.b)(e=>e.account.page.corrections.authorPageLink)))))}}jt(Tt,"getPageTitle",()=>Object(l.b)(e=>e.account.page.corrections.pageTitle)),jt(Tt,"contextTypes",{authStore:L.a.instanceOf(fe.a).isRequired,authorCorrectionsStore:L.a.instanceOf(A.a).isRequired});var At=r(728),It=r(745),Ft=r(859),kt=r(226),Dt=r(26),Lt=r(228),qt=r(737);const Mt=["productFeaturesSpotlightSubscription","semanticScholarNewsletterSubscription","betaTestGroupSubscription","allenInstituteNewsletterSubscription"];var Ht=r(68),zt=r(210);function Ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Vt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Bt extends a.PureComponent{static async willRouteTo(e){let{userContactStore:t,api:r}=e;return t.isUninitialized()?r.getUserContact().catch(e=>{var t;if("contactMissing"!==(null!=(t=e)?t.errorCode:t))throw e;g.a.info("No contact associated yet")}):Promise.resolve()}constructor(e,t){super(e,t),Vt(this,"generateErrorList",e=>G.List(e.filter(e=>!!e))),Vt(this,"onToggle",e=>{const{userId:t,contactEmail:r}=this.state;if(!r)return Object(Ht.a)(Lt.a.create(kt.a.AccountSettings.NO_EMAIL_ERROR,t)),void this.setState({emailError:Object(l.b)(e=>e.account.page.contact.email.noEmailError)});const a={[e]:!this.state[e]};this.context.api.submitUserContactInfo(a),Object(Ht.a)(qt.a.create(kt.a.AccountSettings.CHANGE_SUBSCRIPTION,t)),this.setState(a)}),Vt(this,"onUnsubscribeAll",()=>{const{userId:e,contactEmail:t}=this.state;if(!t)return Object(Ht.a)(Lt.a.create(kt.a.AccountSettings.NO_EMAIL_ERROR,e)),void this.setState({emailError:Object(l.b)(e=>e.account.page.contact.email.noEmailError)});const r={};Mt.map(e=>r[e]=!1),this.context.api.submitUserContactInfo(r),Object(Ht.a)(qt.a.create(kt.a.AccountSettings.UNSUBSCRIBE_ALL,e)),this.setState(r)}),Vt(this,"onClickUpdateEmail",async()=>{const{contactEmail:e,userId:t,_updateEmailInput:r}=this.state;if(!e)return void this.setState({showEmailInput:!1,emailError:Object(l.b)(e=>e.account.page.contact.email.noEmailError),isEmailUpdating:!1,_updateEmailInput:null});if(!r&&e)return void this.setState({showEmailInput:!1,_updateEmailInput:null});if(r===e)return void this.setState({showEmailInput:!1,emailError:null,_updateEmailInput:null});const a={s2AccountEmail:r};try{this.setState({isEmailUpdating:!0}),await this.context.api.submitUserContactInfo(a),Object(Ht.a)(qt.a.create(kt.a.AccountSettings.CHANGE_CONTACT_EMAIL,t))}catch(e){var n,o;return void("ContactEmailTaken"===(null!=(o=e)?o.errorCode:o)?(Object(Ht.a)(Lt.a.create(kt.a.AccountSettings.CONTACT_EMAIL_CONFLICT,t)),this.setState({isEmailUpdating:!1,emailError:Object(l.b)(e=>e.account.page.contact.email.emailInUseError)})):"ContactInvalidEmail"===(null!=(n=e)?n.errorCode:n)?this.setState({isEmailUpdating:!1,emailError:Object(l.b)(e=>e.account.page.contact.email.invalidEmailError)}):(g.a.error(e),this.setState({isEmailUpdating:!1,emailError:Object(l.b)(e=>e.account.page.contact.email.invalidEmailError)})))}this.setState({showEmailInput:!1,contactEmail:r,emailError:null,isEmailUpdating:!1,_updateEmailInput:null})}),Vt(this,"onCancelEmail",()=>{this.setState({showEmailInput:!1,updatedEmail:null,emailError:null,_updateEmailInput:null})}),Vt(this,"onUpdateEmail",e=>{this.setState({_updateEmailInput:e})}),Vt(this,"displayEmailInput",()=>{this.setState({showEmailInput:!0,_updateEmailInput:this.state.contactEmail})}),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(r),!0).forEach((function(t){Vt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ut(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({updatedEmail:null,showEmailInput:!1,emailError:null,isEmailUpdating:!1,_updateEmailInput:null},this.getStateFromUserContactStore(),{},this.getStateFromAuthStore()),this.context.authStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthStore)}),this.context.userContactStore.registerComponent(this,()=>{this.setState(this.getStateFromUserContactStore())})}getStateFromAuthStore(){const e=this.context.authStore.getUser();return{userId:e?e.id:null}}getStateFromUserContactStore(){var e,t,r,a,n;const o=this.context.userContactStore.getUserContact();return{contactEmail:(null!=(n=o)?n.s2AccountEmail:n)||"",betaTestGroupSubscription:null!=(a=o)?a.betaTestGroupSubscription:a,productFeaturesSpotlightSubscription:null!=(r=o)?r.productFeaturesSpotlightSubscription:r,semanticScholarNewsletterSubscription:null!=(t=o)?t.semanticScholarNewsletterSubscription:t,allenInstituteNewsletterSubscription:null!=(e=o)?e.allenInstituteNewsletterSubscription:e}}renderSubscriptionToggle(e){var t;const r=!!(null!=(t=this.state)?t[e]:t),n=N()("email-subscription",{"is-disabled":!r});return a.createElement("ul",null,a.createElement("li",{className:n},a.createElement("div",{className:"account-contact__subscriptions__toggle"},a.createElement(Ft.a,{className:"subscription__toggle",selected:r,onClick:()=>this.onToggle(e)}),a.createElement("div",{className:"account-contact__subscription__label flex-static"},Object(l.b)(t=>t.account.page.contact.subscriptionType[e].label))),a.createElement("div",{className:"account-contact__subscription__description"},Object(l.b)(t=>t.account.page.contact.subscriptionType[e].description))))}renderEmailChange(){const{contactEmail:e,emailError:t,isEmailUpdating:r,_updateEmailInput:n}=this.state;return a.createElement("div",{className:"account-contact__update-email__change"},a.createElement("h2",{className:"account-contact__subscriptions__headline"},Object(l.b)(e=>e.account.page.contact.email.label)),a.createElement("div",{className:"account-contact__update-email__headline__buttons"},a.createElement("div",{className:"account-contact__update-email__input"},a.createElement(It.a,{className:"standard-form account-contact__update-email__input-box",value:n,onChange:this.onUpdateEmail,errors:this.generateErrorList([t]),isRequired:!0,placeholder:e})),a.createElement("div",{className:"account-contact__update-email__change-buttons"},a.createElement("button",{className:"button button--secondary account-contact__update-email__update-button",onClick:this.onClickUpdateEmail,disabled:r},a.createElement("div",{className:"flex-row-centered"},a.createElement("span",{className:"icon-button-text"},Object(l.b)(e=>e.account.page.contact.email.updateLabel)))),a.createElement("button",{className:"button button--secondary account-contact__update-email__cancel-button",onClick:this.onCancelEmail},a.createElement("div",{className:"flex-row-centered"},a.createElement("span",{className:"icon-button-text"},Object(l.b)(e=>e.account.page.contact.email.cancelLabel)))))))}renderEmailNoChange(){const{contactEmail:e,emailError:t}=this.state;return a.createElement("div",{className:"account-contact__update-email__no-change"},a.createElement("h2",{className:"account-contact__subscriptions__headline"},Object(l.b)(e=>e.account.page.contact.email.label)),a.createElement("div",{className:"account-contact__update-email__headline__buttons"},a.createElement("span",{className:"account-contact__update-email__email"},e||""),a.createElement("span",{className:"account-contact__update-email__no-email-error"},t&&t),a.createElement(At.c,{feature:Dt.b.LockedContactEmails},a.createElement(At.a,null,a.createElement("button",{className:"button button--secondary account-contact__update-email__button",onClick:this.displayEmailInput},a.createElement("div",{className:"flex-row-centered"},a.createElement("span",{className:"icon-button-text"},Object(l.b)(e=>e.account.page.contact.email.buttonLabel))))))))}render(){const{showEmailInput:e}=this.state;return a.createElement("div",{className:"account-contact"},a.createElement("div",{className:"account-settings-nav-label"},Object(l.b)(e=>e.account.section.general.navLabel)),a.createElement("h2",{className:"account-contact__headline"},Object(l.b)(e=>e.account.page.contact.pageHeading)),a.createElement("hr",{className:"account__divider"}),a.createElement("div",{className:"account-contact__email-section"},e?this.renderEmailChange():this.renderEmailNoChange()),a.createElement("hr",{className:"account__divider"}),a.createElement("div",{className:"account-contact__subscriptions"},a.createElement("h2",{className:"account-contact__subscriptions__headline"},Object(l.b)(e=>e.account.page.contact.subscriptionLabel)),a.createElement("div",{className:"account-contact__subscriptions__list"},Mt.map(e=>a.createElement("div",{className:"account-contact__subscription",key:e},this.renderSubscriptionToggle(e))))),a.createElement("hr",{className:"account__divider"}),a.createElement("div",{className:"account-contact__subscriptions__unsubscribe"},a.createElement("h2",{className:"account-contact__subscriptions__headline"},Object(l.b)(e=>e.account.page.contact.unsubscribe.label)),a.createElement("button",{className:"button button--secondary account-contact__unsubscribe-button",onClick:this.onUnsubscribeAll},a.createElement("div",{className:"flex-row-centered"},a.createElement("span",{className:"icon-button-text"},Object(l.b)(e=>e.account.page.contact.unsubscribe.buttonLabel))))),a.createElement("div",{className:"account-contact__subscriptions__description"},a.createElement(je.a,{content:Object(l.b)(e=>e.account.page.contact.unsubscribe.description)})))}}Vt(Bt,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,authStore:L.a.instanceOf(fe.a).isRequired,userContactStore:L.a.instanceOf(zt.a).isRequired}),Vt(Bt,"getPageTitle",()=>Object(l.b)(e=>e.account.page.contact.pageTitle));var Yt=r(879),Kt=r(823),Wt=r(112);function Qt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Gt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Xt extends a.PureComponent{static async willRouteTo(e){let{userContactStore:t,api:r}=e;return t.isUninitialized()?r.getUserContact().catch(e=>{var t;if("contactMissing"!==(null!=(t=e)?t.errorCode:t))throw e;g.a.info("No contact associated yet")}):Promise.resolve()}constructor(){super(...arguments),Gt(this,"onChangeFieldsOfStudy",e=>{this.setState({fieldsOfStudy:e})}),Gt(this,"generateErrorList",e=>G.List(e.filter(e=>!!e))),Gt(this,"validateFormState",()=>{const{firstName:e,lastName:t}=this.state;let r=null,a=null;return e&&""!==e.trim()||(r=Object(l.b)(e=>e.demographicForm.error.missingFirstName)),t&&""!=t.trim()||(a=Object(l.b)(e=>e.demographicForm.error.missingLastName)),{firstNameError:r,lastNameError:a}}),Gt(this,"onSubmitForm",async()=>{const e=this.context.api;if(this._onSubmitFormPromise)throw new Error("Already sending form");const t=this.onSubmitFormImpl();this._onSubmitFormPromise=t;try{await t,e.getUserContact()}catch(e){g.a.error(e)}finally{this._onSubmitFormPromise=null}}),Gt(this,"renderInput",e=>{let{label:t,isRequired:r,value:n,onChange:o,errors:i,placeholder:s}=e;return a.createElement(It.a,{label:t,className:"standard-form",isRequired:r,value:n||"",onChange:o,errors:this.generateErrorList([...i]),placeholder:s})}),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(r),!0).forEach((function(t){Gt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromUserContactStore()),this.context.userContactStore.registerComponent(this,()=>{this.setState(this.getStateFromUserContactStore())}),this.onChangefirstName=this.onChangeInput.bind(this,"firstName"),this.onChangelastName=this.onChangeInput.bind(this,"lastName"),this.onChangeCurrentRole=this.onChangeInput.bind(this,"currentOccupation"),this.onChangeWebsiteUrl=this.onChangeInput.bind(this,"websiteUrl")}getStateFromUserContactStore(){var e,t,r,a,n,o;const{userContactStore:i}=this.context,s=i.getUserContact();return{userId:null!=(o=s)?o.id:o,firstName:null!=(n=s)?n.firstName:n,lastName:null!=(a=s)?a.lastName:a,websiteUrl:null!=(r=s)?r.websiteUrl:r,currentOccupation:null!=(t=s)?t.currentOccupation:t,fieldsOfStudy:((null!=(e=s)?e.fieldsOfStudy:e)||[]).map(e=>e.name),firstNameError:null,lastNameError:null}}onChangeInput(e,t){const r=t.currentTarget?t.currentTarget.value:t;this.setState({["".concat(e,"Error")]:null,["".concat(e)]:r})}async onSubmitFormImpl(){const{userId:e,firstName:t,lastName:r,websiteUrl:a,currentOccupation:n,fieldsOfStudy:o}=this.state,i=this.validateFormState();if(await Object(ae.c)(this,i),!!Object.values(i).find(e=>null!==e))g.a.warn("Could not save due to errors",i);else try{const i={firstName:t,lastName:r,websiteUrl:a,currentOccupation:n,fieldsOfStudy:o};await this.context.api.submitUserContactInfo(i),Object(Ht.a)(qt.a.create(kt.a.ManageAccount.MANAGE_ACCOUNT_SUBMIT,e))}catch(e){g.a.error(e)}}render(){const{lastName:e,lastNameError:t,firstName:r,firstNameError:n,websiteUrl:o,fieldsOfStudy:i,currentOccupation:s}=this.state,c=Object(l.b)(e=>e.demographicForm.firstNameLabel),u=Object(l.b)(e=>e.demographicForm.lastNameLabel),h=Object(l.b)(e=>e.demographicForm.websiteUrlLabel),d=Object(l.b)(e=>e.demographicForm.fieldsOfStudyLabel);return a.createElement("div",{className:"account-manage"},a.createElement("div",{className:"account-settings-nav-label"},Object(l.b)(e=>e.account.page.manageAccount.navLabel)),a.createElement("h2",{className:"account-manage__headline"},Object(l.b)(e=>e.account.page.manageAccount.pageHeading)),a.createElement("hr",{className:"account-manage__rule"}),a.createElement("form",{onSubmit:this.onSubmitForm},a.createElement("div",{className:"flex-row"},a.createElement("div",{className:"account-manage__name-input account-manage__first-name"},this.renderInput({label:c,isRequired:!0,value:r,onChange:this.onChangefirstName,errors:[n],placeholder:"First Name"})),a.createElement("div",{className:"account-manage__name-input account-manage__last-name"},this.renderInput({label:u,isRequired:!0,value:e,onChange:this.onChangelastName,errors:[t],placeholder:"Last Name"}))),a.createElement("hr",{className:"account-manage__rule"}),this.renderInput({label:h,value:o,onChange:this.onChangeWebsiteUrl,errors:[]}),a.createElement(Kt.a,{currentOccupation:s,onChangeCurrentRole:this.onChangeCurrentRole}),a.createElement(Yt.a,{isRequired:!1,options:Wt.a.selectors().map(e=>e.name),selected:i,label:d,onChange:this.onChangeFieldsOfStudy})),a.createElement("button",{className:"button button--primary account-manage__submit-button",onClick:this.onSubmitForm},Object(l.b)(e=>e.account.page.manageAccount.submitButtonLabel)))}}Gt(Xt,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,userContactStore:L.a.instanceOf(zt.a).isRequired});var Jt=r(727);class Zt extends a.PureComponent{render(){const{activeRouteName:e,navSections:t}=this.props;return a.createElement("nav",{className:"nav-bar"},t.map(t=>a.createElement("section",{key:t.label,className:"nav-bar__section"},a.createElement("div",{className:"nav-bar__section__label"},t.label),a.createElement("ul",{className:"nav-bar__section__links"},t.links.map(t=>a.createElement("li",{key:t.label,className:N()({"nav-bar__link":!0,"nav-bar__is-active":t.routeName===e})},a.createElement(Te.a,{to:t.routeName},a.createElement("div",{className:"nav-bar__link__label"},t.label))))))))}}var $t=r(71),er=r(105),tr=r(70);function rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ar(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class nr extends a.PureComponent{static requiresAuthentication(){return!0}static pickRedirectRouteName(e,t){const r=t.isFeatureEnabled(Dt.b.AccountContactSection),a=e.getAuthorClaimModerationStatus();if(r)return"ACCOUNT_MANAGE";switch(a){case $t.b.Pending:case $t.b.PendingEmailVerification:return"ACCOUNT_AUTHOR_CLAIM_PENDING";case $t.b.Approved:return"ACCOUNT_AUTHOR_CONTACT"}return"HOME"}static async willRouteTo(e,t){let{api:r,authStore:a,weblabStore:n}=e;if(t.path===ie.b.ACCOUNT){const e=nr.pickRedirectRouteName(a,n);return new st.a({routeName:e,replace:!0,status:302})}const o=[],i=a.getClaimedAuthorId();return i&&o.push(r.fetchAuthorProfile({authorId:i}),r.fetchAuthorCorrectionsForAuthor({authorId:i}),r.fetchPaperAuthorCorrectionsForAuthor({authorId:i,includePaperModel:"PaperLite"})),Promise.all(o)}constructor(e,t){super(e,t),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(r),!0).forEach((function(t){ar(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromCorrectionsStore(),{},this.getStateFromWeblabStore(),{},this.getStateFromAuthStore()),this.context.correctionsStore.registerComponent(this,()=>{this.setState(this.getStateFromCorrectionsStore())}),this.context.weblabStore.registerComponent(this,()=>{this.setState(this.getStateFromWeblabStore())}),this.context.authStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthStore())})}getStateFromCorrectionsStore(){return{hasPendingCorrections:this.context.correctionsStore.hasCorrections()}}getStateFromWeblabStore(){const e=this.context.weblabStore;return{isAccountContactSectionEnabled:e.isFeatureEnabled(Dt.b.AccountContactSection),isContactEmailLocked:e.isFeatureEnabled(Dt.b.LockedContactEmails)}}getStateFromAuthStore(){var e;const t=this.context.authStore;return{claimedAuthorId:t.getClaimedAuthorId(),claimStatus:t.getAuthorClaimModerationStatus(),s2AccountEmail:null!=(e=t.getUser())?e.email:e}}getNavSections(){const{claimStatus:e,claimedAuthorId:t,hasPendingCorrections:r,isAccountContactSectionEnabled:a,isContactEmailLocked:n,s2AccountEmail:o}=this.state,i=[],s={routeName:"ACCOUNT_CORRECTIONS",label:Object(l.b)(e=>e.account.page.corrections.navLabel)};if(a&&n&&!o?i.push({label:Object(l.b)(e=>e.account.section.general.navLabel),links:[{routeName:"ACCOUNT_MANAGE",label:Object(l.b)(e=>e.account.page.manageAccount.navLabel)}]}):a&&i.push({label:Object(l.b)(e=>e.account.section.general.navLabel),links:[{routeName:"ACCOUNT_MANAGE",label:Object(l.b)(e=>e.account.page.manageAccount.navLabel)},{routeName:"ACCOUNT_CONTACT",label:Object(l.b)(e=>e.account.page.contact.navLabel)}]}),t)switch(e){case $t.b.Approved:{const e={label:Object(l.b)(e=>e.account.section.authorPage.navLabel),links:[{routeName:"ACCOUNT_AUTHOR_CONTACT",label:Object(l.b)(e=>e.account.page.authorContact.navLabel)},{routeName:"ACCOUNT_REMOVE_PAPERS",label:Object(l.b)(e=>e.account.page.removePapers.navLabel)},{routeName:"ACCOUNT_ADD_PAPERS",label:Object(l.b)(e=>e.account.page.addPapers.navLabel)}]};r&&e.links.push(s),i.push(e);break}case $t.b.Pending:case $t.b.PendingEmailVerification:i.push({label:Object(l.b)(e=>e.account.section.authorPage.navLabel),links:[{routeName:"ACCOUNT_AUTHOR_CLAIM_PENDING",label:Object(l.b)(e=>e.account.page.authorClaimPending.navLabel)}]})}return i}getActiveRouteName(){var e;const{router:t}=this.context,{route:r}=this.props,a=null!=(e=Object(tr.a)(r.routes,t.route.location.pathname))&&null!=(e=e[0])&&null!=(e=e.route)?e.path:e;return Object(ie.c)(a)||"ACCOUNT"}render(){const e=this.getActiveRouteName(),t=this.getNavSections();return a.createElement("div",{className:"account"},a.createElement(Jt.a,{showSearchBar:!0}),a.createElement("div",{className:"account__columns"},a.createElement("div",{className:"account__column account__nav"},a.createElement(Zt,{activeRouteName:e,navSections:t})),a.createElement("div",{className:"account__column account__page"},Object(tr.b)(this.props.route.routes))))}}ar(nr,"getPageTitle",()=>Object(l.b)(e=>e.account.fallbackPageTitle)),ar(nr,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,authStore:L.a.instanceOf(fe.a).isRequired,router:L.a.object.isRequired,weblabStore:L.a.instanceOf(er.b).isRequired,correctionsStore:L.a.instanceOf(bt.a).isRequired});function or(){return(or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}class ir extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"onInputFilter",e=>{const{value:t}=e.currentTarget;this.setState({filterText:t}),this.props.onChange(t)}),this.state={filterText:""}}render(){const{filterText:e}=this.state;return a.createElement("div",{className:"author-remove-papers__filter"},a.createElement("input",or({id:"remove-filter-input",className:"legacy__input author-remove-papers__filter__input",type:"text",value:e,placeholder:Object(l.b)(e=>e.authorRemovePapers.filterLabel)},Object(u.a)({id:"author_remove_paper_filter"}),{onChange:this.onInputFilter})),a.createElement(U.a,{icon:"filter"}))}}function sr(){if(!Object(we.a)())return;const e=window.document.getElementById("remove-filter-input");e&&(e.value="",e.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),e.focus())}class cr extends a.PureComponent{getClearFilterButton(){return a.createElement("div",{className:"author-remove-papers__blank-state__clear-filter"},a.createElement("button",{className:"author-remove-papers__blank-state__clear-filter-button button button--secondary",onClick:sr},Object(l.b)(e=>e.authorRemovePapers.clearFilter)))}render(){const{hasAuthorPapers:e,filterText:t}=this.props,r=e?Object(l.b)(e=>e.authorRemovePapers.blankFilterLabel,t):Object(l.b)(e=>e.authorRemovePapers.blankPaperLabel);return a.createElement("div",{className:"author-remove-papers__blank-state"},a.createElement("div",{className:"author-remove-papers__blank-state__content"},a.createElement(U.a,{className:"author-remove-papers__blank-state__icon",icon:"paper-question-mark",width:"60",height:"77.5"}),a.createElement("div",{className:"author-remove-papers__blank-state__description"},r),e&&this.getClearFilterButton()))}}function lr(){return(lr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function hr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class dr extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),hr(this,"onClickRemove",e=>{e.preventDefault();const{authorCorrectionsStore:t}=this.context,{paperLite:r,viewerAuthorId:a}=this.props;t.enqueueRemovePaperCorrection({paperId:r.id,position:pr(a,r)})}),hr(this,"onClickUndo",e=>{e.preventDefault();const{authorCorrectionsStore:t}=this.context,{paperLite:r}=this.props;t.cancelPendingCorrectionByPaperId(r.id)}),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(r),!0).forEach((function(t){hr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ur(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromAuthorCorrectionsStore()),this.context.authorCorrectionsStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorCorrectionsStore())})}getStateFromAuthorCorrectionsStore(){const{authorCorrectionsStore:e}=this.context,{paperLite:t}=this.props;return{hasPendingRemove:e.getPendingCorrectionTypeForPaperId(t.id)===_e.a.RemoveAuthorship}}render(){const{paperLite:e,viewerAuthorId:t}=this.props,{hasPendingRemove:r}=this.state,n=function(e){let{venue:t,year:r}=e;if(t&&r)return Object(l.b)(e=>e.authorRemovePapers.publisher.bothYearAndVenue,r,t);if(r)return Object(l.b)(e=>e.authorRemovePapers.publisher.onlyYear,r);if(t)return Object(l.b)(e=>e.authorRemovePapers.publisher.onlyVenue,t);return null}({year:e.year,venue:e.venue}),o=function(e,t){return"number"==typeof pr(e,t)}(t,e);return a.createElement("div",{className:N()({"author-remove-papers__paper":!0,"author-remove-papers__paper__has-pending-remove":r,"author-remove-papers__paper__locked":!o})},!o&&a.createElement("div",{className:"author-remove-papers__paper__status-message"},Object(l.b)(e=>e.authorRemovePapers.error.correctionPending)),a.createElement("div",{className:"author-remove-papers__paper__controls-left"},a.createElement("div",lr({role:"button",className:"author-remove-papers__paper__remove-button"},Object(u.a)({id:"author_remove_paper_remove"}),{onClick:o?this.onClickRemove:null}),a.createElement(U.a,{icon:"circle-plus"}))),a.createElement("div",{className:"author-remove-papers__paper__details"},a.createElement("div",{className:"author-remove-papers__paper__title"},e.title),a.createElement("div",{className:"author-remove-papers__paper__authors"},e.authors.map(e=>e.alias.name).join(", ")),n&&a.createElement("div",{className:"author-remove-papers__paper__publisher"},n)),a.createElement("div",{className:"author-remove-papers__paper__controls-right"},a.createElement("div",lr({role:"button",className:"author-remove-papers__paper__undo-button"},Object(u.a)({id:"author_remove_paper_undo"}),{onClick:this.onClickUndo}),Object(l.b)(e=>e.authorRemovePapers.undoLabel))))}}function pr(e,t){const r=e.toString(),a=t.authors.findIndex(e=>e.alias.ids.includes(r));return a>=0?a:null}function mr(e){let{numPapers:t,onRemoveAll:r}=e;return a.createElement("div",{className:"author-remove-papers__results-header"},a.createElement("div",{className:"author-remove-papers__results-header__left"},Object(l.a)(e=>e.authorRemovePapers.numResults,t)),a.createElement("div",{className:"author-remove-papers__results-header__right"},a.createElement("button",{className:"author-remove-papers__results-header__link-button",onClick:r,disabled:0===t,type:"button"},Object(l.b)(e=>e.authorRemovePapers.removeAllLabel))))}function br(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}hr(dr,"contextTypes",{authorCorrectionsStore:L.a.instanceOf(A.a).isRequired});class gr extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),br(this,"onRemoveAll",()=>{const{authorId:e}=this.props,{authorPapers:t,filteredPaperIds:r}=this.state,a=this.context.authorCorrectionsStore;(r?t.filter(e=>r.has(e.id)):t).forEach(t=>{const r=t.authors.findIndex(t=>t.alias.ids.includes(e.toString()));k()(r>=0,"viewing author is not in paper's list of authors"),a.enqueueRemovePaperCorrection({paperId:t.id,position:r})})}),this.state={isLoading:!1,isInitialLoad:!0,errorMessage:null,authorPapers:G.List(),filteredPaperIds:null,filterText:""},this.onChangeFilterThrottled=Object(re.a)(this.onChangeFilter.bind(this),1e3,{leading:!0,trailing:!0})}componentDidMount(){this.fetchAuthorPapers().catch(e=>this.onApiError(e))}onApiError(e){g.a.error("Api Error",e),this.setState({errorMessage:Object(l.b)(e=>e.authorRemovePapers.error.apiQueryFailed),isLoading:!1,isInitialLoad:!1})}onChangeFilter(e){this.setState({filterText:e},()=>{this.filterAuthorPapers().catch(e=>this.onApiError(e))})}async fetchAuthorPapers(){var e,t;await Object(ae.c)(this,{isLoading:!0});const{authorId:r}=this.props,{api:a}=this.context,n=await a.fetchPapersWithCorrectionsAppliedForAuthor({authorId:r,model:"PaperLite"});await Object(ae.c)(this,{isLoading:!1,isInitialLoad:!1});const o=null!=(t=n)&&null!=(t=t.resultData)?t.authorId:t;k()(r===o,"browser and server author IDs do not match");const i=G.List((null!=(e=n)&&null!=(e=e.resultData)?e.paperLites:e)||[]).map(be.a.fromJs);await Object(ae.c)(this,{authorPapers:i})}async filterAuthorPapers(){var e,t;const{filterText:r}=this.state;if(!r)return Object(ae.c)(this,{filteredPaperIds:null});const{authorId:a}=this.props,{api:n}=this.context;await Object(ae.c)(this,{isLoading:!0,isInitialLoad:!0});const o=await n.fetchPapersWithCorrectionsAppliedForAuthor({authorId:a,model:"PaperId",filterText:r});await Object(ae.c)(this,{isLoading:!1,isInitialLoad:!1});const i=null!=(t=o)&&null!=(t=t.resultData)?t.authorId:t;if(k()(a===i,"browser and server author IDs do not match"),r!==this.state.filterText)return void g.a.info("Dropping old filter data",{queryFilterText:r,currentFilterText:this.state.filterText});const s=G.Set(((null!=(e=o)&&null!=(e=e.resultData)?e.paperIds:e)||[]).map(e=>e.id));await Object(ae.c)(this,{filteredPaperIds:s})}render(){const{authorId:e}=this.props,{isLoading:t,isInitialLoad:r,authorPapers:n,filteredPaperIds:o,filterText:i}=this.state,s=o?n.filter(e=>o.has(e.id)):n;return a.createElement("div",{className:N()({"author-remove-papers":!0,"author-remove-papers__is-empty":n.isEmpty(),"author-remove-papers__is-loading":t})},a.createElement("div",{className:"author-remove-papers__controls"},a.createElement(mr,{numPapers:s.size,onRemoveAll:this.onRemoveAll}),a.createElement(ir,{onChange:this.onChangeFilterThrottled})),s.isEmpty()&&!r&&a.createElement(cr,{hasAuthorPapers:!n.isEmpty(),filterText:i}),a.createElement("div",{className:N()({"author-remove-papers__papers":!0,"author-remove-papers__papers-loading":t})},t&&a.createElement(me.a,null),!t&&s.map(t=>a.createElement(dr,{key:t.id,paperLite:t,viewerAuthorId:e}))))}}function fr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function _r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}br(gr,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,authorCorrectionsStore:L.a.instanceOf(A.a).isRequired});class yr extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),_r(this,"handleReset",()=>{this.context.authorCorrectionsStore.clearPendingCorrections(_e.a.RemoveAuthorship)}),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(r),!0).forEach((function(t){_r(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromAuthorCorrectionsStore(),{},this.getStateFromAuthorStore()),this.context.authorCorrectionsStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorCorrectionsStore())}),this.context.authorStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorStore())})}getStateFromAuthorCorrectionsStore(){const e=this.context.authorCorrectionsStore;return{stagedPapersCount:e.getPendingCorrections().filter(e=>e.correctionType===_e.a.RemoveAuthorship).size,isModeratorCorrecting:e.isModeratorCorrecting()}}getStateFromAuthorStore(){var e;const{authorStore:t}=this.context;return{authorName:null!=(e=t)&&null!=(e=e.author)?e.name:e}}render(){const{stagedPapersCount:e,isModeratorCorrecting:t,authorName:r}=this.state;if(!e)return null;const n=t?Object(l.a)(e=>e.moderatorCorrections.removePapers.status,e,r):Object(l.a)(e=>e.authorRemovePapers.stagedRemoveCorrections,e);return a.createElement("div",{className:"author-remove-papers-papers-count"},a.createElement(je.a,{content:n}),a.createElement("span",{className:"middot"},""),a.createElement("button",{className:"author-remove-papers-papers-count__link-button",onClick:this.handleReset},Object(l.b)(e=>e.authorRemovePapers.resetStagedLabel)))}}function Er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Or(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}_r(yr,"contextTypes",{authorCorrectionsStore:L.a.instanceOf(A.a).isRequired,authorStore:L.a.instanceOf(T.a).isRequired});class Sr extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),Or(this,"onSubmitForm",e=>{e.preventDefault(),this.attemptSubmit()}),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(r),!0).forEach((function(t){Or(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Er(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isSending:!1,errorMessage:null,successMessage:null},this.getStateFromAuthStore(),{},this.getStateFromAuthorCorrectionsStore(),{},this.getStateFromAuthorStore()),this.context.authStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthStore())}),this.context.authorCorrectionsStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorCorrectionsStore())}),this.context.authorStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorStore())}),this.state.authorId=this.state.isModeratorCorrecting?this.state.moderatorCorrectionsAuthorId:this.state.authorId}getStateFromAuthStore(){const{authStore:e}=this.context;return{authorId:e.getClaimedAuthorId()}}getStateFromAuthorCorrectionsStore(){const e=this.context.authorCorrectionsStore;return{isFormDirty:e.hasPendingCorrections()||e.hasDraftPapers(),pendingCorrections:e.getPendingCorrections().filter(e=>e.correctionType===_e.a.RemoveAuthorship),isModeratorCorrecting:e.isModeratorCorrecting(),moderatorCorrectionsAuthorId:e.getModeratorCorrectionsAuthorId()}}getStateFromAuthorStore(){var e;const{authorStore:t}=this.context;return{authorName:null!=(e=t)&&null!=(e=e.author)?e.name:e}}async attemptSubmit(){const{authorId:e,pendingCorrections:t,isModeratorCorrecting:r}=this.state,{api:a,authorCorrectionsStore:n}=this.context;await Object(ae.c)(this,{isSending:!0,errorMessage:null,successMessage:null});try{await a.submitPaperAuthorCorrections({authorId:e,corrections:t.toJS()}),await n.clearPendingCorrections();const o=this.context.router,i=r?"AUTHOR_CORRECTIONS_TOOL_STATUS":"ACCOUNT_CORRECTIONS";o.history.push(Object(ie.d)({routeName:i}))}catch(e){g.a.error("Failed to submit paper changes",e),this.setState({isSending:!1,errorMessage:Object(l.b)(e=>e.authorRemovePapers.error.apiSubmitFailed),successMessage:null})}}renderMessage(){const{errorMessage:e,successMessage:t}=this.state;return e?a.createElement("div",{className:"account__error-msg"},e):t?a.createElement("div",{className:"account__success-msg"},t):null}render(){const{authorId:e,isSending:t,isFormDirty:r,isModeratorCorrecting:n,authorName:u}=this.state,h=n?Object(l.b)(e=>e.moderatorCorrections.removePapers.pageHeading,u):Object(l.b)(e=>e.account.page.removePapers.pageHeading),d=n?Object(l.b)(e=>e.moderatorCorrections.removePapers.pageDescription):Object(l.b)(e=>e.account.page.removePapers.pageDescription);return a.createElement("div",{className:"account-remove-papers"},a.createElement("div",{className:"account-remove-papers__headline"},h),a.createElement("div",{className:"account-remove-papers__description"},d),a.createElement("hr",{className:"account__divider"}),e&&a.createElement(gr,{key:e,authorId:e}),a.createElement(o,null,a.createElement(i,null,a.createElement(yr,null)),a.createElement(c,null,this.renderMessage()),a.createElement(s,null,t&&a.createElement(U.a,{className:"account__loading",icon:"gear"}),a.createElement("button",{className:"account-remove-papers__submit-button button button--primary",onClick:this.onSubmitForm},Object(l.b)(e=>e.account.button.submit)))),a.createElement(Ce,{when:r,message:Object(l.b)(e=>e.authorRemovePapers.error.dirtyForm)}))}}Or(Sr,"getPageTitle",()=>Object(l.b)(e=>e.account.page.removePapers.pageTitle)),Or(Sr,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,authStore:L.a.instanceOf(fe.a).isRequired,authorCorrectionsStore:L.a.instanceOf(A.a).isRequired,authorStore:L.a.instanceOf(T.a).isRequired,router:L.a.object.isRequired});var vr=r(881);class Cr extends a.PureComponent{render(){const{navItems:e,activeRouteName:t}=this.props;return a.createElement("nav",{className:"admin-nav"},a.createElement("ul",{className:"admin-nav__list"},e.map((e,r)=>{let{routeName:n,label:o}=e;const i=n===t;return a.createElement("li",{key:r,className:N()({"admin-nav__item":!0,"admin-nav__is-active":i})},a.createElement(Te.a,{to:n},o))})))}}function wr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Pr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Nr extends a.PureComponent{componentDidMount(){const{history:e}=this.props;if("ADMIN"===Object(ie.c)(e.location.pathname)){const t=new st.a(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(r),!0).forEach((function(t){Pr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.pickRedirectRoute(),{replace:!0,status:302}));Object(it.a)({redirect:t,history:e})}}pickRedirectRoute(){return{routeName:"ADMIN_EXPERIMENTS"}}getActiveRouteName(){var e;const{router:t}=this.context,{route:r}=this.props,a=null!=(e=Object(tr.a)(r.routes,t.route.location.pathname))&&null!=(e=e[0])&&null!=(e=e.route)?e.path:e;return Object(ie.c)(a)||"ADMIN_EXPERIMENTS"}getNavItems(){return[{routeName:"ADMIN_EXPERIMENTS",label:Object(l.b)(e=>e.admin.nav.experimentsLabel)},{routeName:"ADMIN_FEATURE_FLAGS",label:Object(l.b)(e=>e.admin.nav.featureFlagsLabel)}]}render(){const{route:e}=this.props,t=this.getNavItems(),r=this.getActiveRouteName();return a.createElement("div",null,a.createElement(Jt.a,{showSearchBar:!0,isAdminPage:!0}),a.createElement("div",{className:"admin",role:"main"},a.createElement("h2",{className:"admin__header"},Object(l.b)(e=>e.admin.headerLabel)),a.createElement(Cr,{navItems:t,activeRouteName:r}),a.createElement("div",{className:"admin__sub-page"},Object(tr.b)(e.routes))))}}function xr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Pr(Nr,"contextTypes",{router:L.a.object.isRequired}),Pr(Nr,"getPageTitle",()=>Object(l.b)(e=>e.moderation.pageTitle)),Pr(Nr,"requiresAuthentication",()=>!0);class Rr extends a.PureComponent{constructor(){super(...arguments),xr(this,"onChangePercentage",e=>{const{onChange:t,name:r}=this.props;if(t){t(r,parseFloat(e.currentTarget.value)/100)}}),xr(this,"onChangeValue",e=>{const{onChange:t,name:r}=this.props;if(t){t(r,parseFloat(e.currentTarget.value))}})}render(){const{min:e,max:t,step:r,value:n,name:o,showPercentage:i,showValue:s,isDisabled:c}=this.props;return a.createElement("div",{className:"admin__ratio-slider"},a.createElement("input",{className:"legacy__input admin__ratio-slider__range",type:"range",name:o+"__range",min:e,max:t,step:r,value:n,onChange:this.onChangeValue,disabled:c}),i&&a.createElement("input",{className:"legacy__input admin__ratio-slider__input admin__ratio-slider__percentage",type:"text",name:o+"__value",min:e,max:t,value:(100*n|0)+"%",onChange:this.onChangePercentage,disabled:c}),s&&a.createElement("input",{className:"legacy__input admin__ratio-slider__input admin__ratio-slider__value",type:"text",name:o+"__value",min:e,max:t,value:n,onChange:this.onChangeValue,disabled:c}))}}xr(Rr,"defaultProps",{max:1,min:0,showPercentage:!0,showValue:!1,step:.01,isDisabled:!1});var jr=r(202);function Tr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ar extends a.PureComponent{constructor(){super(...arguments),Tr(this,"onChangeVariationRatio",(e,t)=>{const{experiment:r,onChange:a}=this.props;a(r.KEY,t.KEY,parseFloat(e.currentTarget.value)/100)})}getVariationRatio(e){const{experiment:t,variationRatios:r}=this.props,a=r.get(t.KEY);return a?parseFloat(a.get(e)):0}render(){const{experiment:e,isDisabled:t}=this.props;return a.createElement(a.Fragment,null,a.createElement("span",{className:"admin__experiment__details__label"},Object(l.b)(e=>e.admin.experiments.variationsLabel)),a.createElement("ul",null,e.variations.map(r=>a.createElement("li",{key:r.KEY},r.KEY===e.defaultVariation?r.KEY+"*":r.KEY,a.createElement("input",{type:"text",value:(100*this.getVariationRatio(r.KEY)|0)+"%",onChange:e=>this.onChangeVariationRatio(e,r),className:"legacy__input admin__variation-input",disabled:t})))))}}Tr(Ar,"contextTypes",{experimentsStore:L.a.instanceOf(jr.a).isRequired}),Tr(Ar,"defaultProps",{isDisabled:!1});var Ir=r(16),Fr=r(106),kr=(r(452),r(57)),Dr=r(31),Lr=r(107),qr=r(109);function Mr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Hr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class zr extends a.PureComponent{constructor(e,t){super(e,t),Hr(this,"onChangeRatio",(e,t)=>{const{ratios:r}=this.state;r.set(e,t),this.setState({ratios:new Map(r)})}),Hr(this,"clearErrors",()=>{this.setState({errors:new Map})}),Hr(this,"onChangeVariationRatio",(e,t,r)=>{const a=this.state.variationRatios,n=a.get(e);n?n.set(t,r):a.set(e,new Map([[t,r]])),this.setState({variationRatios:new Map(a)})}),Hr(this,"onSubmitUpdate",async e=>{const{ratios:t,experimentStates:r,errors:a}=this.state,n=this.context.api,o=r.get(e.KEY),i=Vr(r.get(e.KEY)),s=this.generateVariationRatios(e.KEY,e.variations);if(this.validateSubmission(s.sum,e,i),0===a.size){var c;const r=t.get(e.KEY)||(null!=(c=o)?c.trafficRatio:c)||0,i={key:e.KEY,variations:s.ratios,trafficRatio:r,status:r>0?kr.d:kr.c,salt:e.KEY};try{await n.setExperimentState(i),await n.getExperiments()}catch(t){this.setState({errors:a.set(e.KEY,Object(l.b)(e=>e.admin.errors.apiError))})}}}),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(r),!0).forEach((function(t){Hr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({errors:new Map},this.getStateFromExperimentsStore()),this.context.experimentsStore.registerComponent(this,()=>{this.setState(this.getStateFromExperimentsStore())})}getStateFromExperimentsStore(){const e=this.context.experimentsStore,t=e.getExperimentStates()?new Map(Object.entries(e.getExperimentStates())):new Map,r=new Map,a=new Map;return t.forEach((e,t)=>{const n=e.trafficRatio;r.set(t,n);const o=new Map;e.variations.forEach(e=>{o.set(e.key,e.ratio)}),a.set(e.key,o)}),{experimentStates:t,ratios:r,variationRatios:a}}static willRouteTo(e){let{api:t}=e;return t.getExperiments()}terminateExperiment(e){this.clearErrors(),this.context.dispatcher.dispatch(Object(Lr.b)({id:Dr.b.TERMINATE_EXPERIMENT,data:e}))}validateSubmission(e,t,r){const{errors:a}=this.state;switch(this.clearErrors(),Math.abs(e-1)>Number.EPSILON&&(a.set(t.KEY,Object(l.b)(e=>e.admin.errors.validVariationRatios)),this.setState({errors:new Map(a)})),r){case kr.d:a.set(t.KEY,Object(l.b)(e=>e.admin.errors.alreadyRunning)),this.setState({errors:new Map(a)});break;case kr.a:a.set(t.KEY,Object(l.b)(e=>e.admin.errors.finishedExperiment)),this.setState({errors:new Map(a)})}}generateVariationRatios(e,t){const r=this.state.variationRatios.get(e),a=[];let n=0;return t.forEach(e=>{const t=r?r.get(e.KEY):0;a.push({key:e.KEY,ratio:t||0}),n+=t||0}),{ratios:a,sum:n}}render(){const{ratios:e,experimentStates:t,variationRatios:r,errors:n}=this.state,{envInfo:{hostname:o}}=this.context;return a.createElement("div",{className:"admin__experiments"},a.createElement("ul",{className:"admin__experiments__experiment-list"},Object(Ir.e)(Ir.b).map(i=>a.createElement("li",{key:i.KEY,className:"admin__experiments__experiment"},a.createElement(Ur,{error:n.get(i.KEY),hostname:o,experiment:i,onChangeRatio:this.onChangeRatio,onSubmitUpdate:this.onSubmitUpdate,experimentStoreModel:t.get(i.KEY),onClickTerminate:()=>this.terminateExperiment(i),ratio:e.get(i.KEY)||0,variationRatios:r,onChangeVariationRatio:this.onChangeVariationRatio})))))}}function Ur(e){let{error:t,experiment:r,hostname:n,ratio:o,onChangeRatio:i,onSubmitUpdate:s,onClickTerminate:c,variationRatios:u,onChangeVariationRatio:h,experimentStoreModel:d}=e;const p=Object(we.c)(n),m=Object(we.d)(n),b=!p&&!m,g=Vr(d),f=function(e){var t;const r=(e&&(null!=(t=e)?t.variations:t)||[]).find(e=>1==e.ratio)||null;return r?r.key:null}(d),_=g===kr.a,y=g===kr.d,E=g===kr.c;return a.createElement("div",{className:N()("admin__experiment",{"admin__experiment__finished ":_})},a.createElement("div",{className:"admin__experiment__details"},a.createElement("div",{className:"admin__experiment__details__row admin__experiment__key"},r.KEY),r.description?a.createElement("div",{className:"admin__experiment__details__row admin__experiment__desc"},r.description):a.createElement("div",{className:"admin__experiment__details__row admin__experiment__desc admin__experiment__desc--not-set"},Object(l.b)(e=>e.admin.experiments.descNotSetLabel)),a.createElement("div",{className:"admin__experiment__details__row admin__experiment__variations"},a.createElement(Ar,{experiment:r,max:100,min:0,variationRatios:u,onChange:h,isDisabled:y||_})),a.createElement("div",{className:"admin__experiment__details__row admin__experiment__status"},a.createElement("span",{className:"admin__experiment__details__label"},Object(l.b)(e=>e.admin.experiments.statusLabel)),a.createElement("span",{className:N()("admin__experiment__details__value",{"admin-experiment__status-running":g===kr.d,"admin-experiment__status-pending":g===kr.c,"admin-experiment__status-finished":g===kr.a})},g),_&&f&&a.createElement("div",{className:"admin__experiment__details__row admin__experiment__default"},a.createElement("span",{className:"admin__experiment__details__label"},Object(l.b)(e=>e.admin.experiments.defaultVariationLabel)),a.createElement("span",{className:"admin__experiment__details__default__value"},f))),r.path&&a.createElement("div",{className:"admin__experiment__details__row admin__experiment__path"},a.createElement("span",{className:"admin__experiment__details__label"},Object(l.b)(e=>e.admin.experiments.pathLabel)),a.createElement("span",{className:"admin__experiment__details__value"},r.path)),r.manualExposure&&a.createElement("div",{className:"admin__experiment__details__row admin__experiment__manual-exposure"},a.createElement("span",{className:"admin__experiment__details__label"},Object(l.b)(e=>e.admin.experiments.manuallyExposedLabel)),a.createElement("span",{className:"admin__experiment__details__value"},r.manualExposure.toString()))),a.createElement("div",{className:"admin__experiment__inputs"},p&&a.createElement("div",{className:"admin__experiment__slider"},a.createElement("div",{className:"admin__experiment__slider__label"},Object(l.b)(e=>e.admin.experiments.localLabel)),a.createElement(Rr,{name:"".concat(r.KEY),value:o,onChange:i,showPercentage:!0,isDisabled:_}),a.createElement("button",{className:"admin__experiment__update button button--secondary",disabled:_,onClick:()=>s(r)},Object(l.b)(e=>e.admin.updateButton))),b&&a.createElement("div",{className:"admin__experiment__slider"},a.createElement("div",{className:"admin__experiment__slider__label"},Object(l.b)(e=>e.admin.experiments.devLabel)),a.createElement(Rr,{name:"".concat(r.KEY),value:o,onChange:i,showPercentage:!0,isDisabled:_}),a.createElement("button",{className:"admin__experiment__update button button--secondary",disabled:_,onClick:()=>s(r)},Object(l.b)(e=>e.admin.updateButton))),m&&a.createElement("div",{className:"admin__experiment__slider"},a.createElement("div",{className:"admin__experiment__slider__label"},Object(l.b)(e=>e.admin.experiments.prodLabel)),a.createElement(Rr,{name:"".concat(r.KEY),value:o,onChange:i,showPercentage:!0,isDisabled:_}),a.createElement("button",{className:"admin__experiment__update button button--secondary",disabled:_,onClick:()=>s(r)},Object(l.b)(e=>e.admin.updateButton))),a.createElement("button",{className:"button button--primary admin__experiment__terminate-button",disabled:_||E,onClick:c},Object(l.b)(e=>e.admin.experiments.terminateButtonLabel)),t&&a.createElement("span",{className:"admin__experiment__update__error"},t)))}function Vr(e){var t;return(null!=(t=e)&&null!=(t=t.status)?t.value:t)||kr.b}Hr(zr,"contextTypes",{dispatcher:L.a.instanceOf(qr.Dispatcher).isRequired,experimentsStore:L.a.instanceOf(jr.a).isRequired,envInfo:L.a.instanceOf(Fr.a).isRequired,api:L.a.instanceOf(ne.a).isRequired});var Br=r(216);r(453);function Yr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Kr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Wr extends a.PureComponent{static willRouteTo(e){let{api:t}=e;return t.getFeatureFlags()}constructor(e,t){super(e,t),Kr(this,"onChangeRatio",(e,t)=>{const{ratios:r}=this.state;r.set(e,t),this.setState({ratios:new Map(r)})}),Kr(this,"onSubmitUpdate",async e=>{var t;const{ratios:r,featureFlags:a,errors:n}=this.state,o=this.context.api;this.setState({errors:new Map});const i=a.get(e.KEY),s=r.get(e.KEY),c=s||0===s?s:(null!=(t=i)?t.trafficRatio:t)||0;if(0===n.size){const t={key:e.KEY,trafficRatio:c,salt:e.KEY};try{await o.setFeatureFlagState(t),await o.getFeatureFlags()}catch(t){this.setState({errors:n.set(e.KEY,Object(l.b)(e=>e.admin.errors.apiError))})}}}),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yr(Object(r),!0).forEach((function(t){Kr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({errors:new Map},this.getStateFromFeatureFlagStore()),this.context.featureFlagStore.registerComponent(this,()=>{this.setState(this.getStateFromFeatureFlagStore())})}getStateFromFeatureFlagStore(){const e=this.context.featureFlagStore,t=e.getFeatureFlags()?new Map(Object.entries(e.getFeatureFlags())):new Map,r=new Map;return t.forEach((e,t)=>{const a=e.trafficRatio||0;r.set(t,a)}),{featureFlags:t,ratios:r}}render(){const{ratios:e,errors:t}=this.state,{envInfo:{hostname:r}}=this.context;return a.createElement("div",{className:"admin__features"},a.createElement("ul",{className:"admin__features__feature-flag-list"},Object(Dt.c)(Dt.b).map(n=>a.createElement("li",{key:n.KEY,className:"admin__features__feature-flag"},a.createElement(Qr,{feature:n,onChangeRatio:this.onChangeRatio,ratio:e.get(n.KEY)||0,hostname:r,onSubmitUpdate:this.onSubmitUpdate,error:t.get(n.KEY)})))))}}function Qr(e){let{hostname:t,feature:r,onChangeRatio:n,ratio:o,onSubmitUpdate:i,error:s}=e;const c=Object(we.c)(t),u=Object(we.d)(t),h=!c&&!u;return a.createElement("div",{className:"admin__feature-flag"},a.createElement("div",{className:"admin__feature-flag__details"},a.createElement("div",{className:"admin__feature-flag__details__row admin__feature-flag__key"},r.KEY),r.description?a.createElement("div",{className:"admin__feature-flag__details__row admin__feature-flag__desc"},r.description):a.createElement("div",{className:"admin__feature-flag__details__row admin__feature-flag__desc admin__feature-flag__desc--not-set"},Object(l.b)(e=>e.admin.featureFlags.descNotSetLabel)),a.createElement("div",{className:"admin__feature-flag__details__row admin__feature-flag__fallback"},a.createElement("span",{className:"admin__feature-flag__details__label"},Object(l.b)(e=>e.admin.featureFlags.fallbackLabel)),a.createElement("span",{className:"admin__feature-flag__details__value"},Object(l.b)(e=>e.admin.featureFlags.fallbackState[r.fallbackState])))),a.createElement("div",{className:"admin__feature-flag__inputs"},c&&a.createElement("div",{className:"admin__feature-flag__slider"},a.createElement("div",{className:"admin__feature-flag__slider__label"},Object(l.b)(e=>e.admin.featureFlags.localLabel)),a.createElement(Rr,{name:r.KEY,value:o,onChange:n,showPercentage:!0}),a.createElement("button",{className:"admin__experiment__update button button--secondary",onClick:()=>i(r)},Object(l.b)(e=>e.admin.updateButton))),h&&a.createElement("div",{className:"admin__feature-flag__slider"},a.createElement("div",{className:"admin__feature-flag__slider__label"},Object(l.b)(e=>e.admin.featureFlags.devLabel)),a.createElement(Rr,{name:r.KEY,value:o,onChange:n,showPercentage:!0}),a.createElement("button",{className:"admin__feature-flag__update button button--secondary",onClick:()=>i(r)},Object(l.b)(e=>e.admin.updateButton))),u&&a.createElement("div",{className:"admin__feature-flag__slider"},a.createElement("div",{className:"admin__feature-flag__slider__label"},Object(l.b)(e=>e.admin.featureFlags.prodLabel)),a.createElement(Rr,{name:r.KEY,value:o,onChange:n,showPercentage:!0}),a.createElement("button",{className:"admin__feature-flag__update button button--secondary",onClick:()=>i(r)},Object(l.b)(e=>e.admin.updateButton)),s&&a.createElement("span",{className:"admin__feature-flag__update__error"},s))))}Kr(Wr,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,envInfo:L.a.instanceOf(Fr.a).isRequired,featureFlagStore:L.a.instanceOf(Br.a).isRequired,router:L.a.object.isRequired});var Gr=r(111);function Xr(){return(Xr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}const Jr=e=>{let{queryType:t,queryValue:r,displayValue:n}=e;const o=function(e,t){switch(e){case Gr.c.SEARCH_RESULTS:return{to:"SEARCH",query:{q:t,sort:"relevance"}};case Gr.c.AUTHOR_PAPER:case Gr.c.AUTHOR_CITATION:return{to:"AUTHOR_PROFILE_BY_ID",params:{authorId:t}};case Gr.c.PAPER_CITATION:return{to:"PAPER_DETAIL_BY_ID",params:{paperId:t}};case Gr.c.ENTITY_PAPER:return{to:"ENTITY_BY_ID",params:{entityId:t}};default:return null}}(t,r);return a.createElement(Te.a,Xr({className:"truncate-line"},o),n)};Jr.propTypes={queryType:L.a.string.isRequired,queryValue:L.a.string.isRequired,displayValue:L.a.string.isRequired};var Zr=Jr;r(76);function $r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ea extends a.PureComponent{constructor(){super(...arguments),$r(this,"onToggle",()=>{const{id:e,isActive:t}=this.props.alert,r=t?Gr.e.DISABLED:Gr.e.ACTIVE,{TOGGLE_SUCCESS:a,TOGGLE_FAILURE:n}=kt.a.UserAlerts;this.context.api.updateAlert({alertId:e,status:r}).then(()=>Object(Ht.a)(qt.a.create(a,{alertId:e,alertStatus:r}))).catch(t=>{let{status:a,error:o}=t;Object(Ht.a)(qt.a.create(n,{alertId:e,alertStatus:r,error:o,status:a}))})}),$r(this,"onDelete",()=>{this.context.dispatcher.dispatch(Object(Lr.b)({id:Dr.b.DELETE_ALERT,data:this.props.alert}))})}render(){const{isActive:e,displayValue:t,queryType:r,queryValue:n}=this.props.alert,o=N()("alert","flex-row-vcenter",{"is-disabled":!e}),i=Object(l.b)(e=>e.alerts.queryType[r].description);return a.createElement("li",{className:o},a.createElement(Ft.a,{className:"alert__toggle",selected:e,onClick:this.onToggle}),a.createElement(Zr,{queryType:r,queryValue:n,displayValue:t}),a.createElement("span",{className:"alert__description flex-static"},i),a.createElement(U.a,{icon:"x",width:"15",height:"15",className:"alert__delete-button flex-static mod-clickable",onClick:this.onDelete}))}}$r(ea,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,dispatcher:L.a.instanceOf(qr.Dispatcher).isRequired});var ta=r(135),ra=r(725);function aa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const na=["daily","weekly"];class oa extends a.PureComponent{constructor(){super(...arguments),aa(this,"getStateFromAuthStore",()=>{const{authStore:e}=this.context;return{frequency:e.getAlertFrequency()}}),this.state=this.getStateFromAuthStore(),this.context.authStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthStore)})}onFrequencySelected(e){const{api:t}=this.context,{frequency:r}=this.state,{SET_FREQUENCY:a}=kt.a.UserAlerts;e!==r&&(t.updateAlertFrequency({alertFrequency:e}),Object(Ht.a)(ra.a.create(a,{frequency:e})))}renderFrequency(e){const t=ta.a[e];return a.createElement("a",{key:e,className:N()("frequency-button",{selected:this.state.frequency===t}),"data-selenium-selector":this.state.frequency===t?"frequency-button-selected":"frequency-button","data-selenium-frequency":e,onClick:()=>this.onFrequencySelected(t)},Object(l.b)(t=>t.alerts.frequency.frequencies[e]))}render(){return a.createElement("div",{className:"alert-frequency"},a.createElement("h4",null,Object(l.b)(e=>e.alerts.frequency.title)),a.createElement("div",{className:"alert-frequency__subtitle"},Object(l.b)(e=>e.alerts.frequency.subtitle)),a.createElement("div",null,na.map(this.renderFrequency.bind(this))))}}aa(oa,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,authStore:L.a.instanceOf(fe.a).isRequired});var ia=r(153);function sa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ca extends a.PureComponent{constructor(){super(...arguments),sa(this,"getStateFromAlertsStore",()=>{const{alertsStore:e}=this.context;return{alerts:e.getAlerts().toList().groupBy(e=>e.alertType),isLoading:e.isLoading()}}),sa(this,"renderAlertsList",e=>{const t=this.state.alerts.get(e),r=Object(l.b)(t=>t.alerts.type[e].title);return t?a.createElement("div",{className:"alerts-list",key:e,"data-selenium-selector":"alerts-results","data-count":t.size},a.createElement("h4",null,r),a.createElement("ul",null,t.map(this.renderAlert))):null}),this.state=this.getStateFromAlertsStore(),this.context.alertsStore.registerComponent(this,()=>{this.setState(this.getStateFromAlertsStore)})}renderEmpty(){return a.createElement(a.Fragment,null,a.createElement("h4",{"data-selenium-selector":"alerts-results","data-count":0},Object(l.b)(e=>e.alerts.empty.title)),a.createElement("p",null,Object(l.b)(e=>e.alerts.empty.description)))}renderAlert(e){return a.createElement(ea,{alert:e,key:e.id})}render(){const{isLoading:e,alerts:t}=this.state;return e?a.createElement(me.a,null):t.isEmpty()?this.renderEmpty():a.createElement(a.Fragment,null,a.createElement(oa,null),Gr.a.toList().map(this.renderAlertsList))}}sa(ca,"contextTypes",{alertsStore:L.a.instanceOf(ia.a).isRequired});var la=r(736),ua=r(732),ha=r(733),da=r(13),pa=r(81),ma=r.n(pa),ba=r(61),ga=r.n(ba),fa=r(720),_a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function ya(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ea(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Oa=function(e){return 0===n.a.Children.count(e)},Sa=function(e){function t(){var r,a;ya(this,t);for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=a=Ea(this,e.call.apply(e,[this].concat(o))),a.state={match:a.computeMatch(a.props,a.context.router)},Ea(a,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:_a({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var r=e.computedMatch,a=e.location,n=e.path,o=e.strict,i=e.exact,s=e.sensitive;if(r)return r;k()(t,"You should not use <Route> or withRouter() outside a <Router>");var c=t.route,l=(a||c.location).pathname;return Object(fa.a)(l,{path:n,strict:o,exact:i,sensitive:s},c.match)},t.prototype.componentWillMount=function(){ga()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),ga()(!(this.props.component&&this.props.children&&!Oa(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),ga()(!(this.props.render&&this.props.children&&!Oa(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){ga()(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),ga()(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,r=t.children,a=t.component,o=t.render,i=this.context.router,s=i.history,c=i.route,l=i.staticContext,u={match:e,location:this.props.location||c.location,history:s,staticContext:l};return a?e?n.a.createElement(a,u):null:o?e?o(u):null:"function"==typeof r?r(u):r&&!Oa(r)?n.a.Children.only(r):null},t}(n.a.Component);Sa.propTypes={computedMatch:Ee.a.object,path:Ee.a.string,exact:Ee.a.bool,strict:Ee.a.bool,sensitive:Ee.a.bool,component:Ee.a.func,render:Ee.a.func,children:Ee.a.oneOfType([Ee.a.func,Ee.a.node]),location:Ee.a.object},Sa.contextTypes={router:Ee.a.shape({history:Ee.a.object.isRequired,route:Ee.a.object.isRequired,staticContext:Ee.a.object})},Sa.childContextTypes={router:Ee.a.object.isRequired};var va=Sa,Ca=r(990),wa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var Na=function(e){var t=e.to,r=e.exact,a=e.strict,o=e.location,i=e.activeClassName,s=e.className,c=e.activeStyle,l=e.style,u=e.isActive,h=e["aria-current"],d=function(e,t){var r={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","aria-current"]),p="object"===(void 0===t?"undefined":Pa(t))?t.pathname:t,m=p&&p.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1");return n.a.createElement(va,{path:m,exact:r,strict:a,location:o,children:function(e){var r=e.location,a=e.match,o=!!(u?u(a,r):a);return n.a.createElement(Ca.a,wa({to:t,className:o?[s,i].filter((function(e){return e})).join(" "):s,style:o?wa({},l,c):l,"aria-current":o&&h||null},d))}})};Na.propTypes={to:Ca.a.propTypes.to,exact:ma.a.bool,strict:ma.a.bool,location:ma.a.object,activeClassName:ma.a.string,className:ma.a.string,activeStyle:ma.a.object,style:ma.a.object,isActive:ma.a.func,"aria-current":ma.a.oneOf(["page","step","location","date","time","true"])},Na.defaultProps={activeClassName:"active","aria-current":"page"};var xa=Na;function Ra(){return(Ra=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function ja(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const Ta=e=>{const{children:t,to:r,params:a,query:o,hash:i,exact:s,strict:c}=e,l=ja(e,["children","to","params","query","hash","exact","strict"]),u={pathname:Object(ie.d)({params:a,routeName:r}),search:o?Object(da.a)(o):"",hash:i||""};return n.a.createElement(xa,Ra({to:u,exact:s||!1,strict:c||!1},l),t)};Ta.defaultProps={params:{}};var Aa=Ta;function Ia(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Fa extends a.PureComponent{static async willRouteTo(e){let{alertsStore:t,api:r}=e;return t.isUninitialized()?r.fetchAlerts():Promise.resolve()}render(){return a.createElement("div",{className:"alerts-page"},a.createElement(Jt.a,{showSearchBar:!0}),a.createElement("div",{className:"alerts-page__header bg-light-gray"},a.createElement("h1",{className:"centered-max-width-content"},Object(l.b)(e=>e.alerts.pageHeadline))),a.createElement(ua.a,{className:"content centered-max-width-content",layoutMed:"column",role:"main",id:"main-content"},a.createElement(ha.a,{className:"alerts-page__sidebar flex-static flex-item__left-column"},a.createElement(Aa,{to:"ALERTS",activeClassName:"is-active",exact:!0},a.createElement("span",{className:"flex-justify-start flex-row-vcenter"},a.createElement(U.a,{icon:"fa-bell",width:"20",height:"20"}),Object(l.b)(e=>e.alerts.linkToAlerts))),a.createElement(Aa,{to:"ALERTS_EMAIL",activeClassName:"is-active",exact:!0},a.createElement("span",{className:"flex-justify-start flex-row-vcenter"},a.createElement(U.a,{icon:"email",width:"20",height:"20"}),Object(l.b)(e=>e.alerts.linkToEmail)))),a.createElement(ha.a,{className:"alerts-page__content flex-item__right-column"},Object(tr.b)(this.props.route.routes))),a.createElement(la.a,null))}}Ia(Fa,"requiresAuthentication",()=>!0),Ia(Fa,"getPageTitle",()=>Object(l.b)(e=>e.alerts.pageTitle)),Ia(Fa,"propTypes",{route:L.a.object.isRequired});var ka=r(966),Da=r(971),La=r(920),qa=r(921),Ma=r(729),Ha=r(922),za=r(163),Ua=r(168),Va=r(367),Ba=r(229);function Ya(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ka(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ya(Object(r),!0).forEach((function(t){Wa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ya(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Wa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Qa extends a.PureComponent{constructor(e,t){super(e,t),Wa(this,"onClickFlag",()=>{const{moderationTag:e}=this.state,t=e?null:"Awaiting Response";this.setState({moderationTag:t});const{authorProfile:r}=this.props;this.context.api.setAuthorProfileModerationTag({authorProfileId:r.id,moderationTag:t})}),Wa(this,"onClickInternalNotesSave",()=>{const e=this.state.draftInternalNotes;this.setState({internalNotes:e,draftInternalNotes:e}),this.updateInternalNotes(e)}),Wa(this,"onChangeReason",e=>{const t=Object(Ua.d)(e.currentTarget.value);this.setState({isReasonHighlighted:!1,selectedReason:t})}),Wa(this,"onClickApprove",()=>{const{selectedReason:e}=this.state;e?this.setState({isReasonHighlighted:!0}):(this.setState({selectedStatus:$t.b.Approved}),this.updateModerationStatus($t.b.Approved))}),Wa(this,"onClickDeny",()=>{const{selectedReason:e}=this.state;e&&Ua.a[e]?(this.setState({selectedStatus:$t.b.Denied}),this.updateModerationStatus($t.b.Denied)):this.setState({isReasonHighlighted:!0})}),Wa(this,"onChangeInternalNotes",e=>{const{value:t}=e.currentTarget;this.setState({draftInternalNotes:t})});const{authorProfile:r}=this.props;this.state=Ka({isConfirmVisible:!1,moderationTag:r.moderationTag,isReasonHighlighted:!1,internalNotes:r.internalNotes||"",selectedStatus:r.moderationStatus||null,selectedReason:r.moderationStatusReason||null,draftInternalNotes:r.internalNotes||""},this.getStateFromClaimModerationStore()),this.runRuleChecks(r.id),this.context.claimModerationStore.registerComponent(this,()=>{this.setState(Ka({},this.getStateFromClaimModerationStore()))})}async runRuleChecks(e){const t=this.context.api,r=await t.getModerationRecommendation({authorRowId:e});return r?r.resultData.result:Va.a.InsufficientData}getStateFromClaimModerationStore(){const e=this.context.claimModerationStore;return{claimedAuthor:e.getClaimedAuthor(),claimedPreviously:e.getClaimedPreviousAuthorProfiles(),claimingAppUser:e.getClaimingAppUser(),orcidVerifyResult:e.getOrcidResult()}}async updateModerationStatus(e){const{authorProfile:t}=this.props,{internalNotes:r,selectedReason:a}=this.state,n=this.context.api,o=this.context.authStore.getEmail();k()(o,"User have an email to moderate.");const i=a?Ua.c[a]:null;await n.updateModerationStatus({authorProfileId:t.id,moderationStatus:e,moderator:o,moderatorNotes:"",moderationStatusReason:i,internalNotes:r}),this.props.onRefreshRows()}async updateInternalNotes(e){const{authorProfile:t}=this.props,r=this.context.api;await r.updateInternalNotes({authorProfileId:t.id,internalNotes:e})}renderAuthorName(){var e,t,r;const{authorProfile:n}=this.props,{claimedAuthor:o,claimingAppUser:i}=this.state,s=(null!=(r=n)?r.fullName:r)||a.createElement(Xa,null),c=(null!=(t=o)?t.name:t)||a.createElement(Xa,null),l=(null!=(e=i)?e.fullName:e)||a.createElement(Xa,null);return a.createElement("div",{className:"moderation__author-claim__details__comparison"},a.createElement("div",null,a.createElement("span",{className:"moderation__author-claim__details__comparison__label"},"Claim Form"),a.createElement("span",{className:"moderation__author-claim__details__comparison__value"},s)),a.createElement("div",null,a.createElement("span",{className:"moderation__author-claim__details__comparison__label"},"Login Name"),a.createElement("span",{className:"moderation__author-claim__details__comparison__value"},l)),a.createElement("div",null,a.createElement("span",{className:"moderation__author-claim__details__comparison__label"},"Author Page"),a.createElement("span",{className:"moderation__author-claim__details__comparison__value"},c)))}renderEmail(){var e,t,r,n;const{authorProfile:o}=this.props,{claimingAppUser:i}=this.state,s=(null!=(n=o)?n.email:n)||a.createElement(Xa,null),c=null!=(r=i)?r.email:r,l=(null!=(t=i)?t.alertEmail:t)||a.createElement(Xa,null),u=(null!=(e=i)?e.alertEmailIsVerified:e)||!1;return a.createElement("div",{className:"moderation__author-claim__details__comparison"},a.createElement("div",null,a.createElement("span",{className:"moderation__author-claim__details__comparison__label"},"Claim Form"),a.createElement("span",{className:"moderation__author-claim__details__comparison__value"},s)),a.createElement("div",null,a.createElement("span",{className:"moderation__author-claim__details__comparison__label"},"Login Email"),a.createElement("span",{className:"moderation__author-claim__details__comparison__value"},c?a.createElement(a.Fragment,null,a.createElement(Ja,null)," ",c):a.createElement(Xa,null))),a.createElement("div",null,a.createElement("span",{className:"moderation__author-claim__details__comparison__label"},"Alert Email"),a.createElement("span",{className:"moderation__author-claim__details__comparison__value"},u&&a.createElement(Ja,null)," ",l)))}renderFieldOfStudy(){const{claimingAppUser:e}=this.state;return e?0===e.fieldsOfStudy.size?a.createElement(Xa,null):1===e.fieldsOfStudy.size?e.fieldsOfStudy.get(0):a.createElement("ul",null,e.fieldsOfStudy.map(e=>a.createElement("li",{key:e},e))):a.createElement(Xa,null)}renderPreviouslyClaimed(){const{claimedPreviously:e}=this.state;return 0===e.size?a.createElement(Xa,null):a.createElement("ul",null,e.map(e=>a.createElement("li",{key:e.id},a.createElement("div",{className:"moderation__author-claim__details__comparison"},a.createElement("div",null,a.createElement("span",{className:"moderation__author-claim__details__comparison__label"},"Name"),a.createElement("span",{className:"moderation__author-claim__details__comparison__value"},e.fullName)),a.createElement("div",null,a.createElement("span",{className:"moderation__author-claim__details__comparison__label"},"Author ID"),a.createElement("span",{className:"moderation__author-claim__details__comparison__value"},e.ai2AuthorId)),a.createElement("div",null,a.createElement("span",{className:"moderation__author-claim__details__comparison__label"},"Status"),a.createElement("span",{className:"moderation__author-claim__details__comparison__value"},e.moderationStatus)),a.createElement("div",null,a.createElement("span",{className:"moderation__author-claim__details__comparison__label"},"Reason"),a.createElement("span",{className:"moderation__author-claim__details__comparison__value"},e.moderationStatusReason))))))}renderInternalNotesHistory(){const e=this.state.internalNotes;return a.createElement("div",{className:"moderation__author-claim__details__comparison"},a.createElement("div",null,a.createElement("span",{className:"moderation__author-claim__details__comparison__label"},"Note"),a.createElement("span",{className:"moderation__author-claim__details__comparison__value"},e)))}renderOrcidCheck(){const e=this.state.orcidVerifyResult;if(e){if(e==Va.a.Passed)return a.createElement(Ja,null);if(e==Va.a.Failed)return a.createElement(U.a,{icon:"circle-x",width:"20",height:"20"});if(e==Va.a.InsufficientData)return a.createElement(U.a,{icon:"status-warning",width:"20",height:"20"})}return a.createElement(Xa,null)}formatHomepageUrl(e){return e.toLocaleLowerCase().startsWith("http")?e:"http://".concat(e)}render(){const{authorProfile:e}=this.props,{moderationTag:t,isReasonHighlighted:r,selectedStatus:n,selectedReason:o,claimingAppUser:i,draftInternalNotes:s}=this.state;return a.createElement("div",{className:"moderation__author-claim__details"},a.createElement("div",{className:"moderation__author-claim__details__header"},a.createElement(Ma.a,{href:"/author/".concat(e.ai2AuthorId),className:"moderation__author-claim__details__name"},e.fullName),a.createElement("div",{className:N()({"moderation__author-claim__details__flag":!0,"moderation__author-claim__is-flagged":t}),title:"".concat(t?"Unflag":"Flag as",' "Awaiting Response"')},a.createElement(U.a,{icon:"moderation-flag",onClick:this.onClickFlag}))),a.createElement("div",{className:"moderation__author-claim__details__body"},a.createElement(Ga,{label:"Author Name"},this.renderAuthorName()),a.createElement(Ga,{label:"Affiliation(s)"},(()=>{switch(e.affiliations.length){case 0:return null;case 1:return e.affiliations.join("");default:return a.createElement("ul",{className:"moderation__author-claim__details__affiliations"},e.affiliations.map(e=>a.createElement("li",{key:e},e)))}})()),a.createElement(Ga,{label:"Email(s)"},this.renderEmail()),a.createElement(Ga,{label:"Field of Study"},this.renderFieldOfStudy()),a.createElement(Ga,{label:"Current Role"},!!i&&i.currentRole),a.createElement(Ga,{label:"ORCiD"},e.orcidId?a.createElement(Ha.a,{orcidId:e.orcidId}):null,this.renderOrcidCheck()),a.createElement(Ga,{label:"Homepage"},e.homepageUrl&&a.createElement(Ma.a,{href:this.formatHomepageUrl(e.homepageUrl)},e.homepageUrl)),a.createElement(Ga,{label:"Previously Claimed"},this.renderPreviouslyClaimed()),a.createElement(Ga,{label:"User Comment"},e.userComment),a.createElement(Ga,{label:"Internal Notes"},this.renderInternalNotesHistory())),a.createElement("div",{className:"moderation__author-claim__details__footer"},a.createElement("div",{className:"moderation__author-claim__details__internal-notes"},a.createElement("textarea",{className:"legacy__textarea moderation__author-claim__details__internal-notes__input",placeholder:"Type note here...",onChange:this.onChangeInternalNotes,value:s}),a.createElement(U.a,{icon:"circle-plus",className:"moderation__author-claim__details__internal-notes__submit",title:"Save notes only",onClick:this.onClickInternalNotesSave})),a.createElement("select",{className:N()({legacy__select:!0,"moderation__author-claim__details__reason":!0,"moderation__author-claim__details__is-highlighted":r}),value:o||"",onChange:this.onChangeReason},a.createElement("option",{key:"",value:""}),Object.keys(Ua.c).map(e=>a.createElement("option",{key:e,value:e},Ua.c[e]))),a.createElement("div",{className:"moderation__author-claim__details__button-row","data-moderation-status":n||e.moderationStatus},a.createElement("button",{onClick:this.onClickApprove,className:"moderation__author-claim__details__button moderation__author-claim__details__button__approve"},a.createElement(U.a,{icon:"check-in-green-circle"}),a.createElement("span",{className:"moderation__author-claim__details__button__label"},"APPROVE")),a.createElement("button",{onClick:this.onClickDeny,className:"moderation__author-claim__details__button moderation__author-claim__details__button__deny"},a.createElement(U.a,{icon:"circle-x"}),a.createElement("span",{className:"moderation__author-claim__details__button__label"},"DENY")))))}}Wa(Qa,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,authStore:L.a.instanceOf(fe.a).isRequired,claimModerationStore:L.a.instanceOf(za.a).isRequired});const Ga=e=>{let{label:t,children:r}=e;return a.createElement("div",{className:"moderation__author-claim__details__field"},a.createElement("div",{className:"moderation__author-claim__details__field__label"},t),a.createElement("div",{className:"moderation__author-claim__details__field__value"},null==r?a.createElement(Xa,null):r))},Xa=()=>a.createElement("div",{className:"moderation__author-claim__details__field__value__missing"},"No Value"),Ja=()=>a.createElement(Za,{icon:"checkmark",width:"15",height:"15"}),Za=Object(Ba.b)(U.a).withConfig({displayName:"AuthorClaimModerationDetails__GreenIcon",componentId:"sc-1hreb8p-0"})(["fill:green;"]);var $a=r(2),en=r.n($a),tn=r(781),rn=r.n(tn),an=r(782),nn=r.n(an),on=r(783),sn=r.n(on),cn=r(784),ln=r.n(cn),un=r(771),hn=r.n(un),dn=r(743),pn=r.n(dn),mn=r(815),bn=r.n(mn),gn=r(206);function fn(){return(fn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function _n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function yn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var En="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function On(e){cancelAnimationFrame(e.id)}function Sn(e,t){var r=En();var a={id:requestAnimationFrame((function n(){En()-r>=t?e.call(null):a.id=requestAnimationFrame(n)}))};return a}var vn=-1;var Cn=null;function wn(e){if(void 0===e&&(e=!1),null===Cn||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var a=document.createElement("div"),n=a.style;return n.width="100px",n.height="100px",t.appendChild(a),document.body.appendChild(t),t.scrollLeft>0?Cn="positive-descending":(t.scrollLeft=1,Cn=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),Cn}return Cn}var Pn=function(e){var t=e.columnIndex;e.data;return e.rowIndex+":"+t};function Nn(e){var t,r,n=e.getColumnOffset,o=e.getColumnStartIndexForOffset,i=e.getColumnStopIndexForStartIndex,s=e.getColumnWidth,c=e.getEstimatedTotalHeight,l=e.getEstimatedTotalWidth,u=e.getOffsetForColumnAndAlignment,h=e.getOffsetForRowAndAlignment,d=e.getRowHeight,p=e.getRowOffset,m=e.getRowStartIndexForOffset,b=e.getRowStopIndexForStartIndex,g=e.initInstanceProps,f=e.shouldResetStyleCacheOnItemSizeChange,_=e.validateProps;return r=t=function(e){function t(t){var r;return(r=e.call(this,t)||this)._instanceProps=g(r.props,yn(yn(r))),r._resetIsScrollingTimeoutId=null,r._outerRef=void 0,r.state={instance:yn(yn(r)),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:"number"==typeof r.props.initialScrollLeft?r.props.initialScrollLeft:0,scrollTop:"number"==typeof r.props.initialScrollTop?r.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},r._callOnItemsRendered=void 0,r._callOnItemsRendered=Object(gn.a)((function(e,t,a,n,o,i,s,c){return r.props.onItemsRendered({overscanColumnStartIndex:e,overscanColumnStopIndex:t,overscanRowStartIndex:a,overscanRowStopIndex:n,visibleColumnStartIndex:o,visibleColumnStopIndex:i,visibleRowStartIndex:s,visibleRowStopIndex:c})})),r._callOnScroll=void 0,r._callOnScroll=Object(gn.a)((function(e,t,a,n,o){return r.props.onScroll({horizontalScrollDirection:a,scrollLeft:e,scrollTop:t,verticalScrollDirection:n,scrollUpdateWasRequested:o})})),r._getItemStyle=void 0,r._getItemStyle=function(e,t){var a,o,i=r.props,c=i.columnWidth,l=i.direction,u=i.rowHeight,h=r._getItemStyleCache(f&&c,f&&l,f&&u),m=e+":"+t;h.hasOwnProperty(m)?a=h[m]:h[m]=((o={position:"absolute"})["rtl"===l?"right":"left"]=n(r.props,t,r._instanceProps),o.top=p(r.props,e,r._instanceProps),o.height=d(r.props,e,r._instanceProps),o.width=s(r.props,t,r._instanceProps),a=o);return a},r._getItemStyleCache=void 0,r._getItemStyleCache=Object(gn.a)((function(e,t,r){return{}})),r._onScroll=function(e){var t=e.currentTarget,a=t.clientHeight,n=t.clientWidth,o=t.scrollLeft,i=t.scrollTop,s=t.scrollHeight,c=t.scrollWidth;r.setState((function(e){if(e.scrollLeft===o&&e.scrollTop===i)return null;var t=r.props.direction,l=o;if("rtl"===t)switch(wn()){case"negative":l=-o;break;case"positive-descending":l=c-n-o}l=Math.max(0,Math.min(l,c-n));var u=Math.max(0,Math.min(i,s-a));return{isScrolling:!0,horizontalScrollDirection:e.scrollLeft<o?"forward":"backward",scrollLeft:l,scrollTop:u,verticalScrollDirection:e.scrollTop<i?"forward":"backward",scrollUpdateWasRequested:!1}}),r._resetIsScrollingDebounced)},r._outerRefSetter=function(e){var t=r.props.outerRef;r._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},r._resetIsScrollingDebounced=function(){null!==r._resetIsScrollingTimeoutId&&On(r._resetIsScrollingTimeoutId),r._resetIsScrollingTimeoutId=Sn(r._resetIsScrolling,150)},r._resetIsScrolling=function(){r._resetIsScrollingTimeoutId=null,r.setState({isScrolling:!1},(function(){r._getItemStyleCache(-1)}))},r}_n(t,e),t.getDerivedStateFromProps=function(e,t){return xn(e,t),_(e),null};var r=t.prototype;return r.scrollTo=function(e){var t=e.scrollLeft,r=e.scrollTop;void 0!==t&&(t=Math.max(0,t)),void 0!==r&&(r=Math.max(0,r)),this.setState((function(e){return void 0===t&&(t=e.scrollLeft),void 0===r&&(r=e.scrollTop),e.scrollLeft===t&&e.scrollTop===r?null:{horizontalScrollDirection:e.scrollLeft<t?"forward":"backward",scrollLeft:t,scrollTop:r,scrollUpdateWasRequested:!0,verticalScrollDirection:e.scrollTop<r?"forward":"backward"}}),this._resetIsScrollingDebounced)},r.scrollToItem=function(e){var t=e.align,r=void 0===t?"auto":t,a=e.columnIndex,n=e.rowIndex,o=this.props,i=o.columnCount,s=o.height,d=o.rowCount,p=o.width,m=this.state,b=m.scrollLeft,g=m.scrollTop,f=function(e){if(void 0===e&&(e=!1),-1===vn||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(t),vn=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return vn}();void 0!==a&&(a=Math.max(0,Math.min(a,i-1))),void 0!==n&&(n=Math.max(0,Math.min(n,d-1)));var _=c(this.props,this._instanceProps),y=l(this.props,this._instanceProps)>p?f:0,E=_>s?f:0;this.scrollTo({scrollLeft:void 0!==a?u(this.props,a,r,b,this._instanceProps,E):b,scrollTop:void 0!==n?h(this.props,n,r,g,this._instanceProps,y):g})},r.componentDidMount=function(){var e=this.props,t=e.initialScrollLeft,r=e.initialScrollTop;if(null!=this._outerRef){var a=this._outerRef;"number"==typeof t&&(a.scrollLeft=t),"number"==typeof r&&(a.scrollTop=r)}this._callPropsCallbacks()},r.componentDidUpdate=function(){var e=this.props.direction,t=this.state,r=t.scrollLeft,a=t.scrollTop;if(t.scrollUpdateWasRequested&&null!=this._outerRef){var n=this._outerRef;if("rtl"===e)switch(wn()){case"negative":n.scrollLeft=-r;break;case"positive-ascending":n.scrollLeft=r;break;default:var o=n.clientWidth,i=n.scrollWidth;n.scrollLeft=i-o-r}else n.scrollLeft=Math.max(0,r);n.scrollTop=Math.max(0,a)}this._callPropsCallbacks()},r.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&On(this._resetIsScrollingTimeoutId)},r.render=function(){var e=this.props,t=e.children,r=e.className,n=e.columnCount,o=e.direction,i=e.height,s=e.innerRef,u=e.innerElementType,h=e.innerTagName,d=e.itemData,p=e.itemKey,m=void 0===p?Pn:p,b=e.outerElementType,g=e.outerTagName,f=e.rowCount,_=e.style,y=e.useIsScrolling,E=e.width,O=this.state.isScrolling,S=this._getHorizontalRangeToRender(),v=S[0],C=S[1],w=this._getVerticalRangeToRender(),P=w[0],N=w[1],x=[];if(n>0&&f)for(var R=P;R<=N;R++)for(var j=v;j<=C;j++)x.push(Object(a.createElement)(t,{columnIndex:j,data:d,isScrolling:y?O:void 0,key:m({columnIndex:j,data:d,rowIndex:R}),rowIndex:R,style:this._getItemStyle(R,j)}));var T=c(this.props,this._instanceProps),A=l(this.props,this._instanceProps);return Object(a.createElement)(b||g||"div",{className:r,onScroll:this._onScroll,ref:this._outerRefSetter,style:fn({position:"relative",height:i,width:E,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:o},_)},Object(a.createElement)(u||h||"div",{children:x,ref:s,style:{height:T,pointerEvents:O?"none":void 0,width:A}}))},r._callPropsCallbacks=function(){var e=this.props,t=e.columnCount,r=e.onItemsRendered,a=e.onScroll,n=e.rowCount;if("function"==typeof r&&t>0&&n>0){var o=this._getHorizontalRangeToRender(),i=o[0],s=o[1],c=o[2],l=o[3],u=this._getVerticalRangeToRender(),h=u[0],d=u[1],p=u[2],m=u[3];this._callOnItemsRendered(i,s,h,d,c,l,p,m)}if("function"==typeof a){var b=this.state,g=b.horizontalScrollDirection,f=b.scrollLeft,_=b.scrollTop,y=b.scrollUpdateWasRequested,E=b.verticalScrollDirection;this._callOnScroll(f,_,g,E,y)}},r._getHorizontalRangeToRender=function(){var e=this.props,t=e.columnCount,r=e.overscanColumnCount,a=e.overscanColumnsCount,n=e.overscanCount,s=e.rowCount,c=this.state,l=c.horizontalScrollDirection,u=c.isScrolling,h=c.scrollLeft,d=r||a||n||1;if(0===t||0===s)return[0,0,0,0];var p=o(this.props,h,this._instanceProps),m=i(this.props,p,h,this._instanceProps),b=u&&"backward"!==l?1:Math.max(1,d),g=u&&"forward"!==l?1:Math.max(1,d);return[Math.max(0,p-b),Math.max(0,Math.min(t-1,m+g)),p,m]},r._getVerticalRangeToRender=function(){var e=this.props,t=e.columnCount,r=e.overscanCount,a=e.overscanRowCount,n=e.overscanRowsCount,o=e.rowCount,i=this.state,s=i.isScrolling,c=i.verticalScrollDirection,l=i.scrollTop,u=a||n||r||1;if(0===t||0===o)return[0,0,0,0];var h=m(this.props,l,this._instanceProps),d=b(this.props,h,l,this._instanceProps),p=s&&"backward"!==c?1:Math.max(1,u),g=s&&"forward"!==c?1:Math.max(1,u);return[Math.max(0,h-p),Math.max(0,Math.min(o-1,d+g)),h,d]},t}(a.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},r}var xn=function(e,t){e.children,e.direction,e.height,e.innerTagName,e.outerTagName,e.overscanColumnsCount,e.overscanCount,e.overscanRowsCount,e.width,t.instance};var Rn=Nn({getColumnOffset:function(e,t){return t*e.columnWidth},getColumnWidth:function(e,t){return e.columnWidth},getRowOffset:function(e,t){return t*e.rowHeight},getRowHeight:function(e,t){return e.rowHeight},getEstimatedTotalHeight:function(e){var t=e.rowCount;return e.rowHeight*t},getEstimatedTotalWidth:function(e){var t=e.columnCount;return e.columnWidth*t},getOffsetForColumnAndAlignment:function(e,t,r,a,n,o){var i=e.columnCount,s=e.columnWidth,c=e.width,l=Math.max(0,i*s-c),u=Math.min(l,t*s),h=Math.max(0,t*s-c+o+s);switch("smart"===r&&(r=a>=h-c&&a<=u+c?"auto":"center"),r){case"start":return u;case"end":return h;case"center":var d=Math.round(h+(u-h)/2);return d<Math.ceil(c/2)?0:d>l+Math.floor(c/2)?l:d;case"auto":default:return a>=h&&a<=u?a:h>u?h:a<h?h:u}},getOffsetForRowAndAlignment:function(e,t,r,a,n,o){var i=e.rowHeight,s=e.height,c=e.rowCount,l=Math.max(0,c*i-s),u=Math.min(l,t*i),h=Math.max(0,t*i-s+o+i);switch("smart"===r&&(r=a>=h-s&&a<=u+s?"auto":"center"),r){case"start":return u;case"end":return h;case"center":var d=Math.round(h+(u-h)/2);return d<Math.ceil(s/2)?0:d>l+Math.floor(s/2)?l:d;case"auto":default:return a>=h&&a<=u?a:h>u?h:a<h?h:u}},getColumnStartIndexForOffset:function(e,t){var r=e.columnWidth,a=e.columnCount;return Math.max(0,Math.min(a-1,Math.floor(t/r)))},getColumnStopIndexForStartIndex:function(e,t,r){var a=e.columnWidth,n=e.columnCount,o=e.width,i=t*a,s=Math.ceil((o+r-i)/a);return Math.max(0,Math.min(n-1,t+s-1))},getRowStartIndexForOffset:function(e,t){var r=e.rowHeight,a=e.rowCount;return Math.max(0,Math.min(a-1,Math.floor(t/r)))},getRowStopIndexForStartIndex:function(e,t,r){var a=e.rowHeight,n=e.rowCount,o=e.height,i=t*a,s=Math.ceil((o+r-i)/a);return Math.max(0,Math.min(n-1,t+s-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.columnWidth,e.rowHeight}});var jn=function(e){function t(t){var r;return(r=e.call(this,t)||this).renderHeaderRow=r.renderHeaderRow.bind(ln()(r)),r.renderFrozenRow=r.renderFrozenRow.bind(ln()(r)),r._setRef=r._setRef.bind(ln()(r)),r}hn()(t,e);var r=t.prototype;return r.scrollTo=function(e){this.headerRef&&(this.headerRef.scrollLeft=e)},r.renderHeaderRow=function(e,t){var r=this.props,a=r.columns,n=r.headerRenderer;return e<=0?null:n({style:{width:"100%",height:e},columns:a,headerIndex:t})},r.renderFrozenRow=function(e,t){var r=this.props,a=r.columns,n=r.rowHeight;return(0,r.rowRenderer)({style:{width:"100%",height:n},columns:a,rowData:e,rowIndex:-t-1})},r.render=function(){var e=this.props,t=e.className,r=e.width,a=e.height,o=e.rowWidth,i=e.headerHeight,s=e.frozenData;if(a<=0)return null;var c={width:r,height:a,position:"relative",overflow:"hidden"},l={width:o,height:a},u=Array.isArray(i)?i:[i];return n.a.createElement("div",{role:"grid",ref:this._setRef,className:t,style:c},n.a.createElement("div",{role:"rowgroup",style:l},u.map(this.renderHeaderRow),s.map(this.renderFrozenRow)))},r._setRef=function(e){this.headerRef=e},t}(n.a.PureComponent);jn.propTypes={className:pn.a.string,width:pn.a.number.isRequired,height:pn.a.number.isRequired,headerHeight:pn.a.oneOfType([pn.a.number,pn.a.arrayOf(pn.a.number)]).isRequired,rowWidth:pn.a.number.isRequired,rowHeight:pn.a.number.isRequired,columns:pn.a.arrayOf(pn.a.object).isRequired,data:pn.a.arrayOf(pn.a.object).isRequired,frozenData:pn.a.arrayOf(pn.a.object),headerRenderer:pn.a.func.isRequired,rowRenderer:pn.a.func.isRequired};var Tn=jn,An=function(e){function t(t){var r;return(r=e.call(this,t)||this)._setHeaderRef=r._setHeaderRef.bind(ln()(r)),r._setBodyRef=r._setBodyRef.bind(ln()(r)),r._itemKey=r._itemKey.bind(ln()(r)),r._handleItemsRendered=r._handleItemsRendered.bind(ln()(r)),r.renderRow=r.renderRow.bind(ln()(r)),r}hn()(t,e);var r=t.prototype;return r.forceUpdateTable=function(){this.headerRef&&this.headerRef.forceUpdate(),this.bodyRef&&this.bodyRef.forceUpdate()},r.scrollToPosition=function(e){this.headerRef&&this.headerRef.scrollTo(e.scrollLeft),this.bodyRef&&this.bodyRef.scrollTo(e)},r.scrollToTop=function(e){this.bodyRef&&this.bodyRef.scrollTo({scrollTop:e})},r.scrollToLeft=function(e){this.headerRef&&this.headerRef.scrollTo(e),this.bodyRef&&this.bodyRef.scrollToPosition({scrollLeft:e})},r.scrollToRow=function(e,t){void 0===e&&(e=0),void 0===t&&(t="auto"),this.bodyRef&&this.bodyRef.scrollToItem({rowIndex:e,columnIndex:0,align:t})},r.renderRow=function(e){var t=this.props,r=t.data,a=t.columns,n=t.rowRenderer,o=r[e.rowIndex];return n(nn()({},e,{columns:a,rowData:o}))},r.render=function(){var e=this.props,t=e.containerStyle,r=e.classPrefix,a=e.className,o=e.data,i=e.frozenData,s=e.width,c=e.height,l=e.rowHeight,u=e.headerWidth,h=e.bodyWidth,d=e.useIsScrolling,p=e.onScroll,m=e.hoveredRowKey,b=e.overscanRowCount,g=(e.style,e.onScrollbarPresenceChange,rn()(e,["containerStyle","classPrefix","className","data","frozenData","width","height","rowHeight","headerWidth","bodyWidth","useIsScrolling","onScroll","hoveredRowKey","overscanRowCount","style","onScrollbarPresenceChange"])),f=this._getHeaderHeight(),_=i.length,y=l*_,E=bn()(r+"__table",a),O=t?{style:t}:null;return n.a.createElement("div",sn()({role:"table",className:E},O),n.a.createElement(Rn,sn()({},g,{className:r+"__body",ref:this._setBodyRef,data:o,itemKey:this._itemKey,frozenData:i,width:s,height:Math.max(c-f-y,0),rowHeight:l,rowCount:o.length,overscanRowCount:b,columnWidth:h,columnCount:1,overscanColumnCount:0,useIsScrolling:d,hoveredRowKey:m,onScroll:p,onItemsRendered:this._handleItemsRendered,children:this.renderRow})),f+y>0&&n.a.createElement(Tn,sn()({},g,{className:r+"__header",ref:this._setHeaderRef,data:o,frozenData:i,width:s,height:Math.min(f+y,c),rowWidth:u,rowHeight:l,headerHeight:this.props.headerHeight,headerRenderer:this.props.headerRenderer,rowRenderer:this.props.rowRenderer,hoveredRowKey:_>0?m:null})))},r._setHeaderRef=function(e){this.headerRef=e},r._setBodyRef=function(e){this.bodyRef=e},r._itemKey=function(e){var t=e.rowIndex,r=this.props,a=r.data,n=r.rowKey;return a[t][n]},r._getHeaderHeight=function(){var e=this.props.headerHeight;return Array.isArray(e)?e.reduce((function(e,t){return e+t}),0):e},r._handleItemsRendered=function(e){var t=e.overscanRowStartIndex,r=e.overscanRowStopIndex,a=e.visibleRowStartIndex,n=e.visibleRowStopIndex;this.props.onRowsRendered({overscanStartIndex:t,overscanStopIndex:r,startIndex:a,stopIndex:n})},t}(n.a.PureComponent);An.propTypes={containerStyle:pn.a.object,classPrefix:pn.a.string,className:pn.a.string,width:pn.a.number.isRequired,height:pn.a.number.isRequired,headerHeight:pn.a.oneOfType([pn.a.number,pn.a.arrayOf(pn.a.number)]).isRequired,headerWidth:pn.a.number.isRequired,bodyWidth:pn.a.number.isRequired,rowHeight:pn.a.number.isRequired,columns:pn.a.arrayOf(pn.a.object).isRequired,data:pn.a.arrayOf(pn.a.object).isRequired,rowKey:pn.a.oneOfType([pn.a.string,pn.a.number]).isRequired,frozenData:pn.a.arrayOf(pn.a.object),useIsScrolling:pn.a.bool,overscanRowCount:pn.a.number,hoveredRowKey:pn.a.oneOfType([pn.a.string,pn.a.number]),style:pn.a.object,onScrollbarPresenceChange:pn.a.func,onScroll:pn.a.func,onRowsRendered:pn.a.func,headerRenderer:pn.a.func.isRequired,rowRenderer:pn.a.func.isRequired};var In,Fn=An;function kn(e,t){return n.a.isValidElement(e)?n.a.cloneElement(e,t):"function"==typeof e?e.prototype&&e.prototype.isReactComponent?n.a.createElement(e,t):e.defaultProps?e(nn()({},e.defaultProps,t)):e(t):null}function Dn(e){var t=[];return n.a.Children.forEach(e,(function(e){if(n.a.isValidElement(e)&&e.key){var r=nn()({},e.props,{key:e.key});t.push(r)}})),t}function Ln(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return"function"==typeof e?e.apply(void 0,r):e}function qn(e){return Array.isArray(e)?[].concat(e):[]}function Mn(){}var Hn=function(e){var t=e.className,r=e.style,a=e.columns,o=e.headerIndex,i=e.cellRenderer,s=e.headerRenderer,c=e.expandColumnKey,l=e.expandIcon,u=e.tagName,h=rn()(e,["className","style","columns","headerIndex","cellRenderer","headerRenderer","expandColumnKey","expandIcon","tagName"]),d=a.map((function(e,t){return i({columns:a,column:e,columnIndex:t,headerIndex:o,expandIcon:e.key===c&&n.a.createElement(l,null)})}));return s&&(d=kn(s,{cells:d,columns:a,headerIndex:o})),n.a.createElement(u,sn()({},h,{className:t,style:r}),d)};Hn.defaultProps={tagName:"div"},Hn.propTypes={isScrolling:pn.a.bool,className:pn.a.string,style:pn.a.object,columns:pn.a.arrayOf(pn.a.object).isRequired,headerIndex:pn.a.number,cellRenderer:pn.a.func,headerRenderer:pn.a.oneOfType([pn.a.func,pn.a.element]),expandColumnKey:pn.a.string,expandIcon:pn.a.func,tagName:pn.a.elementType};var zn=Hn,Un=function(e){function t(t){var r;return(r=e.call(this,t)||this)._handleExpand=r._handleExpand.bind(ln()(r)),r}hn()(t,e);var r=t.prototype;return r.render=function(){var e=this.props,t=e.isScrolling,r=e.className,a=e.style,o=e.columns,i=e.rowIndex,s=e.rowData,c=e.expandColumnKey,l=e.depth,u=e.rowEventHandlers,h=e.rowRenderer,d=e.cellRenderer,p=e.expandIconRenderer,m=e.tagName,b=(e.rowKey,e.onRowHover,e.onRowExpand,rn()(e,["isScrolling","className","style","columns","rowIndex","rowData","expandColumnKey","depth","rowEventHandlers","rowRenderer","cellRenderer","expandIconRenderer","tagName","rowKey","onRowHover","onRowExpand"])),g=p({rowData:s,rowIndex:i,depth:l,onExpand:this._handleExpand}),f=o.map((function(e,r){return d({isScrolling:t,columns:o,column:e,columnIndex:r,rowData:s,rowIndex:i,expandIcon:e.key===c&&g})}));h&&(f=kn(h,{isScrolling:t,cells:f,columns:o,rowData:s,rowIndex:i,depth:l}));var _=this._getEventHandlers(u);return n.a.createElement(m,sn()({},b,{className:r,style:a},_),f)},r._handleExpand=function(e){var t=this.props,r=t.onRowExpand,a=t.rowData,n=t.rowIndex,o=t.rowKey;r&&r({expanded:e,rowData:a,rowIndex:n,rowKey:o})},r._getEventHandlers=function(e){void 0===e&&(e={});var t=this.props,r=t.rowData,a=t.rowIndex,n=t.rowKey,o=t.onRowHover,i={};if(Object.keys(e).forEach((function(t){var o=e[t];"function"==typeof o&&(i[t]=function(e){o({rowData:r,rowIndex:a,rowKey:n,event:e})})})),o){var s=i.onMouseEnter;i.onMouseEnter=function(e){o({hovered:!0,rowData:r,rowIndex:a,rowKey:n,event:e}),s&&s(e)};var c=i.onMouseLeave;i.onMouseLeave=function(e){o({hovered:!1,rowData:r,rowIndex:a,rowKey:n,event:e}),c&&c(e)}}return i},t}(n.a.PureComponent);Un.defaultProps={tagName:"div"},Un.propTypes={isScrolling:pn.a.bool,className:pn.a.string,style:pn.a.object,columns:pn.a.arrayOf(pn.a.object).isRequired,rowData:pn.a.object.isRequired,rowIndex:pn.a.number.isRequired,rowKey:pn.a.oneOfType([pn.a.string,pn.a.number]),expandColumnKey:pn.a.string,depth:pn.a.number,rowEventHandlers:pn.a.object,rowRenderer:pn.a.oneOfType([pn.a.func,pn.a.element]),cellRenderer:pn.a.func,expandIconRenderer:pn.a.func,onRowHover:pn.a.func,onRowExpand:pn.a.func,tagName:pn.a.elementType};var Vn=Un,Bn=function(e){var t=e.className,r=e.column;e.columnIndex;return n.a.createElement("div",{className:t},r.title)};Bn.propTypes={className:pn.a.string,column:pn.a.object,columnIndex:pn.a.number};var Yn=Bn,Kn=function(e){var t=e.className,r=e.cellData;e.column,e.columnIndex,e.rowData,e.rowIndex;return n.a.createElement("div",{className:t},n.a.isValidElement(r)?r:function(e){return"string"==typeof e?e:null==e?"":e.toString?e.toString():""}(r))};Kn.propTypes={className:pn.a.string,cellData:pn.a.any,column:pn.a.object,columnIndex:pn.a.number,rowData:pn.a.object,rowIndex:pn.a.number};var Wn=Kn,Qn={LEFT:"left",CENTER:"center",RIGHT:"right"},Gn={LEFT:"left",RIGHT:"right",DEFAULT:!0,NONE:!1},Xn=function(e){function t(){return e.apply(this,arguments)||this}return hn()(t,e),t}(n.a.Component);Xn.propTypes={className:pn.a.oneOfType([pn.a.string,pn.a.func]),headerClassName:pn.a.oneOfType([pn.a.string,pn.a.func]),style:pn.a.object,title:pn.a.string,dataKey:pn.a.string,dataGetter:pn.a.func,align:pn.a.oneOf(["left","center","right"]),flexGrow:pn.a.number,flexShrink:pn.a.number,width:pn.a.number.isRequired,maxWidth:pn.a.number,minWidth:pn.a.number,frozen:pn.a.oneOf(["left","right",!0,!1]),hidden:pn.a.bool,resizable:pn.a.bool,sortable:pn.a.bool,cellRenderer:pn.a.oneOfType([pn.a.func,pn.a.element]),headerRenderer:pn.a.oneOfType([pn.a.func,pn.a.element])},Xn.Alignment=Qn,Xn.FrozenDirection=Gn;var Jn=Xn,Zn={ASC:"asc",DESC:"desc"},$n=function(e){function t(t){var r;return(r=e.call(this,t)||this)._handleClick=r._handleClick.bind(ln()(r)),r}hn()(t,e);var r=t.prototype;return r.render=function(){var e=this.props,t=e.expandable,r=e.expanded,a=e.indentSize,o=e.depth,i=e.onExpand,s=rn()(e,["expandable","expanded","indentSize","depth","onExpand"]);if(!t&&0===a)return null;var c=bn()("BaseTable__expand-icon",{"BaseTable__expand-icon--expanded":r});return n.a.createElement("div",sn()({},s,{className:c,onClick:t&&i?this._handleClick:null,style:{fontFamily:"initial",cursor:"pointer",userSelect:"none",width:"16px",minWidth:"16px",height:"16px",lineHeight:"16px",fontSize:"16px",textAlign:"center",transition:"transform 0.15s ease-out",transform:"rotate("+(t&&r?90:0)+"deg)",marginLeft:o*a}}),t&&"")},r._handleClick=function(e){e.stopPropagation(),e.preventDefault();var t=this.props;(0,t.onExpand)(!t.expanded)},t}(n.a.PureComponent);$n.defaultProps={depth:0,indentSize:16},$n.propTypes={expandable:pn.a.bool,expanded:pn.a.bool,indentSize:pn.a.number,depth:pn.a.number,onExpand:pn.a.func};var eo=$n,to=function(e){var t=e.sortOrder,r=e.className,a=e.style,o=bn()("BaseTable__sort-indicator",r,{"BaseTable__sort-indicator--descending":t===Zn.DESC});return n.a.createElement("div",{className:o,style:nn()({userSelect:"none",width:"16px",height:"16px",lineHeight:"16px",textAlign:"center"},a)},t===Zn.DESC?"":"")};to.propTypes={sortOrder:pn.a.oneOf([Zn.ASC,Zn.DESC]),className:pn.a.string,style:pn.a.object};var ro=to;function ao(e){if(e){var t,r,a=e.getElementById("react-draggable-style-el");a||((a=e.createElement("style")).type="text/css",a.id="react-draggable-style-el",a.innerHTML=".react-draggable-transparent-selection *::-moz-selection {background: transparent;}\n",a.innerHTML+=".react-draggable-transparent-selection *::selection {background: transparent;}\n",e.getElementsByTagName("head")[0].appendChild(a)),e.body&&(t=e.body,r="react-draggable-transparent-selection",t.classList?t.classList.add(r):t.className.match(new RegExp("(?:^|\\s)"+r+"(?!\\S)"))||(t.className+=" "+r))}}function no(e){try{e&&e.body&&(t=e.body,r="react-draggable-transparent-selection",t.classList?t.classList.remove(r):t.className=t.className.replace(new RegExp("(?:^|\\s)"+r+"(?!\\S)","g"),"")),e.selection?e.selection.empty():window.getSelection().removeAllRanges()}catch(e){}var t,r}var oo=function(e){function t(t){var r;return(r=e.call(this,t)||this).isDragging=!1,r.lastX=null,r.width=0,r._setHandleRef=r._setHandleRef.bind(ln()(r)),r._handleClick=r._handleClick.bind(ln()(r)),r._handleMouseDown=r._handleMouseDown.bind(ln()(r)),r._handleMouseUp=r._handleMouseUp.bind(ln()(r)),r._handleMouseMove=r._handleMouseMove.bind(ln()(r)),r}hn()(t,e);var r=t.prototype;return r.componentWillMount=function(){if(this.handleRef){var e=this.handleRef.ownerDocument;e.removeEventListener("mousemove",this._handleMouseMove),e.addEventListener("mouseup",this._handleMouseUp),no(e)}},r.render=function(){var e=this.props,t=e.style,r=(e.column,e.onResizeStart,e.onResize,e.onResizeStop,e.minWidth,rn()(e,["style","column","onResizeStart","onResize","onResizeStop","minWidth"]));return n.a.createElement("div",sn()({},r,{ref:this._setHandleRef,onClick:this._handleClick,onMouseDown:this._handleMouseDown,onMouseUp:this._handleMouseUp,style:nn()({userSelect:"none",touchAction:"none",position:"absolute",top:0,bottom:0,right:0,cursor:"col-resize"},t)}))},r._setHandleRef=function(e){this.handleRef=e},r._handleClick=function(e){e.stopPropagation()},r._handleMouseDown=function(e){if("number"!=typeof e.button||0===e.button){this.isDragging=!0,this.lastX=null,this.width=this.props.column.width,this.props.onResizeStart(this.props.column);var t=this.handleRef.ownerDocument;ao(t),t.addEventListener("mousemove",this._handleMouseMove),t.addEventListener("mouseup",this._handleMouseUp)}},r._handleMouseUp=function(e){if(this.isDragging){this.isDragging=!1,this.props.onResizeStop(this.props.column);var t=this.handleRef.ownerDocument;no(t),t.removeEventListener("mousemove",this._handleMouseMove),t.addEventListener("mouseup",this._handleMouseUp)}},r._handleMouseMove=function(e){var t=this.handleRef.offsetParent,r=t.getBoundingClientRect(),a=e.clientX+t.scrollLeft-r.left;if(null!==this.lastX){var n=this.props,o=n.column,i=n.minWidth,s=o.width,c=o.maxWidth,l=o.minWidth,u=void 0===l?i:l,h=a-this.lastX;if(h){this.width=this.width+h,this.lastX=a;var d=this.width;c&&d>c?d=c:d<u&&(d=u),d!==s&&this.props.onResize(o,d)}}else this.lastX=a},t}(n.a.PureComponent);oo.defaultProps={onResizeStart:Mn,onResize:Mn,onResizeStop:Mn,minWidth:30},oo.propTypes={style:pn.a.object,column:pn.a.object,onResizeStart:pn.a.func,onResize:pn.a.func,onResizeStop:pn.a.func,minWidth:pn.a.number};var io=oo,so=function(){function e(e,t){this._origColumns=[],this.reset(e,t)}var t=e.prototype;return t._cache=function(e,t){return e in this._cached?this._cached[e]:(this._cached[e]=t(),this._cached[e])},t.reset=function(e,t){var r=this;this._columns=e.map((function(e){var t=e.width;if(e.resizable){var a=r._origColumns.findIndex((function(t){return t.key===e.key}));a>=0&&r._origColumns[a].width===e.width&&(t=r._columns[a].width)}return nn()({},e,{width:t})})),this._origColumns=e,this._fixed=t,this._cached={},this._columnStyles=this.recomputeColumnStyles()},t.resetCache=function(){this._cached={}},t.getOriginalColumns=function(){return this._origColumns},t.getColumns=function(){return this._columns},t.getVisibleColumns=function(){var e=this;return this._cache("visibleColumns",(function(){return e._columns.filter((function(e){return!e.hidden}))}))},t.hasFrozenColumns=function(){var e=this;return this._cache("hasFrozenColumns",(function(){return e._fixed&&e.getVisibleColumns().some((function(e){return!!e.frozen}))}))},t.hasLeftFrozenColumns=function(){var e=this;return this._cache("hasLeftFrozenColumns",(function(){return e._fixed&&e.getVisibleColumns().some((function(e){return e.frozen===Gn.LEFT||!0===e.frozen}))}))},t.hasRightFrozenColumns=function(){var e=this;return this._cache("hasRightFrozenColumns",(function(){return e._fixed&&e.getVisibleColumns().some((function(e){return e.frozen===Gn.RIGHT}))}))},t.getMainColumns=function(){var t=this;return this._cache("mainColumns",(function(){var r=t.getVisibleColumns();if(!t.hasFrozenColumns())return r;var a=[];return t.getLeftFrozenColumns().forEach((function(t){var r;a.push(nn()({},t,((r={})[e.PlaceholderKey]=!0,r)))})),t.getVisibleColumns().forEach((function(e){e.frozen||a.push(e)})),t.getRightFrozenColumns().forEach((function(t){var r;a.push(nn()({},t,((r={})[e.PlaceholderKey]=!0,r)))})),a}))},t.getLeftFrozenColumns=function(){var e=this;return this._cache("leftFrozenColumns",(function(){return e._fixed?e.getVisibleColumns().filter((function(e){return e.frozen===Gn.LEFT||!0===e.frozen})):[]}))},t.getRightFrozenColumns=function(){var e=this;return this._cache("rightFrozenColumns",(function(){return e._fixed?e.getVisibleColumns().filter((function(e){return e.frozen===Gn.RIGHT})):[]}))},t.getColumn=function(e){var t=this._columns.findIndex((function(t){return t.key===e}));return this._columns[t]},t.getColumnsWidth=function(){var e=this;return this._cache("columnsWidth",(function(){return e.recomputeColumnsWidth(e.getVisibleColumns())}))},t.getLeftFrozenColumnsWidth=function(){var e=this;return this._cache("leftFrozenColumnsWidth",(function(){return e.recomputeColumnsWidth(e.getLeftFrozenColumns())}))},t.getRightFrozenColumnsWidth=function(){var e=this;return this._cache("rightFrozenColumnsWidth",(function(){return e.recomputeColumnsWidth(e.getRightFrozenColumns())}))},t.recomputeColumnsWidth=function(e){return e.reduce((function(e,t){return e+t.width}),0)},t.setColumnWidth=function(e,t){var r=this.getColumn(e);r.width=t,this._cached={},this._columnStyles[r.key]=this.recomputeColumnStyle(r)},t.getColumnStyle=function(e){return this._columnStyles[e]},t.getColumnStyles=function(){return this._columnStyles},t.recomputeColumnStyle=function(e){var t=0,r=0;this._fixed||(t="number"==typeof e.flexGrow?e.flexGrow:0,r="number"==typeof e.flexShrink?e.flexShrink:1);var a=t+" "+r+" auto",n=nn()({},e.style,{flex:a,msFlex:a,WebkitFlex:a,width:e.width,overflow:"hidden"});return!this._fixed&&e.maxWidth&&(n.maxWidth=e.maxWidth),!this._fixed&&e.minWidth&&(n.minWidth=e.minWidth),n},t.recomputeColumnStyles=function(){var e=this;return this._columns.reduce((function(t,r){return t[r.key]=e.recomputeColumnStyle(r),t}),{})},e}();so.PlaceholderKey="__placeholder__";var co=function(e,t,r){return{width:e,maxWidth:t,height:r,overflow:"hidden"}},lo={TableCell:Wn,TableHeaderCell:Yn,ExpandIcon:eo,SortIndicator:ro},uo=function(e){function t(t){var r;r=e.call(this,t)||this;var a,n,o,i,s,c=t.columns,l=t.children,u=t.expandedRowKeys,h=t.defaultExpandedRowKeys;return r.state={scrollbarSize:0,hoveredRowKey:null,resizingKey:null,resizingWidth:0,expandedRowKeys:qn(void 0!==t.expandedRowKeys?u:h)},r.columnManager=new so(c||Dn(l),t.fixed),r._setContainerRef=r._setContainerRef.bind(ln()(r)),r._setMainTableRef=r._setMainTableRef.bind(ln()(r)),r._setLeftTableRef=r._setLeftTableRef.bind(ln()(r)),r._setRightTableRef=r._setRightTableRef.bind(ln()(r)),r.renderExpandIcon=r.renderExpandIcon.bind(ln()(r)),r.renderRow=r.renderRow.bind(ln()(r)),r.renderRowCell=r.renderRowCell.bind(ln()(r)),r.renderHeader=r.renderHeader.bind(ln()(r)),r.renderHeaderCell=r.renderHeaderCell.bind(ln()(r)),r._handleScroll=r._handleScroll.bind(ln()(r)),r._handleVerticalScroll=r._handleVerticalScroll.bind(ln()(r)),r._handleRowsRendered=r._handleRowsRendered.bind(ln()(r)),r._handleRowHover=r._handleRowHover.bind(ln()(r)),r._handleRowExpand=r._handleRowExpand.bind(ln()(r)),r._handleColumnResize=(a=r._handleColumnResize.bind(ln()(r)),n=50,function(){var e=this,t=arguments;o?(clearTimeout(i),i=setTimeout((function(){Date.now()-s>=n&&(a.apply(e,t),s=Date.now())}),Math.max(n-(Date.now()-s),0))):(a.apply(e,t),s=Date.now(),o=!0)}),r._handleColumnResizeStart=r._handleColumnResizeStart.bind(ln()(r)),r._handleColumnResizeStop=r._handleColumnResizeStop.bind(ln()(r)),r._handleColumnSort=r._handleColumnSort.bind(ln()(r)),r._getLeftTableContainerStyle=Object(gn.a)(co),r._getRightTableContainerStyle=Object(gn.a)(co),r._flattenOnKeys=Object(gn.a)((function(e,t,a){return r._depthMap={},function(e,t,r,a){if(void 0===r&&(r={}),void 0===a&&(a="id"),!t||!t.length)return e;var n=[],o=new Set;t.forEach((function(e){return o.add(e)}));var i=[].concat(e);i.forEach((function(e){return r[e[a]]=0}));for(var s=function(){var e=i.shift();n.push(e),o.has(e[a])&&Array.isArray(e.children)&&e.children.length>0&&(i=[].concat(e.children,i),e.children.forEach((function(t){return r[t[a]]=r[e[a]]+1})))};i.length>0;)s();return n}(e,t,r._depthMap,a)})),r._scroll={scrollLeft:0,scrollTop:0},r._scrollHeight=0,r._lastScannedRowIndex=-1,r._hasDataChangedSinceEndReached=!0,r._data=t.data,r._depthMap={},r._horizontalScrollbarSize=0,r._verticalScrollbarSize=0,r._scrollbarPresenceChanged=!1,r}hn()(t,e);var r=t.prototype;return r.getDOMNode=function(){return this.tableNode},r.getColumnManager=function(){return this.columnManager},r.getExpandedState=function(){return{expandedData:this._data,expandedRowKeys:this.state.expandedRowKeys,expandedDepthMap:this._depthMap}},r.getTotalRowsHeight=function(){return this._data.length*this.props.rowHeight},r.getTotalColumnsWidth=function(){return this.columnManager.getColumnsWidth()},r.forceUpdateTable=function(){this.table&&this.table.forceUpdateTable(),this.leftTable&&this.leftTable.forceUpdateTable(),this.rightTable&&this.rightTable.forceUpdateTable()},r.scrollToPosition=function(e){this._scroll=e,this.table&&this.table.scrollToPosition(e),this.leftTable&&this.leftTable.scrollToTop(e.scrollTop),this.rightTable&&this.rightTable.scrollToTop(e.scrollTop)},r.scrollToTop=function(e){this._scroll.scrollTop=e,this.table&&this.table.scrollToPosition(this._scroll),this.leftTable&&this.leftTable.scrollToTop(e),this.rightTable&&this.rightTable.scrollToTop(e)},r.scrollToLeft=function(e){this._scroll.scrollLeft=e,this.table&&this.table.scrollToPosition(this._scroll)},r.scrollToRow=function(e,t){void 0===e&&(e=0),void 0===t&&(t="auto"),this.table&&this.table.scrollToRow(e,t),this.leftTable&&this.leftTable.scrollToRow(e,t),this.rightTable&&this.rightTable.scrollToRow(e,t),this.scrollToLeft(0)},r.setExpandedRowKeys=function(e){void 0===this.props.expandedRowKeys&&this.setState({expandedRowKeys:qn(e)})},r.renderExpandIcon=function(e){var t=e.rowData,r=e.rowIndex,a=e.depth,o=e.onExpand,i=this.props,s=i.rowKey,c=i.expandColumnKey,l=i.expandIconProps;if(!c)return null;var u,h=r>=0&&(u=t,Array.isArray(u.children)&&u.children.length>0),d=r>=0&&this.state.expandedRowKeys.indexOf(t[s])>=0,p=Ln(l,{rowData:t,rowIndex:r,depth:a,expandable:h,expanded:d}),m=this._getComponent("ExpandIcon");return n.a.createElement(m,sn()({depth:a,expandable:h,expanded:d},p,{onExpand:o}))},r.renderRow=function(e){var t,r=e.isScrolling,a=e.columns,o=e.rowData,i=e.rowIndex,s=e.style,c=this.props,l=c.rowClassName,u=c.rowRenderer,h=c.rowEventHandlers,d=c.expandColumnKey,p=Ln(l,{columns:a,rowData:o,rowIndex:i}),m=Ln(this.props.rowProps,{columns:a,rowData:o,rowIndex:i}),b=o[this.props.rowKey],g=this._depthMap[b]||0,f=bn()(this._prefixClass("row"),p,((t={})[this._prefixClass("row--depth-"+g)]=!!d&&i>=0,t[this._prefixClass("row--expanded")]=!!d&&this.state.expandedRowKeys.indexOf(b)>=0,t[this._prefixClass("row--hovered")]=!r&&b===this.state.hoveredRowKey,t[this._prefixClass("row--frozen")]=0===g&&i<0,t[this._prefixClass("row--customized")]=u,t)),_=nn()({},m,{role:"row",key:"row-"+b,isScrolling:r,className:f,style:s,columns:a,rowIndex:i,rowData:o,rowKey:b,expandColumnKey:d,depth:g,rowEventHandlers:h,rowRenderer:u,cellRenderer:this.renderRowCell,expandIconRenderer:this.renderExpandIcon,onRowExpand:this._handleRowExpand,onRowHover:this.columnManager.hasFrozenColumns()?this._handleRowHover:null});return n.a.createElement(Vn,_)},r.renderRowCell=function(e){var t,r=e.isScrolling,a=e.columns,o=e.column,i=e.columnIndex,s=e.rowData,c=e.rowIndex,l=e.expandIcon;if(o[so.PlaceholderKey])return n.a.createElement("div",{key:"row-"+s[this.props.rowKey]+"-cell-"+o.key+"-placeholder",className:this._prefixClass("row-cell-placeholder"),style:this.columnManager.getColumnStyle(o.key)});var u=o.className,h=o.dataKey,d=o.dataGetter,p=o.cellRenderer,m=this._getComponent("TableCell"),b=d?d({columns:a,column:o,columnIndex:i,rowData:s,rowIndex:c}):function(e,t,r){if(null===e||"object"!=typeof e||"string"!=typeof t)return r;for(var a=function(e){for(var t=e.split("."),r=[],a=0;a<t.length;a++){for(var n=t[a];"\\"===n[n.length-1]&&void 0!==t[a+1];)n=n.slice(0,-1)+".",n+=t[++a];r.push(n)}return r}(t),n=0;n<a.length;n++){if(!Object.prototype.propertyIsEnumerable.call(e,a[n]))return r;if(null==(e=e[a[n]])){if(n!==a.length-1)return r;break}}return e}(s,h),g={isScrolling:r,cellData:b,columns:a,column:o,columnIndex:i,rowData:s,rowIndex:c,container:this},f=kn(p||n.a.createElement(m,{className:this._prefixClass("row-cell-text")}),g),_=Ln(u,{cellData:b,columns:a,column:o,columnIndex:i,rowData:s,rowIndex:c}),y=bn()(this._prefixClass("row-cell"),_,((t={})[this._prefixClass("row-cell--align-center")]=o.align===Qn.CENTER,t[this._prefixClass("row-cell--align-right")]=o.align===Qn.RIGHT,t)),E=Ln(this.props.cellProps,{columns:a,column:o,columnIndex:i,rowData:s,rowIndex:c})||{},O=E.tagName,S=rn()(E,["tagName"]),v=O||"div";return n.a.createElement(v,sn()({role:"gridcell",key:"row-"+s[this.props.rowKey]+"-cell-"+o.key},S,{className:y,style:this.columnManager.getColumnStyle(o.key)}),l,f)},r.renderHeader=function(e){var t,r=e.columns,a=e.headerIndex,o=e.style,i=this.props,s=i.headerClassName,c=i.headerRenderer,l=Ln(s,{columns:r,headerIndex:a}),u=Ln(this.props.headerProps,{columns:r,headerIndex:a}),h=bn()(this._prefixClass("header-row"),l,((t={})[this._prefixClass("header-row--resizing")]=!!this.state.resizingKey,t[this._prefixClass("header-row--customized")]=c,t)),d=nn()({},u,{role:"row",key:"header-"+a,className:h,style:o,columns:r,headerIndex:a,headerRenderer:c,cellRenderer:this.renderHeaderCell,expandColumnKey:this.props.expandColumnKey,expandIcon:this._getComponent("ExpandIcon")});return n.a.createElement(zn,d)},r.renderHeaderCell=function(e){var t,r,a=e.columns,o=e.column,i=e.columnIndex,s=e.headerIndex,c=e.expandIcon;if(o[so.PlaceholderKey])return n.a.createElement("div",{key:"header-"+s+"-cell-"+o.key+"-placeholder",className:this._prefixClass("header-cell-placeholder"),style:this.columnManager.getColumnStyle(o.key)});var l,u,h=o.headerClassName,d=o.headerRenderer,p=this.props,m=p.sortBy,b=p.sortState,g=p.headerCellProps,f=this._getComponent("TableHeaderCell"),_=this._getComponent("SortIndicator"),y={columns:a,column:o,columnIndex:i,headerIndex:s,container:this},E=kn(d||n.a.createElement(f,{className:this._prefixClass("header-cell-text")}),y);if(b){var O=b[o.key];u=(l=O===Zn.ASC||O===Zn.DESC)?O:Zn.ASC}else u=(l=o.key===m.key)?m.order:Zn.ASC;var S=Ln(h,{columns:a,column:o,columnIndex:i,headerIndex:s}),v=bn()(this._prefixClass("header-cell"),S,((t={})[this._prefixClass("header-cell--align-center")]=o.align===Qn.CENTER,t[this._prefixClass("header-cell--align-right")]=o.align===Qn.RIGHT,t[this._prefixClass("header-cell--sortable")]=o.sortable,t[this._prefixClass("header-cell--sorting")]=l,t[this._prefixClass("header-cell--resizing")]=o.key===this.state.resizingKey,t)),C=Ln(g,{columns:a,column:o,columnIndex:i,headerIndex:s})||{},w=C.tagName,P=rn()(C,["tagName"]),N=w||"div";return n.a.createElement(N,sn()({role:"gridcell",key:"header-"+s+"-cell-"+o.key,onClick:o.sortable?this._handleColumnSort:null},P,{className:v,style:this.columnManager.getColumnStyle(o.key),"data-key":o.key}),c,E,o.sortable&&n.a.createElement(_,{sortOrder:u,className:bn()(this._prefixClass("sort-indicator"),(r={},r[this._prefixClass("sort-indicator--descending")]=u===Zn.DESC,r))}),o.resizable&&n.a.createElement(io,{className:this._prefixClass("column-resizer"),column:o,onResizeStart:this._handleColumnResizeStart,onResizeStop:this._handleColumnResizeStop,onResize:this._handleColumnResize}))},r.renderMainTable=function(){var e=this.props,t=e.width,r=e.headerHeight,a=e.rowHeight,o=e.fixed,i=rn()(e,["width","headerHeight","rowHeight","fixed"]),s=this._getTableHeight(),c=t-this._verticalScrollbarSize;if(o){var l=this.columnManager.getColumnsWidth();c=Math.max(Math.round(l),c)}return n.a.createElement(Fn,sn()({},i,this.state,{className:this._prefixClass("table-main"),ref:this._setMainTableRef,data:this._data,columns:this.columnManager.getMainColumns(),width:t,height:s,headerHeight:r,rowHeight:a,headerWidth:c+(o?this._verticalScrollbarSize:0),bodyWidth:c,headerRenderer:this.renderHeader,rowRenderer:this.renderRow,onScroll:this._handleScroll,onRowsRendered:this._handleRowsRendered}))},r.renderLeftTable=function(){if(!this.columnManager.hasLeftFrozenColumns())return null;var e=this.props,t=e.width,r=e.headerHeight,a=e.rowHeight,o=rn()(e,["width","headerHeight","rowHeight"]),i=this._getFrozenContainerHeight(),s=this._verticalScrollbarSize||20,c=this.columnManager.getLeftFrozenColumnsWidth();return n.a.createElement(Fn,sn()({},o,this.state,{containerStyle:this._getLeftTableContainerStyle(c,t,i),className:this._prefixClass("table-frozen-left"),ref:this._setLeftTableRef,data:this._data,columns:this.columnManager.getLeftFrozenColumns(),width:c+s,height:i,headerHeight:r,rowHeight:a,headerWidth:c+s,bodyWidth:c+s,headerRenderer:this.renderHeader,rowRenderer:this.renderRow,onScroll:this._handleVerticalScroll,onRowsRendered:Mn}))},r.renderRightTable=function(){if(!this.columnManager.hasRightFrozenColumns())return null;var e=this.props,t=e.width,r=e.headerHeight,a=e.rowHeight,o=rn()(e,["width","headerHeight","rowHeight"]),i=this._getFrozenContainerHeight(),s=this.columnManager.getRightFrozenColumnsWidth(),c=this._verticalScrollbarSize;return n.a.createElement(Fn,sn()({},o,this.state,{containerStyle:this._getLeftTableContainerStyle(s+c,t,i),className:this._prefixClass("table-frozen-right"),ref:this._setRightTableRef,data:this._data,columns:this.columnManager.getRightFrozenColumns(),width:s+c,height:i,headerHeight:r,rowHeight:a,headerWidth:s+c,bodyWidth:s,headerRenderer:this.renderHeader,rowRenderer:this.renderRow,onScroll:this._handleVerticalScroll,onRowsRendered:Mn}))},r.renderResizingLine=function(){var e=this.props,t=e.width,r=e.fixed,a=this.state.resizingKey;if(!r||!a)return null;var o=this.columnManager.getMainColumns(),i=o.findIndex((function(e){return e.key===a})),s=o[i],c=s.width,l=s.frozen,u=this.columnManager.recomputeColumnsWidth(o.slice(0,i))+c;if(l){if(l===Gn.RIGHT){var h=this.columnManager.recomputeColumnsWidth(o.slice(i+1));u=h+c>t-this._verticalScrollbarSize?c:t-this._verticalScrollbarSize-h}}else u-=this._scroll.scrollLeft;var d={left:u,height:this._getTableHeight()-this._horizontalScrollbarSize};return n.a.createElement("div",{className:this._prefixClass("resizing-line"),style:d})},r.renderFooter=function(){var e=this.props,t=e.footerHeight,r=e.footerRenderer;return 0===t?null:n.a.createElement("div",{className:this._prefixClass("footer"),style:{height:t}},kn(r))},r.renderEmptyLayer=function(){var e=this.props,t=e.data,r=e.footerHeight,a=e.emptyRenderer;if(t&&t.length)return null;var o=this._getHeaderHeight();return n.a.createElement("div",{className:this._prefixClass("empty-layer"),style:{top:o,bottom:r}},kn(a))},r.renderOverlay=function(){var e=this.props.overlayRenderer;return n.a.createElement("div",{className:this._prefixClass("overlay")},!!e&&kn(e))},r.render=function(){var e,t=this.props,r=t.classPrefix,a=t.width,o=t.fixed,i=t.data,s=t.frozenData,c=t.expandColumnKey,l=t.disabled,u=t.className,h=t.style,d=t.footerHeight;this._data=c?this._flattenOnKeys(i,this.state.expandedRowKeys,this.props.rowKey):i,this._calcScrollbarSizes();var p=nn()({},h,{width:a,height:this._getTableHeight()+d,position:"relative"}),m=bn()(r,u,((e={})[r+"--fixed"]=o,e[r+"--expandable"]=!!c,e[r+"--empty"]=0===i.length,e[r+"--has-frozen-rows"]=s.length>0,e[r+"--has-frozen-columns"]=this.columnManager.hasFrozenColumns(),e[r+"--disabled"]=l,e));return n.a.createElement("div",{ref:this._setContainerRef,className:m,style:p},this.renderFooter(),this.renderMainTable(),this.renderLeftTable(),this.renderRightTable(),this.renderResizingLine(),this.renderEmptyLayer(),this.renderOverlay())},r.componentWillReceiveProps=function(e){var t=e.columns||Dn(e.children);(function e(t,r){if(t===r)return!0;if(null===t&&null===r)return!0;if(null===t||null===r)return!1;if("object"!=typeof t||"object"!=typeof r)return!1;var a=Object.keys(t),n=Object.keys(r);if(a.length!==n.length)return!1;for(var o=0;o<a.length;o++){var i=a[o],s=t[i],c=r[i];if(typeof s!=typeof c)return!1;if("function"!=typeof s){if("object"==typeof s){if(e(s,c))continue;return!1}if(s!==c)return!1}}return!0})(t,this.columnManager.getOriginalColumns())&&e.fixed===this.props.fixed||this.columnManager.reset(t,e.fixed),e.data!==this.props.data&&(this._lastScannedRowIndex=-1,this._hasDataChangedSinceEndReached=!0),e.maxHeight===this.props.maxHeight&&e.height===this.props.height||this._maybeCallOnEndReached(),e.expandColumnKey&&void 0!==e.expandedRowKeys&&e.expandedRowKeys!==this.props.expandedRowKeys&&this.setState({expandedRowKeys:qn(e.expandedRowKeys)})},r.componentDidMount=function(){var e=this.props.getScrollbarSize();e>0&&this.setState({scrollbarSize:e})},r.componentDidUpdate=function(e,t){this._maybeScrollbarPresenceChange()},r._prefixClass=function(e){return this.props.classPrefix+"__"+e},r._setContainerRef=function(e){this.tableNode=e},r._setMainTableRef=function(e){this.table=e},r._setLeftTableRef=function(e){this.leftTable=e},r._setRightTableRef=function(e){this.rightTable=e},r._getComponent=function(e){return this.props.components&&this.props.components[e]?this.props.components[e]:lo[e]},r._getHeaderHeight=function(){var e=this.props.headerHeight;return Array.isArray(e)?e.reduce((function(e,t){return e+t}),0):e},r._getFrozenRowsHeight=function(){var e=this.props,t=e.frozenData,r=e.rowHeight;return t.length*r},r._getTableHeight=function(){var e=this.props,t=e.height,r=e.maxHeight,a=e.footerHeight,n=t-a;if(r>0){var o=this._getFrozenRowsHeight(),i=this.getTotalRowsHeight(),s=this._getHeaderHeight()+o+i+this._horizontalScrollbarSize;n=Math.min(s,r-a)}return n},r._getBodyHeight=function(){return this._getTableHeight()-this._getHeaderHeight()-this._getFrozenRowsHeight()},r._getFrozenContainerHeight=function(){var e=this.props.maxHeight,t=this._getTableHeight()-(this._data.length>0?this._horizontalScrollbarSize:0);if(e>0)return t;var r=this.getTotalRowsHeight()+this._getHeaderHeight()+this._getFrozenRowsHeight();return Math.min(t,r)},r._calcScrollbarSizes=function(){var e=this.props,t=e.fixed,r=e.width,a=this.state.scrollbarSize,n=this.getTotalRowsHeight(),o=this.getTotalColumnsWidth(),i=this._horizontalScrollbarSize,s=this._verticalScrollbarSize;0===a?(this._horizontalScrollbarSize=0,this._verticalScrollbarSize=0):!t||o<=r-a?(this._horizontalScrollbarSize=0,this._verticalScrollbarSize=n>this._getBodyHeight()?a:0):o>r?(this._horizontalScrollbarSize=a,this._verticalScrollbarSize=n>this._getBodyHeight()-this._horizontalScrollbarSize?a:0):(this._horizontalScrollbarSize=0,this._verticalScrollbarSize=0,n>this._getBodyHeight()&&(this._horizontalScrollbarSize=a,this._verticalScrollbarSize=a)),i===this._horizontalScrollbarSize&&s===this._verticalScrollbarSize||(this._scrollbarPresenceChanged=!0)},r._maybeScrollbarPresenceChange=function(){if(this._scrollbarPresenceChanged){var e=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,e({size:this.state.scrollbarSize,horizontal:this._horizontalScrollbarSize>0,vertical:this._verticalScrollbarSize>0})}},r._maybeCallOnEndReached=function(){var e=this.props,t=e.onEndReached,r=e.onEndReachedThreshold,a=this._scroll.scrollTop,n=this.getTotalRowsHeight(),o=this._getBodyHeight();if(t&&o&&n){var i=n-a-o+this._horizontalScrollbarSize;this._lastScannedRowIndex>=0&&i<=r&&(this._hasDataChangedSinceEndReached||n!==this._scrollHeight)&&(this._hasDataChangedSinceEndReached=!1,this._scrollHeight=n,t({distanceFromEnd:i}))}},r._handleScroll=function(e){var t=this._scroll.scrollTop;this.scrollToPosition(e),this.props.onScroll(e),e.scrollTop>t&&this._maybeCallOnEndReached()},r._handleVerticalScroll=function(e){var t=e.scrollTop,r=this._scroll.scrollTop;this.scrollToTop(t),t>r&&this._maybeCallOnEndReached()},r._handleRowsRendered=function(e){this.props.onRowsRendered(e),e.overscanStopIndex>this._lastScannedRowIndex&&(this._lastScannedRowIndex=e.overscanStopIndex,this._maybeCallOnEndReached())},r._handleRowHover=function(e){var t=e.hovered,r=e.rowKey;this.setState({hoveredRowKey:t?r:null})},r._handleRowExpand=function(e){var t=e.expanded,r=e.rowData,a=e.rowIndex,n=e.rowKey,o=qn(this.state.expandedRowKeys);if(t)!o.indexOf(n)>=0&&o.push(n);else{var i=o.indexOf(n);i>-1&&o.splice(i,1)}void 0===this.props.expandedRowKeys&&this.setState({expandedRowKeys:o}),this.props.onRowExpand({expanded:t,rowData:r,rowIndex:a,rowKey:n}),this.props.onExpandedRowsChange(o)},r._handleColumnResize=function(e,t){var r=e.key;this.columnManager.setColumnWidth(r,t),this.setState({resizingWidth:t});var a=this.columnManager.getColumn(r);this.props.onColumnResize({column:a,width:t})},r._handleColumnResizeStart=function(e){var t=e.key;this.setState({resizingKey:t})},r._handleColumnResizeStop=function(){this.setState({resizingKey:null})},r._handleColumnSort=function(e){var t=e.currentTarget.dataset.key,r=this.props,a=r.sortBy,n=r.sortState,o=r.onColumnSort,i=Zn.ASC;n?i=n[t]===Zn.ASC?Zn.DESC:Zn.ASC:t===a.key&&(i=a.order===Zn.ASC?Zn.DESC:Zn.ASC),o({column:this.columnManager.getColumn(t),key:t,order:i})},t}(n.a.PureComponent);uo.Column=Jn,uo.PlaceholderKey=so.PlaceholderKey,uo.defaultProps={classPrefix:"BaseTable",rowKey:"id",data:[],frozenData:[],fixed:!1,headerHeight:50,rowHeight:50,footerHeight:0,defaultExpandedRowKeys:[],sortBy:{},useIsScrolling:!1,overscanRowCount:1,onEndReachedThreshold:500,getScrollbarSize:function(e){if((!In&&0!==In||e)&&"undefined"!=typeof window&&window.document&&window.document.createElement){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),In=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return In},onScroll:Mn,onRowsRendered:Mn,onScrollbarPresenceChange:Mn,onRowExpand:Mn,onExpandedRowsChange:Mn,onColumnSort:Mn,onColumnResize:Mn},uo.propTypes={classPrefix:pn.a.string,className:pn.a.string,style:pn.a.object,children:pn.a.node,columns:pn.a.arrayOf(pn.a.shape(Jn.propTypes)),data:pn.a.arrayOf(pn.a.object).isRequired,frozenData:pn.a.arrayOf(pn.a.object),rowKey:pn.a.oneOfType([pn.a.string,pn.a.number]).isRequired,width:pn.a.number.isRequired,height:pn.a.number,maxHeight:pn.a.number,rowHeight:pn.a.number.isRequired,headerHeight:pn.a.oneOfType([pn.a.number,pn.a.arrayOf(pn.a.number)]).isRequired,footerHeight:pn.a.number,fixed:pn.a.bool,disabled:pn.a.bool,overlayRenderer:pn.a.oneOfType([pn.a.func,pn.a.element]),emptyRenderer:pn.a.oneOfType([pn.a.func,pn.a.element]),footerRenderer:pn.a.oneOfType([pn.a.func,pn.a.element]),headerRenderer:pn.a.oneOfType([pn.a.func,pn.a.element]),rowRenderer:pn.a.oneOfType([pn.a.func,pn.a.element]),headerClassName:pn.a.oneOfType([pn.a.string,pn.a.func]),rowClassName:pn.a.oneOfType([pn.a.string,pn.a.func]),headerProps:pn.a.oneOfType([pn.a.object,pn.a.func]),headerCellProps:pn.a.oneOfType([pn.a.object,pn.a.func]),rowProps:pn.a.oneOfType([pn.a.object,pn.a.func]),cellProps:pn.a.oneOfType([pn.a.object,pn.a.func]),expandIconProps:pn.a.oneOfType([pn.a.object,pn.a.func]),expandColumnKey:pn.a.string,defaultExpandedRowKeys:pn.a.arrayOf(pn.a.oneOfType([pn.a.string,pn.a.number])),expandedRowKeys:pn.a.arrayOf(pn.a.oneOfType([pn.a.string,pn.a.number])),onRowExpand:pn.a.func,onExpandedRowsChange:pn.a.func,sortBy:pn.a.shape({key:pn.a.string,order:pn.a.oneOf([Zn.ASC,Zn.DESC])}),sortState:pn.a.object,onColumnSort:pn.a.func,onColumnResize:pn.a.func,useIsScrolling:pn.a.bool,overscanRowCount:pn.a.number,getScrollbarSize:pn.a.func,onScroll:pn.a.func,onEndReached:pn.a.func,onEndReachedThreshold:pn.a.number,onRowsRendered:pn.a.func,onScrollbarPresenceChange:pn.a.func,rowEventHandlers:pn.a.object,components:pn.a.shape({TableCell:pn.a.func,TableHeaderCell:pn.a.func,ExpandIcon:pn.a.func,SortIndicator:pn.a.func})};var ho=uo;function po(e){var t;t="undefined"!=typeof window?window:"undefined"!=typeof self?self:global;var r,a,n="undefined"!=typeof document&&document.attachEvent;if(!n){var o=(a=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||function(e){return t.setTimeout(e,20)},function(e){return a(e)}),i=(r=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.clearTimeout,function(e){return r(e)}),s=function(e){var t=e.__resizeTriggers__,r=t.firstElementChild,a=t.lastElementChild,n=r.firstElementChild;a.scrollLeft=a.scrollWidth,a.scrollTop=a.scrollHeight,n.style.width=r.offsetWidth+1+"px",n.style.height=r.offsetHeight+1+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight},c=function(e){if(!(e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;s(this),this.__resizeRAF__&&i(this.__resizeRAF__),this.__resizeRAF__=o((function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(r){r.call(t,e)})))}))}},l=!1,u="",h="animationstart",d="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),m=document.createElement("fakeelement");if(void 0!==m.style.animationName&&(l=!0),!1===l)for(var b=0;b<d.length;b++)if(void 0!==m.style[d[b]+"AnimationName"]){u="-"+d[b].toLowerCase()+"-",h=p[b],l=!0;break}var g="resizeanim",f="@"+u+"keyframes "+g+" { from { opacity: 0; } to { opacity: 0; } } ",_=u+"animation: 1ms "+g+"; "}return{addResizeListener:function(r,a){if(n)r.attachEvent("onresize",a);else{if(!r.__resizeTriggers__){var o=r.ownerDocument,i=t.getComputedStyle(r);i&&"static"==i.position&&(r.style.position="relative"),function(t){if(!t.getElementById("detectElementResize")){var r=(f||"")+".resize-triggers { "+(_||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',a=t.head||t.getElementsByTagName("head")[0],n=t.createElement("style");n.id="detectElementResize",n.type="text/css",null!=e&&n.setAttribute("nonce",e),n.styleSheet?n.styleSheet.cssText=r:n.appendChild(t.createTextNode(r)),a.appendChild(n)}}(o),r.__resizeLast__={},r.__resizeListeners__=[],(r.__resizeTriggers__=o.createElement("div")).className="resize-triggers",r.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',r.appendChild(r.__resizeTriggers__),s(r),r.addEventListener("scroll",c,!0),h&&(r.__resizeTriggers__.__animationListener__=function(e){e.animationName==g&&s(r)},r.__resizeTriggers__.addEventListener(h,r.__resizeTriggers__.__animationListener__))}r.__resizeListeners__.push(a)}},removeResizeListener:function(e,t){if(n)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",c,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(h,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}var mo=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},bo=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),go=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},fo=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},_o=function(e){function t(){var e,r,a;mo(this,t);for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=a=fo(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.state={height:a.props.defaultHeight||0,width:a.props.defaultWidth||0},a._onResize=function(){var e=a.props,t=e.disableHeight,r=e.disableWidth,n=e.onResize;if(a._parentNode){var o=a._parentNode.offsetHeight||0,i=a._parentNode.offsetWidth||0,s=window.getComputedStyle(a._parentNode)||{},c=parseInt(s.paddingLeft,10)||0,l=parseInt(s.paddingRight,10)||0,u=parseInt(s.paddingTop,10)||0,h=parseInt(s.paddingBottom,10)||0,d=o-u-h,p=i-c-l;(!t&&a.state.height!==d||!r&&a.state.width!==p)&&(a.setState({height:o-u-h,width:i-c-l}),n({height:o,width:i}))}},a._setRef=function(e){a._autoSizer=e},fo(a,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),bo(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=po(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.className,n=e.disableHeight,o=e.disableWidth,i=e.style,s=this.state,c=s.height,l=s.width,u={overflow:"visible"},h={},d=!1;return n||(0===c&&(d=!0),u.height=0,h.height=c),o||(0===l&&(d=!0),u.width=0,h.width=l),Object(a.createElement)("div",{className:r,ref:this._setRef,style:go({},u,i)},!d&&t(h))}}]),t}(a.PureComponent);_o.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}};var yo=_o,Eo=function(e){var t=e.className,r=e.width,a=e.height,o=e.children,i=e.onResize,s="number"==typeof r,c="number"==typeof a;return s&&c?n.a.createElement("div",{className:t,style:{width:r,height:a,position:"relative"}},o({width:r,height:a})):n.a.createElement(yo,{className:t,disableWidth:s,disableHeight:c,onResize:i},(function(e){return o({width:s?r:e.width,height:c?a:e.height})}))};Eo.propTypes={className:pn.a.string,width:pn.a.number,height:pn.a.number,children:pn.a.func.isRequired,onResize:pn.a.func};var Oo=Eo;function So(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class vo extends a.PureComponent{constructor(){super(...arguments),So(this,"state",{selectedRowKeys:[],sortedRows:[],sortState:new G.OrderedMap,sortStateObj:{}}),So(this,"onColumnSort",e=>{let{key:t,order:r}=e,{sortState:a}=this.state;const n=a.get(t);a=a.remove(t),n&&r!==Zn.DESC||(a=a.set(t,r)),this.setState({sortState:a,sortStateObj:a.toJS(),sortedRows:wo(this.props.rows,a)},()=>{const{onChangeSort:e}=this.props;e&&e(a)})}),So(this,"rowEventHandlers",{onClick:e=>{let{rowData:t}=e;this.setState({selectedRowKeys:[t.id]},()=>{const{onSelectRow:e}=this.props;e&&e(t)})}}),So(this,"getRowClassName",e=>{let{rowData:t}=e;return N()({"moderation__author-claim__table__row__is-selected":this.state.selectedRowKeys.includes(t.id)})})}componentWillMount(){this.setState({sortedRows:wo(this.props.rows,this.state.sortState)})}componentWillReceiveProps(e){G.is(this.props.rows,e.rows)||this.setState({sortedRows:wo(e.rows,this.state.sortState)})}render(){const{sortedRows:e,sortStateObj:t,selectedRowKeys:r}=this.state;return a.createElement("div",{className:"moderation__author-claim__table"},a.createElement(Oo,null,n=>{let{width:o,height:i}=n;return a.createElement(ho,{width:o,height:i,fixed:!0,sortState:t,onColumnSort:this.onColumnSort,rowEventHandlers:this.rowEventHandlers,headerClassName:"moderation__author-claim__table__header",rowClassName:this.getRowClassName,selectedRowKeys:r,data:e},Co({dataKey:"authorName",title:"Author",frozen:!0}),Co({dataKey:"email",title:"Email"}),Co({dataKey:"claimDate",title:"Claim Date"}),Co({dataKey:"lastUpdated",title:"Last Updated"}),Co({dataKey:"flag",title:"Flag"}))}))}}const Co=e=>{let{dataKey:t,title:r,width:n,frozen:o}=e;return a.createElement(Jn,{key:t,dataKey:t,title:r,width:n||150,frozen:o?Jn.FrozenDirection.LEFT:null,resizable:!0,sortable:!0})};function wo(e,t){return function(e,t){return t.reduce((e,t)=>{let[r,a]=t;return e.sort((e,t)=>{const n=Po(e[r]),o=Po(t[r]);return n===o?0:a===Zn.DESC?n<o?1:-1:n>o?1:-1})},e)}(e.toJS(),[...t.entries()]).map(No)}function Po(e){switch(typeof e){case"string":return e.toLowerCase();case"number":return e;case"boolean":return e?1:-1;default:if(null==e)return"";if(e instanceof Date||en.a.isMoment(e))return+e}return""}function No(e){return Object.keys(e).reduce((t,r)=>(t[r]=function(e,t){if(null==e)return"-";if(e instanceof Date)return en()(e).format("MM/DD/YYYY");if(en.a.isMoment(e))return e.format("MM/DD/YYYY");return e}(e[r]),t),{})}r(78);var xo=r(97),Ro=r.n(xo),jo=r(52),To=r.n(jo);function Ao(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Io(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ao(Object(r),!0).forEach((function(t){Fo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ao(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ko=Ro()(ie.b.AUTHOR_CLAIM_MODERATION);class Do extends a.PureComponent{static async willRouteTo(e,t){let{api:r,claimModerationStore:a}=e;if(!a.isUninitialized())return;const n=Object($t.a)(t.params.status)||$t.b.Unsupported,{query:o}=t.query;return r.getAuthorProfileListForClaimModeration({status:n,query:o})}constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),Fo(this,"_debounceFilterChange",null),Fo(this,"_lastDragResizeX",null),Fo(this,"onChangeFilterQuery",e=>{const t=e.currentTarget.value;this.setState({filterQuery:t},this.onFilterChangeDebounced)}),Fo(this,"onDragResizeStart",e=>{e.preventDefault(),this.setState({isDraggingResize:!0}),this._lastDragResizeX=e.clientX,window.addEventListener("mousemove",this.onDragResize,!1)}),Fo(this,"onDragResizeEnd",e=>{e.preventDefault(),this.setState({isDraggingResize:!1}),this._lastDragResizeX=null,window.removeEventListener("mousemove",this.onDragResize,!1)}),Fo(this,"onDragResize",e=>{const t=this._lastDragResizeX;if(!t)return;const r=e.clientX;this._lastDragResizeX=r;const a=t-r;this.setState(e=>({detailsPaneWidthPx:e.detailsPaneWidthPx+a}))}),Fo(this,"onFilterChange",()=>{const{history:e,location:t}=this.props,{filterQuery:r,modStatus:a}=this.state,n=this.context.api,o=To.a.parse(t.search,{ignoreQueryPrefix:!0});o.query=r;const i=Io({},t,{search:To.a.stringify(o)});e.replace(i),n.getAuthorProfileListForClaimModeration({status:a,query:r})}),Fo(this,"onFilterChangeDebounced",Object(re.a)(this.onFilterChange,1e3,{leading:!1,trailing:!0})),Fo(this,"onSelectRow",e=>{if(!e)return void this.setState({selectedAuthorProfile:null});const t=parseInt(e.id,10),r=this.context.claimModerationStore.getAuthorProfiles().find(e=>e.id===t);if(this.setState({selectedAuthorProfile:r}),r){this.context.api.getAuthorProfileForClaimModeration({authorProfileId:r.id})}}),Fo(this,"refreshRows",()=>{const e=this.context.api;e.getAuthorProfileListForClaimModeration({status:this.state.modStatus,query:this.state.filterQuery}),e.fetchModerationStats()}),this.state=Io({detailsPaneWidthPx:306,filterQuery:Mo(this.props.location.search),isDraggingResize:!1,modStatus:qo(this.props.location.pathname),selectedAuthorProfile:null},this.getStateFromAuthorClaimModerationStore()),this.context.claimModerationStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorClaimModerationStore())})}componentWillReceiveProps(e){const t={};if(this.props.location.pathname!==e.location.pathname){const r=qo(e.location.pathname);r!==this.state.modStatus&&(t.modStatus=r)}if(this.props.location.search!==e.location.search){const r=Mo(e.location.search);r!==this.state.filterQuery&&(t.filterQuery=r)}Object.keys(t).length>0&&this.setState(t,this.onFilterChange)}handleListItemClick(e){this.setState(e)}getStateFromAuthorClaimModerationStore(){const e=this.context.claimModerationStore;return{isLoading:e.isLoading(),rows:e.getAuthorProfiles().map(Ho)}}render(){const{detailsPaneWidthPx:e,filterQuery:t,rows:r,modStatus:n,selectedAuthorProfile:o}=this.state;return a.createElement("div",{className:"moderation__author-claim"},a.createElement("div",{className:"moderation__author-claim__row"},a.createElement("div",{className:"moderation__author-claim__filter-cell"},a.createElement("label",{className:"moderation__author-claim__field"},a.createElement("div",{className:"moderation__author-claim__label"},"Filter Claims"),a.createElement("input",{className:"legacy__input moderation__author-claim__input",type:"text",placeholder:"Filter by author id, name, email, orcid id, etc.",onChange:this.onChangeFilterQuery,value:t}))),a.createElement("div",{className:"moderation__author-claim__status-cell"},a.createElement("div",{className:"moderation__author-claim__field"},a.createElement("div",{className:"moderation__author-claim__label"},"Claim Status"),a.createElement("div",{className:"moderation__author-claim__button-group"},[$t.b.Pending,$t.b.PendingEmailVerification,$t.b.Approved,$t.b.Denied].map(e=>a.createElement(Lo,{key:e,buttonModStatus:e,activeModStatus:n,filterQuery:t})))))),a.createElement("div",{className:"moderation__author-claim__row moderation__author-claim__row__fill-screen"},a.createElement("div",{className:"moderation__author-claim__table-cell"},a.createElement(vo,{rows:r,onSelectRow:this.onSelectRow})),a.createElement("div",{onMouseDown:this.onDragResizeStart,onMouseUp:this.onDragResizeEnd,className:"moderation__author-claim__resize-gutter"},a.createElement(U.a,{icon:"horizontal-resize-handle"})),a.createElement("div",{className:"moderation__author-claim__details-cell",style:{width:e+"px"}},o?a.createElement(Qa,{key:o.id,authorProfile:o,onRefreshRows:this.refreshRows}):a.createElement("div",{className:"moderation__author-claim__details-cell__instructions"},"Select a claim to moderate"))))}}Fo(Do,"getPageTitle",()=>Object(l.b)(e=>e.authorClaimModeration.pageTitle)),Fo(Do,"requiresAuthentication",()=>!0),Fo(Do,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,claimModerationStore:L.a.instanceOf(za.a).isRequired,router:L.a.object.isRequired});const Lo=e=>{let{activeModStatus:t,buttonModStatus:r,filterQuery:n}=e;return a.createElement(Te.a,{to:"AUTHOR_CLAIM_MODERATION",params:{status:r.toLowerCase()},query:{query:n},className:N()({"moderation__author-claim__button":!0,"moderation__author-claim__is-active":r===t})},r)};function qo(e){if(!e)return $t.b.Pending;const t=(ko.exec(e)||[])[1];return Object($t.a)(t)||$t.b.Unsupported}function Mo(e){if(!e)return"";return To.a.parse(ce.a.parse(e).query||"").query||""}function Ho(e){return{id:e.id,authorName:e.fullName,email:e.email,claimDate:en()(e.claimedAtUtc),lastUpdated:null,flag:e.moderationTag}}var zo=r(170),Uo=r(735);function Vo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Bo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Yo extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),this.onChangeInput=this.onChangeInput.bind(this),this.onClickApprove=this.onClickApprove.bind(this),this.onClickDeny=this.onClickDeny.bind(this),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vo(Object(r),!0).forEach((function(t){Bo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromAuthStore(),{approveDisabled:!1,denyDisabled:!1,newModerationStatus:null,moderatorNotes:null,errorMessage:null}),this.context.authStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthStore())})}getStateFromAuthStore(){return{moderatorEmail:this.context.authStore.getEmail()}}onClickApprove(){this.setState({denyDisabled:!1,approveDisabled:!0,newModerationStatus:$t.b.Approved},()=>this.handleClickEvent())}onClickDeny(){this.setState({denyDisabled:!0,approveDisabled:!1,newModerationStatus:$t.b.Denied},()=>this.handleClickEvent())}onChangeInput(e){this.setState({moderatorNotes:e.currentTarget.value})}handleClickEvent(){this.handleModeration()}_missingParamError(e){throw new Error("Operation failed, missing param: ".concat(e))}async handleModeration(){const e=this.state.moderatorNotes?this.state.moderatorNotes.trim():null,t=this.state.newModerationStatus?this.state.newModerationStatus.toString():this._missingParamError("moderationStatus"),r={paperAuthorCorrectionId:this.props.paperAuthorCorrection.id,moderationStatus:t,moderatorNotes:e,moderator:this.state.moderatorEmail.trim()};await Object(ae.c)(this,{errorMessage:null});try{await this.context.api.updateModerationStatusForPaperAuthorCorrection(r)}catch(e){await Object(ae.c)(this,{errorMessage:Object(l.b)(e=>e.authorClaimModeration.error.apiFailed)})}}renderTop(){const{paperAuthorCorrection:e}=this.props;return a.createElement("tr",{className:"authorship-moderation__table__details-row"},a.createElement("td",null,en()(1e3*e.createdAtUnix).format("LLL")),a.createElement("td",null,e.correctionType),a.createElement("td",null,a.createElement(Te.a,{to:"AUTHOR_PROFILE_BY_ID",params:{authorId:e.authorId}},a.createElement("em",null,e.authorId))),a.createElement("td",null,a.createElement(Te.a,{to:"PAPER_DETAIL_BY_ID",params:{paperId:e.paperHash}},a.createElement("em",null,e.paperHash.slice(-6)))),a.createElement("td",{className:"authorship-moderation__button-row"},a.createElement(Uo.a,{onClick:this.onClickApprove,disabled:this.state.approveDisabled,className:"authorship-moderation__button__approve button button--primary",text:Object(l.b)(e=>e.authorClaimModeration.buttons.approveLabel),iconProps:{icon:"thumbs-up",width:"16",height:"16"},"data-selenium-selector":"save-moderation-status-button"}),a.createElement(Uo.a,{onClick:this.onClickDeny,disabled:this.state.denyDisabled,className:"authorship-moderation__button__deny button button--primary",text:Object(l.b)(e=>e.authorClaimModeration.buttons.denyLabel),iconProps:{icon:"thumbs-down",width:"16",height:"16"},"data-selenium-selector":"save-moderation-status-button"})),a.createElement("td",{rowSpan:"2"},a.createElement("textarea",{typs:"textarea",name:"moderatorNotes",className:"legacy__textarea authorship-moderation__field__moderator-notes__input-text",onChange:this.onChangeInput})))}renderBottom(){return a.createElement("tr",null,a.createElement("td",{colSpan:"100",className:"authorship-moderation__table__correction-td"},"[ THIS IS WHERE WE WILL RENDER THE CORRECTION TO BE APPLIED ]"))}render(){return a.createElement(a.Fragment,null,this.renderTop(),this.renderBottom())}}function Ko(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Wo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Bo(Yo,"propTypes",{paperAuthorCorrection:L.a.object.isRequired}),Bo(Yo,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,authStore:L.a.instanceOf(fe.a).isRequired});class Qo extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ko(Object(r),!0).forEach((function(t){Wo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ko(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromAuthorshipModerationStore()),this.context.authorshipModerationStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorshipModerationStore())})}getStateFromAuthorshipModerationStore(){return{pendingCorrections:this.context.authorshipModerationStore.getPendingPaperAuthorCorrections()}}render(){const e=this.state.pendingCorrections;return a.createElement("div",{className:"authorship-moderation"},a.createElement("div",{className:"authorship-moderation__columns"},a.createElement("main",{className:"authorship-moderation__column authorship-moderation__main"},a.createElement("h1",{className:"authorship-moderation__headline"},"Authorship Correction Moderation"),e.size>0?a.createElement("table",{className:"authorship-moderation__table"},a.createElement("thead",{className:"authorship-moderation__table-header"},a.createElement("tr",null,a.createElement("th",null,"CREATED"),a.createElement("th",null,"TYPE"),a.createElement("th",null,"AUTHOR"),a.createElement("th",null,"PAPER"),a.createElement("th",null,"ACTION"),a.createElement("th",null,"NOTES"))),a.createElement("tbody",null,e.map(e=>a.createElement(Yo,{paperAuthorCorrection:e,key:e.id})))):a.createElement("h2",null,"Cool, no pending authorship corrections!"))))}}Wo(Qo,"getPageTitle",()=>Object(l.b)(e=>e.authorshipModeration.pageTitle)),Wo(Qo,"requiresAuthentication",()=>!0),Wo(Qo,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,router:L.a.object.isRequired,authorshipModerationStore:L.a.instanceOf(zo.a).isRequired});class Go extends a.PureComponent{render(){const{formError:e}=this.props;return a.createElement("div",{className:"author-onboarding__banner"},a.createElement("div",{className:"author-onboarding__banner__columns"},a.createElement("div",{className:"author-onboarding__banner__column"},this.props.leftContent,a.createElement("div",{className:"author-onboarding__banner__form-error"},e)),a.createElement("div",{className:"author-onboarding__banner__column"},this.props.children)))}}function Xo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Jo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Zo=e=>Object(u.a)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xo(Object(r),!0).forEach((function(t){Jo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{id:"author_onboarding_nav"})),$o=()=>Object(u.a)({id:"author_onboarding_skip_all"}),ei=()=>Object(u.a)({id:"author_onboarding_skip_step"});function ti(){return(ti=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function ri(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ai(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ni extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),ai(this,"onClickSubmit",()=>{this.state.hasDraftPapers?this.setState({hasAttemptedSubmit:!0,errorMessage:Object(l.b)(e=>e.authorAddPapers.error.papersInDraft)},()=>{Object(we.a)()&&this.scrollToPaper(this.context.authorCorrectionsStore.getDraftPaperIds().first())}):this.setState({hasAttemptedSubmit:!0},()=>{this.submitCorrections().then(()=>this.emitStepComplete()).catch(e=>this.onApiError(e))})}),ai(this,"emitStepComplete",()=>{this.props.onStepComplete("AUTHOR_ONBOARDING_ADD_PAPERS")}),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ri(Object(r),!0).forEach((function(t){ai(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ri(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isSending:!1,errorMessage:null,hasAttemptedSubmit:!1},this.getStateFromAuthStore(),{},this.getStateFromAuthorCorrectionsStore()),this.context.authStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthStore())}),this.context.authorCorrectionsStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorCorrectionsStore())})}getStateFromAuthStore(){return{authorId:this.context.authStore.getClaimedAuthorId()}}getStateFromAuthorCorrectionsStore(){const e=this.context.authorCorrectionsStore,t=e.hasDraftPapers();return{isFormDirty:e.hasPendingCorrections()||t,hasDraftPapers:t}}scrollToPaper(e){if(!e)return!1;const t=document.querySelector('.author-add-papers__paper[data-paper-id="'.concat(e,'"]'));return!!t&&(t.scrollIntoView({behavior:"smooth"}),!0)}onApiError(e){g.a.error("Error with API",e),this.setState({errorMessage:Object(l.b)(e=>e.authorRemovePapers.error.apiSubmitFailed),isSending:!1})}async submitCorrections(){const{api:e,authorCorrectionsStore:t}=this.context,{authorId:r}=this.state,a=t.getPendingCorrections();await Object(ae.c)(this,{isSending:!0}),await e.submitPaperAuthorCorrections({authorId:r,corrections:a}),await Object(ae.c)(this,{isSending:!1}),t.clearPendingCorrections()}render(){const{stepNum:e,numSteps:t}=this.props,{authorId:r,errorMessage:n,hasAttemptedSubmit:o,hasDraftPapers:i,isFormDirty:s}=this.state;return a.createElement("div",null,a.createElement("div",{className:"author-onboarding__page__content-block"},a.createElement("div",{className:"author-onboarding__step-num-label"},Object(l.b)(e=>e.authorOnboarding.stepNumLabel,e,t)),a.createElement("h2",{className:"author-onboarding__step-label"},Object(l.b)(e=>e.authorOnboarding.addPapersPage.stepLabel)),a.createElement("div",{className:"author-onboarding__step-description"},a.createElement(je.a,{content:Object(l.b)(e=>e.authorOnboarding.addPapersPage.stepDescription)}))),a.createElement("hr",{className:"author-onboarding__divider"}),r&&a.createElement(ue,{authorId:r,showDraftAsError:o&&i}),r?a.createElement(ge,{authorId:r}):null,a.createElement(Go,{formError:n},a.createElement("button",ti({className:"author-onboarding__banner__link-button"},ei(),{onClick:this.emitStepComplete}),Object(l.b)(e=>e.authorOnboarding.addPapersPage.skipLabel)),a.createElement("span",{className:"author-onboarding__banner__button-spacer"}),a.createElement("button",ti({className:"author-onboarding__banner__continue-button button button--primary"},Object(u.a)({id:"author_add_paper_submit"}),{onClick:this.onClickSubmit}),Object(l.b)(e=>e.authorOnboarding.banner.submitLabel))),a.createElement(Ce,{when:s,message:Object(l.b)(e=>e.authorOnboarding.dirtyFormMessage)}))}}ai(ni,"getPageTitle",()=>Object(l.b)(e=>e.authorOnboarding.addPapersPage.pageTitle)),ai(ni,"getStepLabel",()=>Object(l.b)(e=>e.authorOnboarding.addPapersPage.stepLabel)),ai(ni,"requiresAuthentication",()=>!0),ai(ni,"contextTypes",{router:L.a.object.isRequired,api:L.a.instanceOf(ne.a).isRequired,authStore:L.a.instanceOf(fe.a).isRequired,authorCorrectionsStore:L.a.instanceOf(A.a).isRequired});class oi extends a.PureComponent{render(){const{authorId:e}=this.props;return a.createElement("div",{className:"corrections-summary"},a.createElement("div",{className:"corrections-summary__section"},a.createElement("div",{className:"correction-summary__blank-state"},a.createElement("div",{className:"correction-summary__blank-state__content"},a.createElement(U.a,{className:"correction-summary__blank-state__icon",icon:"user-with-checkmark",width:"70",height:"87.5"}),a.createElement("div",{className:"correction-summary__blank-state__description"},Object(l.b)(e=>e.correctionSummary.noCorrections.label)),e&&a.createElement("div",{className:"correction-summary__blank-state__author-page-button"},a.createElement(Te.a,{to:"AUTHOR_PROFILE_BY_ID",params:{authorId:e},className:"button button--secondary"},Object(l.b)(e=>e.correctionSummary.noCorrections.authorPageButton)))))))}}function ii(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function si(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ci extends a.PureComponent{static async willRouteTo(e){let{api:t,authStore:r}=e;const a=r.getClaimedAuthorId();if(a)return Promise.all([t.fetchAuthorCorrectionsForAuthor({authorId:a}),t.fetchPaperAuthorCorrectionsForAuthor({authorId:a,includePaperModel:"PaperLite"})])}constructor(e,t){super(e,t),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ii(Object(r),!0).forEach((function(t){si(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ii(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromAuthStore(),{},this.getStateFromCorrectionsStore()),this.context.authStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthStore())}),this.context.correctionsStore.registerComponent(this,()=>{this.setState(this.getStateFromCorrectionsStore())}),this.props.onStepComplete("AUTHOR_ONBOARDING_COMPLETE")}getStateFromAuthStore(){return{claimedAuthorId:this.context.authStore.getClaimedAuthorId()}}getStateFromCorrectionsStore(){return{hasPendingCorrections:this.context.correctionsStore.hasCorrections()}}render(){const{stepNum:e,numSteps:t}=this.props,{hasPendingCorrections:r,claimedAuthorId:n}=this.state;return a.createElement("div",{className:"author-onboarding__page__content-block"},a.createElement("div",{className:"author-onboarding__step-num-label"},Object(l.b)(e=>e.authorOnboarding.stepNumLabel,e,t)),a.createElement("h2",{className:"author-onboarding__step-label"},Object(l.b)(e=>e.authorOnboarding.completePage.stepLabel)),r?a.createElement(Nt,null):a.createElement(oi,{authorId:n}),a.createElement(o,null,a.createElement(s,null,a.createElement("span",{className:"author-onboarding__banner__button-spacer"}),a.createElement(Te.a,{className:"author-onboarding__page__author-profile-link-button button button--primary",to:"AUTHOR_PROFILE_BY_ID",params:{authorId:n}},Object(l.b)(e=>e.account.page.corrections.authorPageLink)))))}}si(ci,"getPageTitle",()=>Object(l.b)(e=>e.authorOnboarding.completePage.pageTitle)),si(ci,"getStepLabel",()=>Object(l.b)(e=>e.authorOnboarding.completePage.stepLabel)),si(ci,"requiresAuthentication",()=>!0),si(ci,"contextTypes",{authStore:L.a.instanceOf(fe.a).isRequired,correctionsStore:L.a.instanceOf(bt.a).isRequired,router:L.a.object.isRequired});var li=r(857);function ui(){return(ui=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}class hi extends a.PureComponent{renderStep(e){let{stepNum:t,isActive:r,hasCompleted:n,linkRouteName:o,label:i}=e;const s=a.createElement(a.Fragment,null,a.createElement("div",{className:"author-onboarding-nav__step-num"},n?a.createElement(U.a,{className:"author-onboarding-nav__step-num__check",icon:"check",height:"8",width:"8"}):a.createElement("div",{className:"author-onboarding-nav__step-num__number"},t)),a.createElement("div",{className:"author-onboarding-nav__step-label"},i));return a.createElement("li",{key:t,className:N()({"author-onboarding-nav__step":!0,"author-onboarding-nav__is-active":r,"author-onboarding-nav__has-completed":n})},n?a.createElement(Te.a,ui({to:o},Zo({"route-name":o}),{className:"author-onboarding-nav__step-layout"}),s):a.createElement("div",{className:"author-onboarding-nav__step-layout"},s))}render(){const{steps:e}=this.props;return a.createElement("div",{className:"author-onboarding-nav"},a.createElement("div",{className:"author-onboarding-nav__beta-tag"},a.createElement(li.a,{display:"link",openNewTab:!0})),a.createElement("h3",{className:"author-onboarding-nav__headline"},Object(l.b)(e=>e.authorOnboarding.nav.headline)),a.createElement("nav",{className:"author-onboarding-nav__nav"},a.createElement("ol",{className:"author-onboarding-nav__step-list"},e.map(e=>this.renderStep(e)))))}}var di=r(22);function pi(){return(pi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function mi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const bi=()=>{};class gi extends a.PureComponent{constructor(){super(...arguments),mi(this,"state",{completedSteps:G.Set()}),mi(this,"onStepComplete",e=>{this.completeStep(e).catch(e=>g.a.error(e))}),mi(this,"onClickCancel",()=>{const{onCancel:e}=this.props;e&&e()}),mi(this,"onClickContact",e=>{e.preventDefault(),this.context.dispatcher.dispatch(Object(Lr.b)({id:Dr.b.FEEDBACK}))})}static async willRouteTo(e,t){const{api:r,authStore:a,weblabStore:n}=e,o=a.getClaimedAuthorId();return o&&n.isFeatureEnabled(Dt.b.AuthorClaim)?t.path===ie.b.AUTHOR_ONBOARDING?new st.a({routeName:"AUTHOR_ONBOARDING_PROFILE",replace:!0,status:302}):void await r.fetchAuthorProfile({authorId:o}):new st.a({routeName:"HOME",replace:!0,status:302})}getSteps(){var e;const{router:t}=this.context,{route:r}=this.props,a=null!=(e=Object(tr.a)(r.routes,t.route.location.pathname))&&null!=(e=e[0])&&null!=(e=e.route)?e.path:e;return r.routes.map((e,t)=>{var r;const n=Object(ie.c)(e.path)||"AUTHOR_ONBOARDING";return{isActive:e.path===a,hasCompleted:this.state.completedSteps.has(n),label:((null!=(r=e)&&null!=(r=r.component)?r.getStepLabel:r)||bi)()||"Step ".concat(t+1),linkRouteName:n,stepNum:t+1}})}async completeStep(e){const{completedSteps:t}=this.state;t.has(e)||await Object(ae.c)(this,{completedSteps:t.add(e)});const r=this.getSteps(),a=r.findIndex(e=>!e.hasCompleted),n=a<0?null:r[a];if(n){this.context.router.history.push(Object(ie.d)({routeName:n.linkRouteName}))}}render(){const e=this.getSteps(),t=this.context.authStore.getClaimedAuthorId();return t&&({}.authorId=t),a.createElement("div",{className:"author-onboarding",ref:"top"},a.createElement(Jt.a,{showSearchBar:!0}),a.createElement("div",{className:"author-onboarding__columns"},a.createElement("div",{className:"author-onboarding__column author-onboarding__column__nav"},a.createElement("div",{className:"author-onboarding__nav"},a.createElement(hi,{steps:e}),a.createElement("div",{className:"author-onboarding__nav__links"},t?a.createElement(Te.a,pi({to:"AUTHOR_PROFILE_BY_ID",params:{authorId:t},className:"author-onboarding__nav__link"},$o(),{onClick:this.onClickCancel}),Object(l.b)(e=>e.authorOnboarding.banner.cancelLabel)):a.createElement(Te.a,pi({to:"HOME",className:"author-onboarding__nav__link"},$o(),{onClick:this.onClickCancel}),Object(l.b)(e=>e.authorOnboarding.banner.cancelLabel)),a.createElement("a",{className:"author-onboarding__nav__link",onClick:this.onClickContact},Object(l.b)(e=>e.authorOnboarding.banner.contactLabel))))),a.createElement("div",{className:"author-onboarding__column author-onboarding__page"},Object(tr.b)(this.props.route.routes,{onStepComplete:this.onStepComplete,stepNum:fi(e),numSteps:e.length}))))}}function fi(e){const t=e.find(e=>e.isActive);return t?t.stepNum:1}mi(gi,"getPageTitle",()=>Object(l.b)(e=>e.authorEdit.pageTitle.withoutName)),mi(gi,"requiresAuthentication",()=>!0),mi(gi,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,authStore:L.a.instanceOf(fe.a).isRequired,dispatcher:L.a.instanceOf(di.a).isRequired,router:L.a.object.isRequired,weblabStore:L.a.instanceOf(er.b).isRequired});var _i=e=>{let{name:t,label:r,placeholder:n,error:o,value:i,onChange:s,isRequired:c}=e;return a.createElement("label",{className:N()("author-edit__field",{"author-edit__has-error":o})},a.createElement("div",{className:"author-edit__field__label"},a.createElement("span",{className:"author-edit__field__label-text"},r),!c&&a.createElement("span",{className:"author-edit__field__label-optional"},Object(l.b)(e=>e.authorEdit.form.optional))),a.createElement("div",{className:"author-edit__field__input"},a.createElement("input",{type:"text",name:t,className:"legacy__input author-edit__field__input-text",value:i,onChange:s,placeholder:n}),a.createElement("div",{className:"author-edit__field__error"},o)))};function yi(){return(yi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function Ei(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Oi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Si extends a.PureComponent{static async willRouteTo(e){let{authStore:t,api:r}=e;const a=t.getClaimedAuthorId();return k()(a,"Claimed author missing"),Promise.all([r.fetchAuthorProfile({authorId:a}),r.fetchAuthorDetail(a,null,!1)])}constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),Oi(this,"onClickSkip",e=>{e.preventDefault(),this.emitStepComplete()}),Oi(this,"onClickSubmit",e=>{e.preventDefault(),this.updateAuthorProfile()}),Oi(this,"onSubmitForm",e=>{e.preventDefault(),this.updateAuthorProfile()}),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ei(Object(r),!0).forEach((function(t){Oi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ei(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isSending:!1,isFormDirty:!1,formError:null,firstNameError:null,middleNamesError:null,lastNameError:null,affiliationError:null,orcidIdError:null,homepageUrlError:null},this.getStateFromAuthorOrAuthorProfileStore()),this.context.authorStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorOrAuthorProfileStore())}),this.context.authorProfileStore.registerComponent(this,()=>{this.state.isFormDirty||this.setState(this.getStateFromAuthorOrAuthorProfileStore())}),this.onChangeFirstName=this.onChangeText.bind(this,"firstName"),this.onChangeMiddleNames=this.onChangeText.bind(this,"middleNames"),this.onChangeLastName=this.onChangeText.bind(this,"lastName"),this.onChangeAffiliation=this.onChangeText.bind(this,"affiliation"),this.onChangeOrcidId=this.onChangeText.bind(this,"orcidId"),this.onChangeHomepageUrl=this.onChangeText.bind(this,"homepageUrl")}getStateFromAuthorOrAuthorProfileStore(){const e=this.context.authorProfileStore.getAuthorProfile();if(e){const t=e.affiliations.isEmpty?"":e.affiliations.join("; "),r=e.middleNames.isEmpty?"":e.middleNames.join(" ");return{firstNameValue:e.firstName||"",middleNamesValue:r,lastNameValue:e.lastName||"",affiliationValue:t,orcidIdValue:e.orcidId||"",homepageUrlValue:e.homepageUrl||"",fullNameValue:e.fullName||""}}const{author:t}=this.context.authorStore;if(t){const e=t.affiliations.isEmpty?"":t.affiliations.join("; "),r=t.middleNames.isEmpty?"":t.middleNames.join(" ");return{firstNameValue:t.firstName||"",middleNamesValue:r,lastNameValue:t.lastName||"",affiliationValue:e,orcidIdValue:t.orcidId||"",homepageUrlValue:t.homepageUrl||"",fullNameValue:""}}return{firstNameValue:"",middleNamesValue:"",lastNameValue:"",affiliationValue:"",orcidIdValue:"",homepageUrlValue:"",fullNameValue:""}}validateFormState(){const{lastNameValue:e,orcidIdValue:t,homepageUrlValue:r}=this.state;let a=null,n=null,o=null;return e.trim()||(a=Object(l.b)(e=>e.authorEdit.error.lastNameMissing)),t&&(Je.a.test(t)||(n=Object(l.b)(e=>e.authorEdit.error.orcidIdInvalid))),r&&(ce.a.parse(r).host&&Xe.a.test(r)||(o=Object(l.b)(e=>e.authorEdit.error.homepageUrlInvalid))),{firstNameError:null,middleNamesError:null,lastNameError:a,affiliationError:null,orcidIdError:n,homepageUrlError:o}}async updateAuthorProfile(){const e=this.validateFormState();if(this.setState(e),!!Object.values(e).find(e=>null!==e))return void g.a.warn("Could not save do to errors",e);const{author:t}=this.context.authorStore,r={authorId:t.id,lastName:this.state.lastNameValue.trim(),middleNames:this.state.middleNamesValue.toString().split(" ").map(e=>e.trim()),firstName:this.state.firstNameValue.trim(),affiliation:this.state.affiliationValue.toString().split(";").map(e=>e.trim()),orcidId:this.state.orcidIdValue.trim(),homepageUrl:this.state.homepageUrlValue.trim()};g.a.info("Saving author profile",r),await Object(ae.c)(this,{isSending:!0,formError:null});const a=Object(ae.a)(0);try{await this.context.api.updateAuthorProfile(r)}catch(e){return void await Object(ae.c)(this,{isSending:!1,formError:Object(l.b)(e=>e.authorEdit.error.apiFailed)})}await a,await Object(ae.c)(this,{isSending:!1}),this.emitStepComplete()}emitStepComplete(){this.props.onStepComplete("AUTHOR_ONBOARDING_PROFILE")}onChangeCheckbox(e,t){this.setState({isFormDirty:!0,["".concat(e,"Value")]:!!t.currentTarget.checked})}onChangeText(e,t){this.setState({isFormDirty:!0,["".concat(e,"Error")]:null,["".concat(e,"Value")]:t.currentTarget.value})}getHeaderLabel(e){return e?Object(l.b)(e=>e.authorOnboarding.profilePage.stepLabelWithName,e):Object(l.b)(e=>e.authorOnboarding.profilePage.stepLabelWithoutName)}render(){const{author:e}=this.context.authorStore;if(!e)return null;const{stepNum:t,numSteps:r}=this.props,{formError:n,firstNameError:o,firstNameValue:i,middleNamesError:s,middleNamesValue:c,lastNameError:h,lastNameValue:d,affiliationError:p,affiliationValue:m,orcidIdError:b,orcidIdValue:g,homepageUrlError:f,homepageUrlValue:_,fullNameValue:y,isFormDirty:E}=this.state;return a.createElement("div",{className:"author-edit"},a.createElement("div",{className:"author-onboarding__page__content-block"},a.createElement("div",{className:"author-onboarding__step-num-label"},Object(l.b)(e=>e.authorOnboarding.stepNumLabel,t,r)),a.createElement("h2",{className:"author-onboarding__step-label"},this.getHeaderLabel(y)),a.createElement("div",{className:"author-onboarding__step-description"},a.createElement(je.a,{content:Object(l.b)(e=>e.authorOnboarding.profilePage.stepDescription)}))),a.createElement("hr",{className:"author-edit__divider"}),a.createElement("form",{className:"author-edit__form",onSubmit:this.onSubmitForm},a.createElement("div",{className:"author-onboarding__page__content-block"},a.createElement(_i,{name:"firstName",label:Object(l.b)(e=>e.authorEdit.form.firstNameLabel),placeholder:Object(l.b)(e=>e.authorEdit.form.firstNamePlaceholder),value:i,error:o,onChange:this.onChangeFirstName,isRequired:!1}),a.createElement(_i,{name:"middleNames",label:Object(l.b)(e=>e.authorEdit.form.middleNamesLabel),placeholder:Object(l.b)(e=>e.authorEdit.form.middleNamesPlaceholder),value:c,error:s,onChange:this.onChangeMiddleNames,isRequired:!1}),a.createElement(_i,{name:"lastName",label:Object(l.b)(e=>e.authorEdit.form.lastNameLabel),placeholder:Object(l.b)(e=>e.authorEdit.form.lastNamePlaceholder),value:d,error:h,onChange:this.onChangeLastName,isRequired:!0}),a.createElement("div",{className:"author-onboarding__field__description"},a.createElement("span",{className:"author-onboarding__field__description-text"},Object(l.b)(e=>e.authorEdit.form.applyToPapersDescription)))),a.createElement("hr",{className:"author-edit__divider"}),a.createElement("div",{className:"author-onboarding__page__content-block"},a.createElement(_i,{name:"affiliation",label:Object(l.b)(e=>e.authorEdit.form.affiliationLabel),placeholder:Object(l.b)(e=>e.authorEdit.form.affiliationPlaceholder),value:m,error:p,onChange:this.onChangeAffiliation,isRequired:!1}),a.createElement(_i,{name:"orcidId",label:Object(l.b)(e=>e.authorEdit.form.orcidIdLabel),placeholder:Object(l.b)(e=>e.authorEdit.form.orcidIdPlaceholder),value:g,error:b,onChange:this.onChangeOrcidId,isRequired:!1}),a.createElement(_i,{name:"homepageUrl",label:Object(l.b)(e=>e.authorEdit.form.homepageUrlLabel),placeholder:Object(l.b)(e=>e.authorEdit.form.homepageUrlPlaceholder),value:_,error:f,onChange:this.onChangeHomepageUrl,isRequired:!1})),a.createElement(Go,{formError:n},a.createElement("button",yi({className:"author-onboarding__banner__link-button"},ei(),{onClick:this.onClickSkip}),Object(l.b)(e=>e.authorOnboarding.profilePage.skipLabel)),a.createElement("span",{className:"author-onboarding__banner__button-spacer"}),a.createElement("button",yi({className:"author-onboarding__banner__continue-button button button--primary"},Object(u.a)({id:"author_profile_submit"}),{onClick:this.onClickSubmit}),Object(l.b)(e=>e.authorOnboarding.banner.submitLabel)))),a.createElement(Ce,{when:E,message:Object(l.b)(e=>e.authorOnboarding.dirtyFormMessage)}))}}function vi(){return(vi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function Ci(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function wi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Oi(Si,"getPageTitle",()=>Object(l.b)(e=>e.authorOnboarding.profilePage.pageTitle)),Oi(Si,"getStepLabel",()=>Object(l.b)(e=>e.authorOnboarding.profilePage.stepLabelWithoutName)),Oi(Si,"requiresAuthentication",()=>!0),Oi(Si,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,authorStore:L.a.instanceOf(T.a).isRequired,authorProfileStore:L.a.instanceOf(I.a).isRequired,authStore:L.a.instanceOf(fe.a).isRequired,dispatcher:L.a.instanceOf(qr.Dispatcher).isRequired,router:L.a.object.isRequired});class Pi extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),wi(this,"onClickSubmit",()=>{this.submitCorrections().then(()=>this.emitStepComplete()).catch(e=>this.onApiError(e))}),wi(this,"emitStepComplete",()=>{this.props.onStepComplete("AUTHOR_ONBOARDING_REMOVE_PAPERS")}),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ci(Object(r),!0).forEach((function(t){wi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ci(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isSending:!1,errorMessage:null},this.getStateFromAuthStore(),{},this.getStateFromAuthorCorrectionsStore()),this.context.authStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthStore())}),this.context.authorCorrectionsStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorCorrectionsStore())})}getStateFromAuthStore(){return{authorId:this.context.authStore.getClaimedAuthorId()}}getStateFromAuthorCorrectionsStore(){const e=this.context.authorCorrectionsStore;return{isFormDirty:e.hasPendingCorrections()||e.hasDraftPapers()}}onApiError(e){g.a.error("Error with API",e),this.setState({errorMessage:Object(l.b)(e=>e.authorRemovePapers.error.apiSubmitFailed),isSending:!1})}async submitCorrections(){const{api:e,authorCorrectionsStore:t}=this.context,{authorId:r}=this.state,a=t.getPendingCorrections();await Object(ae.c)(this,{isSending:!0}),await e.submitPaperAuthorCorrections({authorId:r,corrections:a}),await Object(ae.c)(this,{isSending:!1}),t.clearPendingCorrections()}render(){const{stepNum:e,numSteps:t}=this.props,{authorId:r,errorMessage:n,isFormDirty:o}=this.state;return a.createElement("div",null,a.createElement("div",{className:"author-onboarding__page__content-block"},a.createElement("div",{className:"author-onboarding__step-num-label"},Object(l.b)(e=>e.authorOnboarding.stepNumLabel,e,t)),a.createElement("h2",{className:"author-onboarding__step-label"},Object(l.b)(e=>e.authorOnboarding.removePapersPage.stepLabel)),a.createElement("div",{className:"author-onboarding__step-description"},a.createElement(je.a,{content:Object(l.b)(e=>e.authorOnboarding.removePapersPage.stepDescription)}))),a.createElement("hr",{className:"author-onboarding__divider"}),r&&a.createElement(gr,{key:r,authorId:r}),a.createElement(Go,{formError:n,leftContent:a.createElement(yr,null)},a.createElement("button",vi({className:"author-onboarding__banner__link-button"},ei(),{onClick:this.emitStepComplete}),Object(l.b)(e=>e.authorOnboarding.removePapersPage.skipLabel)),a.createElement("span",{className:"author-onboarding__banner__button-spacer"}),a.createElement("button",vi({className:"author-onboarding__banner__continue-button button button--primary"},Object(u.a)({id:"author_remove_paper_submit"}),{onClick:this.onClickSubmit}),Object(l.b)(e=>e.authorOnboarding.banner.submitLabel))),a.createElement(Ce,{when:o,message:Object(l.b)(e=>e.authorOnboarding.dirtyFormMessage)}))}}wi(Pi,"getPageTitle",()=>Object(l.b)(e=>e.authorOnboarding.removePapersPage.pageTitle)),wi(Pi,"getStepLabel",()=>Object(l.b)(e=>e.authorOnboarding.removePapersPage.stepLabel)),wi(Pi,"requiresAuthentication",()=>!0),wi(Pi,"contextTypes",{router:L.a.object.isRequired,api:L.a.instanceOf(ne.a).isRequired,authStore:L.a.instanceOf(fe.a).isRequired,authorCorrectionsStore:L.a.instanceOf(A.a).isRequired});var Ni=r(154);class xi extends a.PureComponent{render(){return a.createElement(At.c,{feature:Dt.b.AuthorClaimAllowNewClaims},a.createElement(At.b,null,a.createElement("div",{className:"author-claim-ad"},a.createElement("div",{className:"author-claim-ad__content-container"},a.createElement("div",{className:"author-claim-ad__title"},Object(l.b)(e=>e.authorClaim.ad.headline)),a.createElement("div",{className:"author-claim-ad__description"},a.createElement(je.a,{content:Object(l.b)(e=>e.authorClaim.ad.description)}))))))}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(xi,"contextTypes",{iconStore:L.a.instanceOf(Ni.a).isRequired});var Ri=r(976);class ji extends a.PureComponent{render(){return n.a.createElement("div",{className:"container flex-row"},this.props.children)}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(ji,"propTypes",{children:L.a.array.isRequired});var Ti=r(957),Ai=r(870),Ii=r(871),Fi=r(793);const ki="citations",Di="coauthor",Li="relevance",qi="baseline",Mi="recent_relevant_popular";function Hi(e){switch(e){case"baseline":return qi;case"recent_relevant_popular":return Mi;default:return null}}var zi=r(23);class Ui extends a.Component{constructor(){super(...arguments),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"getReasonTip",e=>{const t=this.props.author.name;if(!t)return null;switch(e.reason){case ki:return Object(l.b)(e=>e.author.recommendations.reason.citations,t,e.name);case Di:return Object(l.b)(e=>e.author.recommendations.reason.coauthor,t,e.name);case Li:return Object(l.b)(e=>e.author.recommendations.reason.relevance,t,e.name);default:return null}})}render(){const{recommendations:e,useGlobalExplanation:t,globalExplanationMsg:r,maxResults:n}=this.props,o=n?e.slice(0,n):e;return a.createElement("div",{className:N()("author-recs",{"author-recs__compact":!Vi(o)})},a.createElement("div",{className:"author-recs__top-flex"},a.createElement("h2",{className:"author-recs__header"},Object(l.b)(e=>e.author.recommendations.headline)),t&&r&&a.createElement(Fi.default,{placement:Fi.PLACEMENT.RIGHT,tooltipContent:r},a.createElement("span",{className:"author-recs__global-tip"},Object(l.b)(e=>e.author.recommendations.why)))),o.map(e=>a.createElement(Te.a,{"data-heap-id":"author-recs-link",to:"AUTHOR_DETAILS",params:{slug:e.slug,authorId:e.id}},a.createElement(Ii.default,{key:e.id.toString()},a.createElement("div",{className:"author-recs__author-icon"},a.createElement(U.a,{icon:"user",width:"19",height:"19"})),a.createElement("ul",null,a.createElement("li",null,a.createElement("span",{className:"author-recs__author-title"},e.name)),a.createElement("li",{className:"author-recs__metadata"},Object(l.b)(e=>e.author.recommendations.counts.formattedCounts,Object(zi.l)(e.numPapers,Object(l.b)(e=>e.author.recommendations.counts.publication)),Object(zi.l)(e.numCitations,Object(l.b)(e=>e.author.recommendations.counts.citation)))),e.coauthor&&a.createElement("li",{className:"author-recs__metadata"},Object(l.b)(e=>e.author.recommendations.coAuthorLabel))),!t&&this.getReasonTip(e)&&a.createElement(Fi.default,{placement:Fi.PLACEMENT.RIGHT,tooltipContent:this.getReasonTip(e)},a.createElement(U.a,{className:"author-recs__info-tip",icon:"information",width:"12",height:"12"}))))))}}const Vi=e=>!!e.find(e=>!0===e.coauthor);function Bi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Yi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ki extends a.Component{constructor(e,t){super(e,t),Yi(this,"getStateFromWeblabStore",()=>({modelVariation:Hi(this.context.weblabStore.getVariation(Ir.b.AuthorRecommendationsData.KEY))})),Yi(this,"extractSkipperData",()=>{const e=this.props.author.skipperExperiments.dataFor(Ir.b.AuthorRecommendationsData.KEY),t=e?e.models[this.state.modelVariation]:void 0;let r=[];return t&&t.recommendedAuthors&&(r=t.recommendedAuthors),r}),Yi(this,"getGlobalExplanationText",()=>{switch(this.state.modelVariation){case qi:return Object(l.b)(e=>e.author.recommendations.reason.globalBaseline);case Mi:return Object(l.b)(e=>e.author.recommendations.reason.globalRecentRelevant);default:return null}}),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bi(Object(r),!0).forEach((function(t){Yi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromWeblabStore()),this.context.weblabStore.registerComponent(this,()=>{this.setState(this.getStateFromWeblabStore())})}componentDidMount(){this.context.weblabStore.expose(Ir.b.AuthorRecommendationsData.KEY)}render(){const{author:e,useGlobalExplanation:t}=this.props,r=this.extractSkipperData(),n=this.getGlobalExplanationText();return a.createElement(Ui,{author:e,recommendations:r,useGlobalExplanation:t,globalExplanationMsg:n,maxResults:4})}}Yi(Ki,"contextTypes",{weblabStore:L.a.instanceOf(er.b).isRequired});var Wi=r(819),Qi=r(772),Gi=r(790),Xi=r(852),Ji=r(817),Zi=r(866),$i=r(865),es=r(58);r(51);class ts extends a.PureComponent{handleChangeSort(e){const t="string"==typeof e?e:e.target.value;this.props.onChangeSort&&this.props.onChangeSort(t);const r=this.context.analyticsLocation;if(r){const e=kt.a.getIn(r,"SORT_BY");Object(Ht.a)($i.a.create(e,{sort:t}))}else Object(Ht.a)($i.a.create(kt.a.SORT_BY,{sort:t}))}render(){const{className:e}=this.props,t=N()(e,"search-sort flex-row-vcenter filter-bar__sort-selector");return a.createElement("div",{className:t},a.createElement("select",{className:"legacy__select search-sort-select",onChange:this.handleChangeSort.bind(this),value:this.props.sort,"data-selenium-selector":"sort-select"},this.props.options.map(e=>{const t=es.a.getString("sort.".concat(e.id,".label"));return a.createElement("option",{value:e.id,key:e.id,"data-selenium-selector":"sort-by-".concat(e.id)},es.a.getString("sort.label",t))})),a.createElement(U.a,{icon:"disclosure",height:"12",width:"12",className:"dropdown-arrow-icon"}))}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(ts,"contextTypes",{analyticsLocation:L.a.object});var rs=r(824);class as{constructor(e,t){this.id=e,this.displayName=t}}const ns={AUTHOR:new as("author","Authors"),COAUTHOR:new as("coAuthor","Co-Authors"),VENUE:new as("venue","Venues"),PUBLICATION_TYPE:new as("publicationType","Publication Types"),EXTERNAL_CONTENT_TYPE:new as("externalContentType","Supplemental Content")};var os=Object(rs.b)(ns),is=r(49),ss=r(87),cs=(r(67),r(33)),ls=r(15),us=r.n(ls);class hs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showSortExplanation:!1,showResultCount:!0,sortDisplayType:"select",scrollToTopOfPage:!0,searchResultLayout:{showSortStat:!1},sorts:null};e.sorts||(e.sorts=cs.a.paperSearch()),us()(this,e)}}function ds(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ps extends a.PureComponent{constructor(){super(...arguments),ds(this,"onChangeYearFilter",(e,t)=>{const{queryStore:r,router:a}=this.context;r.routeToYearRange(e,t,a)}),ds(this,"onChangeSort",e=>{this.context.queryStore.routeToSort(e,this.context.router)}),ds(this,"toggleHasPdf",()=>{Object(Ht.a)(ra.a.create(kt.a.FACET_HAS_PDF,{documentCount:this.state.countOfPapersWithViewablePdf,action:this.state.isPdfFilterSelected?"disable":"enable"})),is.a.changeRouteForQuery(this.context.queryStore.getQuery().set("requireViewablePdf",!this.state.isPdfFilterSelected),this.context.router),this.setState({isPdfFilterSelected:!this.state.isPdfFilterSelected})}),ds(this,"isFiltered",e=>{const t=this.context.queryStore.getQuery()[e];return"yearFilter"===e?t.min||t.max:!!t&&!!t.size>0}),this.state=this.getStateFromQueryStore(),this.context.queryStore.registerComponent(this,()=>{this.setState(this.getStateFromQueryStore())})}getStateFromQueryStore(){const e=this.context.queryStore.getQueryResponse().stats.get("countOfPapersWithViewablePdf")||0,t=this.context.queryStore.getQueryResponse().stats.get("years").size>1||!1;return{isPdfFilterSelected:this.context.queryStore.getQuery().requireViewablePdf,countOfPapersWithViewablePdf:e,shouldDisplayYearFilter:t,query:this.context.queryStore.getQuery(),response:this.context.queryStore.getQueryResponse(),yearFilter:this.context.queryStore.getQuery().yearFilter}}getButtonLabel(e,t,r){const a=this.context.queryStore.getQuery()[e];return a.isEmpty()?t:1===a.size?Object(zi.p)(a.first(),r):"".concat(Object(zi.p)(a.first(),r)," +").concat(a.size-1)}renderDates(){const{response:e,query:t}=this.state,{stats:r}=e;return a.createElement(Zi.a,{analyticsEvent:kt.a.Serp.YEAR_SLIDER,filterCallback:this.onChangeYearFilter,filters:r,histogramHeight:95,histogramWidth:221,yearFilter:t.yearFilter,showPresetButtons:!0})}renderFilterList(e,t){return t.size>5?a.createElement(Xi.a,{label:os.findById(e).displayName,lessText:"Fewer"},r=>a.createElement(Ji.a,{maxLabelLength:30,collapsible:!1,filterType:e,displayDocCount:!0,filters:t.take(r?t.size:5),isFilterBar:!0})):a.createElement(Ji.a,{maxLabelLength:30,displayDocCount:!0,collapsible:!1,filterType:e,filters:t,isFilterBar:!0})}render(){const{query:e,response:t,shouldDisplayYearFilter:r,isPdfFilterSelected:n}=this.state,{layoutOptions:o}=this.props,i=t.stats,s=i.get("venues"),c=i.get("coAuthors");return a.createElement("div",{className:"filter-bar"},r&&a.createElement(Gi.a,{content:this.renderDates()},a.createElement("button",{className:{"filter-bar__button":!0,"filter-bar__button-selected":this.isFiltered("yearFilter")}},Object(l.b)(e=>e.filterBar.filterLabels.date),a.createElement(U.a,{icon:"disclosure",width:"12",height:"12",className:"dropdown-arrow-icon"}))),!c.isEmpty()&&a.createElement(Gi.a,{content:this.renderFilterList(os.COAUTHOR.id,c)},a.createElement("button",{className:{"filter-bar__button":!0,"filter-bar__button-selected":this.isFiltered("coAuthors")},"data-selenium-selector":"co-author-facet-filter"},this.getButtonLabel("coAuthors",Object(l.b)(e=>e.filterBar.filterLabels.coAuthor),20),a.createElement(U.a,{icon:"disclosure",width:"12",height:"12",className:"dropdown-arrow-icon"}))),!s.isEmpty()&&a.createElement(Gi.a,{content:this.renderFilterList(os.VENUE.id,s)},a.createElement("button",{className:{"filter-bar__button":!0,"filter-bar__button-selected":this.isFiltered("venues")}},this.getButtonLabel("venues",Object(l.b)(e=>e.filterBar.filterLabels.venue),25),a.createElement(U.a,{icon:"disclosure",width:"12",height:"12",className:"dropdown-arrow-icon"}))),a.createElement("button",{className:N()({"filter-bar__button":!0,"filter-bar__has-pdf-button":!0,"filter-bar__button-selected":n}),onClick:this.toggleHasPdf},"Has PDF"),a.createElement("div",{className:"filter-bar__sort-selector-container standard-form"},a.createElement(ts,{onChangeSort:this.onChangeSort,options:o.sorts,sort:e.sort})))}}ds(ps,"contextTypes",{queryStore:L.a.instanceOf(ss.a).isRequired,router:L.a.object.isRequired});var ms=r(968);class bs extends a.PureComponent{render(){const e=N()("main-column",this.props.className);return n.a.createElement("main",{className:e},this.props.children)}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(bs,"propTypes",{children:L.a.node,className:L.a.string});var gs=r(869),fs=r(760),_s=r(974),ys=r(953),Es=r(989);class Os extends a.PureComponent{constructor(){super(...arguments),this.state={showMenu:!1}}triggerDropdownMenu(){this.setState({showMenu:!this.state.showMenu})}render(){const e=N()("icon-button dropdown-button dropdown-button--left-anchored",this.props.className);return n.a.createElement("span",{className:e,"data-selenium-selector":this.props.seleniumSelector},n.a.createElement("span",{className:"dropdown-button__content"},this.props.buttonContent),n.a.createElement(Gi.a,{content:this.props.dropdownContent,showMenu:this.state.showMenu},n.a.createElement("span",{className:"icon-wrapper"},n.a.createElement(U.a,{icon:"disclosure",width:"12",height:"12",className:"icon--down"}))))}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Os,"propTypes",{buttonContent:L.a.node.isRequired,className:L.a.string,dropdownContent:L.a.node.isRequired,seleniumSelector:L.a.string.isRequired});var Ss=r(731),vs=r(730),Cs=r(780),ws=r(160);function Ps(){return(Ps=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function Ns(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xs(e){let t;switch(e){case ws.a.ARXIV:case ws.a.S2:case ws.a.EDUCAUSE:t="fa-pdf";break;default:t="fa-link-out"}return{icon:t,width:"15",height:"15"}}class Rs extends a.PureComponent{getLinkClickHandler(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const{onLinkClick:a}=this.props;return()=>{a(...t)}}getPropsForLink(e){let{linkType:t,url:r}=e;return{onClick:this.getLinkClickHandler({linkType:t,linkUrl:r}),onContextMenu:this.getLinkClickHandler({linkType:t,linkUrl:r,isRightClick:!0}),target:"_blank",href:r}}getPrimaryExternalLink(){const{paper:e,className:t}=this.props,r=e.links.first(),a=Cs.g(r.url);return n.a.createElement(Ss.b,{heapProps:{id:vs.t,"link-type":r.linkType,"direct-pdf-link":a,"unpaywall-link":!1,"primary-link":!0,"paper-id":e.id}},n.a.createElement(Uo.a,Ps({tagName:"a",className:N()("paper-link",t),iconProps:xs(r.linkType),seleniumSelector:"paper-link",text:Cs.e(r)},this.getPropsForLink(r))))}getExternalLink(e){const t=Cs.e(e);return n.a.createElement("li",{key:e.url},n.a.createElement("a",Ps({"data-selenium-selector":"paper-link",className:"flex-row-vcenter paper-link"},this.getPropsForLink(e)),n.a.createElement(U.a,xs(e.linkType)),t))}getExternalLinkList(e){return n.a.createElement("ul",{className:"paper-link-list truncate-line"},e.map(e=>this.getExternalLink(e)))}renderLinks(e,t){return t.isEmpty()?e:n.a.createElement(Os,{buttonContent:e,className:N()("paper-link-dropdown",this.props.className),dropdownContent:this.getExternalLinkList(t),seleniumSelector:"paper-links-dropdown"})}render(){const{paper:{links:e}}=this.props;return e.isEmpty()?null:this.renderLinks(this.getPrimaryExternalLink(),e.slice(1))}}Ns(Rs,"contextTypes",{dispatcher:L.a.instanceOf(di.a).isRequired,router:L.a.object.isRequired}),Ns(Rs,"propTypes",{className:L.a.string,paper:L.a.instanceOf(oe.a),onLinkClick:L.a.func.isRequired});var js=r(808),Ts=r(804),As=r(156),Is=r(157),Fs=r(237);function ks(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ds(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ks(Object(r),!0).forEach((function(t){Ls(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ks(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ls(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class qs extends a.PureComponent{constructor(){super(...arguments),this.handleCiteClick=this.handleCiteClick.bind(this),this.handlePaperLinkClick=this.handlePaperLinkClick.bind(this),this.handleLibraryClick=this.handleLibraryClick.bind(this),this.getBaseClickContext=this.getBaseClickContext.bind(this);const{feedAnnotationsStore:e,feedListStore:t}=this.context;this.state=Ds({},this.getStateFromfeedAnnotationsStore(),{},this.getStateFromFeedListStore()),e.registerComponent(this,()=>{this.setState(this.getStateFromfeedAnnotationsStore())}),t.registerComponent(this,()=>{this.setState(this.getStateFromFeedListStore())})}getStateFromfeedAnnotationsStore(){const e=this.context.feedAnnotationsStore,t=e.hasAnonymousAnnotations(),r=this.props.paper.id;return{paperIsAnonymouslyAnnotated:e.isPaperAnonymouslyAnnotated(r),anonymousFeedInProgress:t}}getStateFromFeedListStore(){return{userHasFeed:this.context.feedListStore.hasFeeds()}}getBaseClickContext(){const{paper:e,rowIndex:t}=this.props,r=[this.context.queryStore,{paperSha:e.id,paperIndex:t}];return Object(Fs.a)(...r)}handleCiteClick(){const{trackActionClick:e,paper:t}=this.props;Object(Fs.c)(Ds({},this.getBaseClickContext())),e("CITE"),this.context.dispatcher.dispatch(Object(Lr.b)({id:Dr.b.CITE,data:t}))}handlePaperLinkClick(e){const{paper:t}=this.props;k()(t.primaryPaperLink&&"object"==typeof t.primaryPaperLink,"handlePaperLinkClick called without primaryPaperLink"),Object(Fs.e)(Ds({},this.getBaseClickContext(),{linkType:t.primaryPaperLink.linkType,linkUrl:t.primaryPaperLink.url})),this.props.trackActionClick("PAPER_LINK",e)}handleLibraryClick(){Object(Fs.d)(Ds({},this.getBaseClickContext()))}render(){const{trackActionClick:e,paper:t}=this.props,{userHasFeed:r,paperIsAnonymouslyAnnotated:a,anonymousFeedInProgress:o}=this.state,i=r||a||o;return n.a.createElement("div",{className:"paper-actions flex-row"},n.a.createElement(Rs,{onLinkClick:this.handlePaperLinkClick,paper:t}),n.a.createElement(ys.a,{paper:t,onClick:this.handleCiteClick}),n.a.createElement(js.a,{paper:t,onSaveClick:this.handleLibraryClick,trackLibraryClick:e}),n.a.createElement(Ts.a,null,n.a.createElement(At.b,null,i&&n.a.createElement(Es.a,{paper:t}))))}}Ls(qs,"contextTypes",{feedAnnotationsStore:L.a.instanceOf(As.a).isRequired,feedListStore:L.a.instanceOf(Is.a).isRequired,queryStore:L.a.instanceOf(ss.a).isRequired,dispatcher:L.a.instanceOf(di.a).isRequired}),Ls(qs,"propTypes",{rowIndex:L.a.number.isRequired,paper:L.a.object.isRequired,trackActionClick:L.a.func.isRequired});var Ms=r(978),Hs=r(794);class zs extends a.PureComponent{render(){return n.a.createElement("div",{className:"histogram__explanation",dangerouslySetInnerHTML:{__html:this.props.html}})}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(zs,"propTypes",{html:L.a.string.isRequired});class Us extends a.PureComponent{render(){return n.a.createElement("h4",{className:"histogram__title"},this.props.text)}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Us,"propTypes",{text:L.a.string.isRequired});var Vs=r(739);class Bs extends a.PureComponent{renderExplanation(){const e=Math.round(100*this.props.citationStats.citationAcceleration.value),t=es.a.getString("citations.acceleration.text",e,this.props.citationStats.citationVelocity.lastYear,this.props.citationStats.citationVelocity.lastYear-1);return n.a.createElement(zs,{html:t})}renderTitle(){if(this.props.hideLegendTitle)return null;{const e=es.a.getString("citations.acceleration.label",Vs.e(this.props.citationStats.citationAcceleration.value));return n.a.createElement(Us,{text:e})}}renderHistogram(){const e=this.props.citationStats.citedByBuckets.findIndex(e=>e.startKey==this.props.citationStats.citationVelocity.lastYear),t=e-1,r=this.props.citationStats.citedByBuckets.slice(t,e+1),a=[{buckets:r,renderer:Hs.a.bucketRenderers.selectedBuckets}];return n.a.createElement("div",{className:"histogram__chart"},n.a.createElement(Hs.a,{id:this.props.id,bucketRenderers:a,renderPopover:!0,renderAxis:!0,width:this.props.width,height:Hs.a.DEFAULT_HEIGHT,paddingLeftPx:Hs.a.DefaultPaddingPx.LEFT,paddingRightPx:Hs.a.DefaultPaddingPx.RIGHT,paddingTopPx:Hs.a.DefaultPaddingPx.TOP,paddingBottomPx:Hs.a.DefaultPaddingPx.BOTTOM,enableBarHoverEffect:!1,minDisplayYears:r.size,popoverLabel:es.a.getString("citations.histogram.popoverLabel")}),n.a.createElement("div",{className:"histogram__axis-label"},es.a.getString("citations.totalByYear.label")))}render(){const e=N()("box citation-histogram",{"histogram--horizontal":"horizontal"===this.props.layout});return"horizontal"===this.props.layout?n.a.createElement("div",{className:e},this.renderHistogram(),n.a.createElement("div",{className:"histogram__text"},this.renderTitle(),this.renderExplanation())):n.a.createElement("div",{className:e},this.renderTitle(),this.renderHistogram(),this.renderExplanation())}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Bs,"propTypes",{id:L.a.string.isRequired,entityId:L.a.string.isRequired,citationStats:L.a.object.isRequired,width:L.a.number.isRequired,searchResultIndex:L.a.number,hideLegendTitle:L.a.bool,layout:L.a.string});class Ys extends a.PureComponent{renderExplanation(){const e=Math.round(this.props.citationStats.citationVelocity.value),t=es.a.getString("citations.average",e,this.props.citationStats.citationVelocity.firstYear,this.props.citationStats.citationVelocity.lastYear);return n.a.createElement(zs,{html:t})}renderTitle(){if(this.props.hideLegendTitle)return null;{const e=es.a.getString("citations.velocity.label",Vs.f(this.props.citationStats.citationVelocity));return n.a.createElement(Us,{text:e})}}renderHistogram(){const e=this.props.citationStats.citedByBuckets.findIndex(e=>e.startKey==this.props.citationStats.citationVelocity.firstYear),t=e+this.props.citationStats.citationVelocity.lastYear-this.props.citationStats.citationVelocity.firstYear,r=this.props.citationStats.citedByBuckets.slice(e,t+1),a=[{buckets:r,renderer:Hs.a.bucketRenderers.selectedBuckets}];return n.a.createElement("div",{className:"histogram__chart"},n.a.createElement(Hs.a,{id:this.props.id,bucketRenderers:a,renderPopover:!0,renderAxis:!0,width:this.props.width,height:Hs.a.DEFAULT_HEIGHT,paddingLeftPx:Hs.a.DefaultPaddingPx.LEFT,paddingRightPx:Hs.a.DefaultPaddingPx.RIGHT,paddingTopPx:Hs.a.DefaultPaddingPx.TOP,paddingBottomPx:Hs.a.DefaultPaddingPx.BOTTOM,enableBarHoverEffect:!1,minDisplayYears:r.size,popoverLabel:es.a.getString("citations.histogram.popoverLabel")}),n.a.createElement("div",{className:"histogram__axis-label"},es.a.getString("citations.totalByYear.label")))}render(){const e=N()("box citation-histogram",{"histogram--horizontal":"horizontal"===this.props.layout});return"horizontal"===this.props.layout?n.a.createElement("div",{className:e},this.renderHistogram(),n.a.createElement("div",{className:"histogram__text"},this.renderTitle(),this.renderExplanation())):n.a.createElement("div",{className:e},this.renderTitle(),this.renderHistogram(),this.renderExplanation())}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Ys,"propTypes",{id:L.a.string.isRequired,entityId:L.a.string.isRequired,citationStats:L.a.object.isRequired,width:L.a.number.isRequired,searchResultIndex:L.a.number,hideLegendTitle:L.a.bool,layout:L.a.string});class Ks extends a.PureComponent{renderTitle(){const e=Vs.g(Math.round(this.props.citationStats.numCitations.value)),t=this.props.hideLegendTitle?null:"".concat(e," ").concat(es.a.getString("citations.estimatedTotal.label"));return t?n.a.createElement(Us,{text:t}):null}renderExplanation(){let e;if(this.props.citationStats.numCitations.shouldDisplay()){e=es.a.getString("citations.estimatedTotal.text",this.props.type||"publication","<strong>".concat(zi.e(Math.round(this.props.citationStats.numCitations.value)),"</strong>"))}else e=es.a.getString("citations.estimatedTotal.insufficientData");return n.a.createElement(zs,{html:e})}renderHistogramContent(){const e=[{buckets:this.props.citationStats.citedByBuckets,renderer:Hs.a.bucketRenderers.selectedBuckets}],t=(new Date).getFullYear();return n.a.createElement("div",{className:"histogram__chart"},n.a.createElement(Hs.a,{id:this.props.id,bucketRenderers:e,renderPopover:!0,renderAxis:!0,width:this.props.width,height:Hs.a.DEFAULT_HEIGHT,paddingLeftPx:"number"==typeof this.props.paddingLeftPx?this.props.paddingLeftPx:Hs.a.DefaultPaddingPx.LEFT,paddingRightPx:"number"==typeof this.props.paddingRightPx?this.props.paddingRightPx:Hs.a.DefaultPaddingPx.RIGHT,paddingTopPx:"number"==typeof this.props.paddingTopPx?this.props.paddingTopPx:Hs.a.DefaultPaddingPx.TOP,paddingBottomPx:"number"==typeof this.props.paddingBottomPx?this.props.paddingBottomPx:Hs.a.DefaultPaddingPx.BOTTOM,highlightRecentYears:!1,enableBarHoverEffect:!1,minMaxYear:t,popoverLabel:es.a.getString("citations.histogram.popoverLabel")}),n.a.createElement("div",{className:"histogram__axis-label"},es.a.getString("citations.totalByYear.label")))}render(){const e=N()("box citation-histogram",{"histogram--horizontal":"horizontal"===this.props.layout});return"horizontal"===this.props.layout?n.a.createElement("div",{className:e},this.props.citationStats.numCitations.shouldDisplay()?this.renderHistogramContent():null,n.a.createElement("div",{className:"histogram__text"},this.renderTitle(),this.renderExplanation())):n.a.createElement("div",{className:e},this.renderTitle(),this.props.citationStats.numCitations.shouldDisplay()?this.renderHistogramContent():null,this.renderExplanation())}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Ks,"propTypes",{id:L.a.string.isRequired,entityId:L.a.string.isRequired,citationStats:L.a.object.isRequired,type:L.a.string,width:L.a.number.isRequired,searchResultIndex:L.a.number,hideLegendTitle:L.a.bool,layout:L.a.string,paddingLeftPx:L.a.number,paddingRightPx:L.a.number,paddingTopPx:L.a.number,paddingBottomPx:L.a.number});var Ws=r(750),Qs=r(169),Gs=r(233),Xs=r(792);function Js(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Zs extends a.PureComponent{constructor(){super(...arguments),this.trackStatHoverEvent=this.trackStatHoverEvent.bind(this)}trackStatHoverEvent(e){const t=this.context.analyticsLocation;if(t){const{id:r,index:a}=this.props,n=kt.a.getIn(t,"STAT");Object(Ht.a)(Xs.a.create(n,{statName:e,id:r,index:a}))}else g.a.warn("You need to add analyticsLocation to context so that we know where this action event happened.")}hasStats(){return this.props.citationStats.citationVelocity.shouldDisplay()||this.props.citationStats.hasKeyCitations()||this.props.externalContentStats.length>0}statCssClass(e){let t="search-result__stat";return this.props.showSortStat&&(t=N()("search-result__stat",{"is-active":this.context.queryStore.getQuery().sort===e})),t}renderCitationVelocity(){if(this.props.citationStats.citationVelocity.shouldDisplay()){const e=n.a.createElement(Ys,{width:350,id:this.props.id+"Popover",citationStats:this.props.citationStats,entityId:this.props.id,searchResultIndex:this.props.index});return n.a.createElement("li",{className:this.statCssClass(cs.a.CITATION_VELOCITY.id),"data-selenium-selector":"search-result-citation-velocity"},n.a.createElement(Ws.a,{tooltipClassName:"tooltip--default-size",tooltipContent:e,tooltipPosition:"bottom-left",onShow:()=>{this.trackStatHoverEvent("Citation Velocity")}},n.a.createElement(U.a,{width:"15",height:"15",icon:"chart",className:"fill--orange"}),Vs.f(this.props.citationStats.citationVelocity)))}return null}renderInfluentialCitations(){if(this.props.citationStats.hasKeyCitations()){const e=this.props.citationStats.numKeyCitations,t=es.a.getString("citations.influential.text"),r=zi.l(e,es.a.getString("citations.influential.label")),a=n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,r),n.a.createElement(je.a,{content:t}));return n.a.createElement("li",{className:this.statCssClass(cs.a.INFLUENTIAL_CITATIONS.id),"data-selenium-selector":"search-result-influential-citations"},n.a.createElement(Ws.a,{tooltipClassName:"tooltip--default-size",className:"flex-row-vcenter",tooltipContent:a,tooltipPosition:"bottom-left",onShow:()=>{this.trackStatHoverEvent("Highly Influential Citation")}},n.a.createElement(U.a,{icon:"theorems",width:"12",height:"12",className:"fill--orange"}),zi.e(this.props.citationStats.numKeyCitations)))}return null}renderCitationAcceleration(){if(this.props.citationStats.citationAcceleration.shouldDisplay()){const e=this.props.citationStats.citationAcceleration.value,t=n.a.createElement(Bs,{width:350,id:this.props.id+"Popover",citationStats:this.props.citationStats,entityId:this.props.id,searchResultIndex:this.props.index});let r="trending-neutral";return e>0&&(r="trending-up"),e<0&&(r="trending-down"),n.a.createElement("li",{className:this.statCssClass(cs.a.CITATION_ACCELERATION.id),"data-selenium-selector":"search-result-citation-acceleration"},n.a.createElement(Ws.a,{tooltipClassName:"tooltip--default-size",tooltipContent:t,tooltipPosition:"bottom-left",onShow:()=>{this.trackStatHoverEvent("Citation Acceleration")}},n.a.createElement(U.a,{icon:r,width:"15",height:"15",className:"fill--orange"}),Vs.e(e)))}return null}renderTotalCitations(){if(this.props.citationStats.numCitations.shouldDisplay()){const e=n.a.createElement(Ks,{width:350,id:this.props.id+"Popover",citationStats:this.props.citationStats,entityId:this.props.id,searchResultIndex:this.props.index});return n.a.createElement("li",{className:this.statCssClass(cs.a.TOTAL_CITATIONS.id),"data-selenium-selector":"search-result-total-citations"},n.a.createElement(Ws.a,{tooltipClassName:"tooltip--default-size",className:"flex-row-vcenter",tooltipContent:e,tooltipPosition:"bottom-left"},n.a.createElement(U.a,{icon:"cited-by",width:"15",height:"15",className:"fill--orange"}),Vs.g(this.props.citationStats.numCitations.value)))}return null}renderExternalContentStats(){const e=this.props.externalContentStats.find(e=>e.contentType===Qs.a.VIDEO),t=void 0!==e?e.count:0,r=es.a.getString("externalContent.video.videoStatText"),a=zi.l(t,es.a.getString("externalContent.video.videoStatHeader")),o=n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,n.a.createElement(je.a,{content:a})),r);if(this.props.externalContentStats)return void 0!==e?n.a.createElement("li",{className:this.statCssClass(cs.a.VIDEO_CONTENT),"data-selenium-selector":"search-result-video"},n.a.createElement(Ws.a,{tooltipClassName:"tooltip--default-size",className:"flex-row-center",tooltipContent:o,tooltipPosition:"bottom-left",onShow:()=>{this.trackStatHoverEvent("Video Content")}},n.a.createElement(U.a,{icon:"video-filled",width:"15",height:"15",className:"fill--orange"}),t)):null}renderSortStat(){if(!this.props.showSortStat)return null;switch(this.context.queryStore.getQuery().sort){case cs.a.TOTAL_CITATIONS.id:return this.renderTotalCitations();case cs.a.CITATION_ACCELERATION.id:return this.renderCitationAcceleration();default:return null}}render(){return this.hasStats()?n.a.createElement("div",{className:"search-result__stats flex-row"},this.renderInfluentialCitations(),this.renderCitationVelocity(),this.renderSortStat(),this.renderExternalContentStats()):null}}function $s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ec(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Js(Zs,"propTypes",{citationStats:L.a.object.isRequired,id:L.a.string.isRequired,index:L.a.number.isRequired,showSortStat:L.a.bool,externalContentStats:L.a.objectOf(Gs.a)}),Js(Zs,"contextTypes",{queryStore:L.a.instanceOf(ss.a).isRequired,analyticsLocation:L.a.object});class tc extends a.PureComponent{constructor(){super(...arguments),ec(this,"trackActionClick",(e,t)=>{this.handleAnalyticsEvent("Action",e,t)})}handleAnalyticsEvent(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=this.context.analyticsLocation,{index:n,result:o}=this.props,i=o.id;if(a){const o=kt.a.getIn(a,e,t),s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$s(Object(r),!0).forEach((function(t){ec(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r,{index:n,paperId:i});Object(Ht.a)(ra.a.create(o,s))}else g.a.warn("You need to add analyticsLocation to context so that we know where this action event happened.")}render(){const{className:e,index:t,onTitleClick:r,children:n,result:o,layout:i}=this.props,s=a.createElement(a.Fragment,null,a.createElement(Zs,{citationStats:o.citationStats,externalContentStats:o.externalContentStats,id:o.id,index:t,showSortStat:i.showSortStat}),a.createElement(qs,{paper:o,rowIndex:t,trackActionClick:this.trackActionClick}));return a.createElement(Ms.a,{paper:o,index:t,onTitleClick:r,className:e,children:n,paperActions:s})}}ec(tc,"contextTypes",{analyticsLocation:L.a.object}),ec(tc,"propTypes",{result:L.a.object.isRequired,index:L.a.number.isRequired,layout:L.a.object.isRequired,onTitleClick:L.a.func,className:L.a.string});class rc extends a.PureComponent{render(){const{side:e,className:t,children:r}=this.props;return n.a.createElement("section",{className:"sidebar sidebar-".concat(e)},n.a.createElement("div",{className:N()("column-wrapper",t)},r))}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(rc,"propTypes",{className:L.a.string,side:L.a.string.isRequired,children:L.a.node});var ac=r(59),nc=r(50),oc=r(227),ic=r.n(oc);function sc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function cc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class lc extends a.PureComponent{constructor(e,t){super(e,t),cc(this,"onClickShowPublications",()=>{this.setState({showPublications:!0,showInfluenceGraph:!1})}),cc(this,"onClickShowInfluenceGraph",()=>{this.setState({showPublications:!1,showInfluenceGraph:!0})}),cc(this,"loadPage",e=>{if(e!==this.state.query.page){let t=ic.a.findDOMNode(this),r=null;t instanceof HTMLElement&&(r=ac.a.offsetFromBody(t)),ac.a.scrollTop(this.props.layoutOptions.scrollToTopOfPage?0:r),this.context.queryStore.routeToPage(e,this.context.router)}}),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sc(Object(r),!0).forEach((function(t){cc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({showPublications:!0,showInfluenceGraph:!1},this.stateFromQueryStore()),t.queryStore.registerComponent(this,()=>{this.setState(this.stateFromQueryStore())})}stateFromQueryStore(){const e=this.context.queryStore._state;return{queryStoreState:e,query:this.context.queryStore._query,response:this.context.queryStore._response,isFiltering:e===nc.a.FILTERING}}componentDidUpdate(e,t){if(!X.a.is(t.response,this.state.response)&&!this.state.response.results.isEmpty()){const e=ac.a.scrollTop(),t=this.refs["search-result-".concat(this.state.response.results.size-1)];if(t){const r=ac.a.offsetFromBody(t);r<e&&ac.a.scrollTop(r-20)}}}renderResults(){const{layoutOptions:{searchResultLayout:e}}=this.props,{query:t,response:{results:r}}=this.state;return r.map((r,n)=>a.createElement(tc,{result:r,key:r.id,index:(t.page-1)*t.pageSize+n,ref:"search-result-".concat(n),layout:e}))}renderNoResults(){const{querySuggestions:e}=this.state.response,t=!(e&&!e.isEmpty())?void 0:e.first().text;return a.createElement(Ai.a,{query:this.state.query.queryString,hasFacets:this.state.response.hasFacets(),suggestedQuery:t})}renderAuthor(){const{isFiltering:e,response:t,query:r,showPublications:n,showInfluenceGraph:o}=this.state,{layoutOptions:i,author:s,claimedAuthorId:c}=this.props,{results:u,matchedAuthors:h}=t;return a.createElement(ji,null,a.createElement(rc,{className:"filter",side:"left"},a.createElement(Ri.a,null),a.createElement(Wi.a,{feature:e=>e.AuthorRecommendations},a.createElement(Qi.a,null,a.createElement(_s.a,{experiment:Ir.b.AuthorRecommendationsUX,eligibilityTest:()=>s.skipperExperiments.memberOf(Ir.b.AuthorRecommendationsData.KEY)},a.createElement(Ti.a,null,null),a.createElement(Ti.b,{variation:"local_hint"},()=>a.createElement(Ki,{author:s})),a.createElement(Ti.b,{variation:"global_hint"},()=>a.createElement(Ki,{author:s,useGlobalExplanation:!0})))))),a.createElement(bs,{className:"results"},a.createElement("div",{className:"author-page-content-tabs"},a.createElement("ul",{className:"author-page-content-tabs__list"},a.createElement("li",{key:"publications",onClick:this.onClickShowPublications,className:N()({"is-active":n})},a.createElement(U.a,{icon:"tab-papers",width:"9",height:"12"}),Object(l.b)(e=>e.author.tabs.papers)),a.createElement("li",{key:"influence",onClick:this.onClickShowInfluenceGraph,className:N()({"is-active":o})},a.createElement(U.a,{icon:"tab-influence",width:"21",height:"21"}),a.createElement("span",{className:"author-page-content-tab__influence-label"},Object(l.b)(e=>e.author.tabs.influence))))),h.isEmpty()?null:a.createElement(gs.a,{queryString:r.queryString,authors:h}),n&&a.createElement(a.Fragment,null,a.createElement(ps,{layoutOptions:i}),a.createElement("hr",{className:"author-page-divider"}),a.createElement("div",{className:"author-page-content__claim-ad"},!c&&!s.isClaimedByAuthor&&a.createElement(xi,null)),a.createElement("div",{className:N()("result-page",{"is-filtering":e})},u.isEmpty()?this.renderNoResults():this.renderResults()),a.createElement("div",{className:"flex-row"},t.totalPages>1&&a.createElement(fs.a,{className:"flex-right",loadPage:this.loadPage,pageNumber:r.page,totalPages:t.totalPages}))),o&&a.createElement(ms.a,{author:s})))}render(){const{queryStoreState:e}=this.state;return e===nc.a.LOADING?a.createElement("section",{className:"content",role:"main",id:"main-content"},a.createElement("div",{className:"container loading-controls flex-row-vcenter"},a.createElement(me.a,{seleniumSelector:"icon-loading-serp"})," Loading results")):a.createElement("section",{className:"content"},this.renderAuthor())}}cc(lc,"contextTypes",{queryStore:L.a.instanceOf(ss.a).isRequired,router:L.a.object.isRequired});var uc=r(856);class hc extends a.PureComponent{render(){const{author:e,claimedAuthorId:t}=this.props,r=new hs({showSortExplanation:!0,filtersExpandedByDefault:!0,showResultCount:!1,sortDisplayType:"tabs",scrollToTopOfPage:!1,searchResultLayout:{showSortStat:!0},sorts:cs.a.authorPaperSearch()});return a.createElement("div",{className:"author-page-content-section"},a.createElement("div",{className:"author-publications-list"},a.createElement(lc,{layoutOptions:r,author:e,claimedAuthorId:t})))}}var dc=Object(uc.a)(kt.a.AuthorHomePage.Publications)(hc);class pc extends a.PureComponent{constructor(e){super(e)}render(){const{author:e,claimedAuthorId:t}=this.props;return a.createElement(a.Fragment,null,e.isClaimedBySignedInUser&&e.hasPendingCorrections&&a.createElement("div",{className:"author-page__corrections-pending"},a.createElement(U.a,{icon:"status-waiting"}),a.createElement("div",{className:"author-page__corrections-pending__label"},Object(l.b)(e=>e.author.correctionPending.label))),a.createElement("div",{className:"container author-page-content",role:"main"},a.createElement(dc,{author:e,claimedAuthorId:t,ref:"author-search-results"})))}}var mc=r(924),bc=r(1);function gc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function fc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gc(Object(r),!0).forEach((function(t){_c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class yc extends mc.a{static willRouteTo(e,t){e.authorStore.isNewOrCanonicalAuthor(t.params.authorId,t.params.slug)&&e.dispatcher.dispatch({actionType:bc.a.actions.QUERY_UPDATED,query:{}});const r=[ss.a.executeAHPQuery(e,t)];if(e.authStore.hasAuthenticatedUser()){const{api:a}=e,{authorId:n}=t.params;n&&r.push(a.findAlertByQueryTypeAndValue(Gr.c.AUTHOR_PAPER,n),a.findAlertByQueryTypeAndValue(Gr.c.AUTHOR_CITATION,n))}return Promise.all(r)}constructor(){super(...arguments);const{authStore:e,authorStore:t,queryStore:r}=this.context;this.state=fc({},this.getStateFromAuthorStore(),{},this.getStateFromAuthStore()),t.registerComponent(this,()=>{this.setState(this.getStateFromAuthorStore)}),r.registerComponent(this,()=>{this.setState({loading:t.isLoading()||r.isLoading()})}),e.registerComponent(this,()=>{this.setState(this.getStateFromAuthStore())})}getStateFromAuthorStore(){const{authorStore:e,queryStore:t}=this.context;return{loading:e.isLoading()||t.isLoading(),author:e.author}}getStateFromAuthStore(){const{authStore:e}=this.context;return{claimedAuthorId:e.getClaimedAuthorId()}}renderLoading(){return n.a.createElement("div",{className:"flex-row-vcenter loading container",role:"main",id:"main-content"},n.a.createElement(me.a,{seleniumSelector:"icon-loading-ahp"}),"Loading author")}scrollToSearchResults(){const{history:e,route:t}=this.context.router,r=Object(da.l)(t.location.search);if(r.scrollToResults&&!this.state.loading){const a=ic.a.findDOMNode(this.refs["author-search-results"]);a instanceof HTMLElement&&ac.a.smoothScrollTo(a,()=>{e.replace({pathname:t.location.pathname,search:Object(da.a)(fc({},r))})})}}componentDidUpdate(){this.scrollToSearchResults()}componentDidMount(){this.scrollToSearchResults()}render(){const{author:e,claimedAuthorId:t}=this.state;return n.a.createElement("div",{className:"author-page"},n.a.createElement(Jt.a,{showSearchBar:!0}),this.state.loading?this.renderLoading():n.a.createElement("div",{className:"author-page-layout"},n.a.createElement("div",{className:"content"},n.a.createElement(pc,{author:e,claimedAuthorId:t}))),Object(tr.b)(this.props.route.routes),this.state.loading?null:n.a.createElement(la.a,null))}}_c(yc,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,authStore:L.a.instanceOf(fe.a).isRequired,authorStore:L.a.instanceOf(T.a).isRequired,queryStore:L.a.instanceOf(ss.a).isRequired,router:L.a.object.isRequired});var Ec=r(925),Oc=r(886),Sc=r(927),vc=r(928),Cc=r(721);function wc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Pc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wc(Object(r),!0).forEach((function(t){Nc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Nc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class xc extends a.PureComponent{constructor(){super(...arguments),Nc(this,"state",{activeName:null,activeExampleConfig:null,examplePropValues:{},selectedExampleIndex:0}),Nc(this,"_previewRef",null),Nc(this,"onChangeExample",e=>{const{value:t}=e.currentTarget,r=this.state.activeExampleConfig;if(!r)return;const a=parseInt(t,10),n=Object(Sc.b)(r,a);this.setState({selectedExampleIndex:a,examplePropValues:n},()=>{this.replaceQueryString()})}),Nc(this,"onChangeField",(e,t)=>{const{examplePropValues:r}=this.state;t in r&&this.setState({examplePropValues:Pc({},r,{[t]:e})},()=>{this.sendPropsToPreview(this.state.examplePropValues).catch(e=>{g.a.error("Failed to send props to preview",e)})})}),Nc(this,"setPreviewRef",e=>{this._previewRef=e})}componentDidMount(){this.checkAndLoadComponent(this.props,this.state)}componentDidUpdate(){this.checkAndLoadComponent(this.props,this.state)}checkAndLoadComponent(e,t){var r;const a=(null!=(r=e)&&null!=(r=r.match)&&null!=(r=r.params)?r.component:r)||null;a!==t.activeName&&(a?this.loadComponent(a):this.setState({activeName:null,activeExampleConfig:null,examplePropValues:{},selectedExampleIndex:0}))}async loadComponent(e){await Object(ae.c)(this,{activeName:e});const t=vc.a[e]||null;if(!t)return;const r=await t();if(this.state.activeName!==e)return;const a=function(e){var t;const r=((null!=(t=e)&&null!=(t=t.location)?t.search:t)||"").replace(/^\?/,""),{example:a}=To.a.parse(r),n=parseInt(a,10);return isNaN(n)?0:n}(this.props),n=r.exampleConfig||null;this.setState({activeExampleConfig:n,examplePropValues:Object(Sc.b)(n,a),selectedExampleIndex:a})}async sendPropsToPreview(e){var t;const r=(null!=(t=this._previewRef)&&null!=(t=t.contentWindow)?t.updateExampleComponentProps:t)||null;k()(r,"Preview page is not ready to receive props"),await r(Pc({},e))}replaceQueryString(){const{selectedExampleIndex:e}=this.state,t=this.context.router,{history:r,route:a}=t;r.replace({pathname:a.location.pathname,search:To.a.stringify({example:e||0})})}renderMenu(e){return a.createElement(Ac,null,Object.keys(e).map(t=>a.createElement(Ic,{key:t},a.createElement(Tc,null,t),(e=>Array.isArray(e)?a.createElement(Ac,null,e.map(e=>a.createElement(Ic,{key:e},a.createElement(Te.a,{to:"DEBUG_COMPONENT_LIBRARY_COMPONENT",params:{component:e}},e)))):this.renderMenu(e))(e[t]))))}render(){var e,t;const{activeName:r,activeExampleConfig:n,examplePropValues:o,selectedExampleIndex:i}=this.state,s=(null!=(t=n)?t.fields:t)||[],c=(null!=(e=n)?e.examples:e)||[],l=c[i]||null,u=r?Object(Cc.a)(ie.b.DEBUG_COMPONENT_LIBRARY_PREVIEW,{component:r,exampleIndex:i||0}):null;return a.createElement(Rc,null,a.createElement(jc,null,this.renderMenu(vc.b)),a.createElement(Fc,null,a.createElement("h2",null,r||"Choose Component"),a.createElement(kc,{key:u,src:u,ref:this.setPreviewRef}),a.createElement(Dc,null,a.createElement("a",{href:u},"Example: "),a.createElement(Lc,{onChange:this.onChangeExample,value:i||0},c.map((e,t)=>a.createElement(qc,{key:"".concat(e.title,"|").concat(t),value:t},e.title)))),a.createElement(Mc,null,l&&a.createElement(a.Fragment,null,a.createElement(Hc,null,l.desc),s.map(e=>a.createElement(zc,{key:"".concat(l.title,"|").concat(e.name)},a.createElement(Uc,null,a.createElement(Vc,null,e.name),a.createElement(Bc,null,e.desc)),a.createElement(Yc,null,Object(Sc.d)(e,o[e.name],this.onChangeField))))))))}}Nc(xc,"contextTypes",{router:L.a.object.isRequired});const Rc=Ba.b.div.withConfig({displayName:"DebugComponentLibraryPage__Layout",componentId:"sc-1cto3i1-0"})(["display:flex;height:100%;"]),jc=Ba.b.nav.withConfig({displayName:"DebugComponentLibraryPage__Menu",componentId:"sc-1cto3i1-1"})(["flex:0 0 auto;padding:32px 16px;margin-right:16px;height:100%;overflow-y:scroll;"]),Tc=Ba.b.div.withConfig({displayName:"DebugComponentLibraryPage__MenuTitle",componentId:"sc-1cto3i1-2"})(["font-weight:bold;"]),Ac=Ba.b.ul.withConfig({displayName:"DebugComponentLibraryPage__MenuList",componentId:"sc-1cto3i1-3"})(["margin-left:16px;margin-bottom:8px;"]),Ic=Ba.b.li.withConfig({displayName:"DebugComponentLibraryPage__MenuItem",componentId:"sc-1cto3i1-4"})([""]),Fc=Ba.b.div.withConfig({displayName:"DebugComponentLibraryPage__Preview",componentId:"sc-1cto3i1-5"})(["flex:1 1 auto;display:flex;flex-direction:column;"]),kc=Ba.b.iframe.withConfig({displayName:"DebugComponentLibraryPage__PreviewCanvas",componentId:"sc-1cto3i1-6"})(["flex:1 1 auto;"]),Dc=Ba.b.div.withConfig({displayName:"DebugComponentLibraryPage__PreviewExample",componentId:"sc-1cto3i1-7"})([""]),Lc=Ba.b.select.withConfig({displayName:"DebugComponentLibraryPage__ExamplesDropdown",componentId:"sc-1cto3i1-8"})([""]),qc=Ba.b.option.withConfig({displayName:"DebugComponentLibraryPage__ExampleChoice",componentId:"sc-1cto3i1-9"})([""]),Mc=Ba.b.div.withConfig({displayName:"DebugComponentLibraryPage__PreviewForm",componentId:"sc-1cto3i1-10"})(["flex:1 1 auto;margin-top:1em;"]),Hc=Ba.b.div.withConfig({displayName:"DebugComponentLibraryPage__PreviewDesc",componentId:"sc-1cto3i1-11"})([""]),zc=Ba.b.div.withConfig({displayName:"DebugComponentLibraryPage__PreviewField",componentId:"sc-1cto3i1-12"})(["margin-top:6px;"]),Uc=Ba.b.div.withConfig({displayName:"DebugComponentLibraryPage__PreviewFieldMeta",componentId:"sc-1cto3i1-13"})(["display:flex;"]),Vc=Ba.b.div.withConfig({displayName:"DebugComponentLibraryPage__PreviewFieldName",componentId:"sc-1cto3i1-14"})(["flex:0 0 auto;margin-right:16px;font-weight:700;font-family:monospace;"]),Bc=Ba.b.div.withConfig({displayName:"DebugComponentLibraryPage__PreviewFieldDesc",componentId:"sc-1cto3i1-15"})(["flex:1 1 auto;"]),Yc=Ba.b.div.withConfig({displayName:"DebugComponentLibraryPage__PreviewFieldInput",componentId:"sc-1cto3i1-16"})(["margin-left:16px;"]);var Kc=r(926),Wc=r(873);class Qc extends a.PureComponent{render(){const e=Wc.b.keySeq().sort();return a.createElement("div",{style:{margin:"20px"}},a.createElement("h2",null,"Displaying ",Wc.b.size," Sprites"),a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},e.map(e=>a.createElement("div",{key:e,style:{border:"3px solid",margin:"10px",padding:"20px"}},a.createElement(U.a,{icon:e,width:"40",height:"40"}),a.createElement("span",{style:{marginLeft:"10px"}},e)))))}}var Gc=r(148),Xc=r(1078),Jc=r.n(Xc);function Zc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class $c extends a.PureComponent{constructor(){super(...arguments),Zc(this,"getStateFromAuthStore",()=>{const{authStore:e}=this.context,t=e.getAlertEmail();return{displayEmail:t,savedEmail:t,hasVerifiedAlertEmail:e.hasVerifiedAlertEmail(),isValidEmail:Jc.a.validate(t)}}),Zc(this,"onEmailChange",e=>{const t=e.trim();this.setState({displayEmail:t,isValidEmail:Jc.a.validate(t)})}),Zc(this,"reVerify",()=>{const{api:e,messageStore:t}=this.context,r=es.a.getString("alerts.email.verifySuccess",this.state.savedEmail);e.resendVerificationEmail().then(()=>t.addSuccess(r)).catch(()=>t.addError(es.a.getString("error.general-error")))}),Zc(this,"onSubmit",e=>{e.preventDefault();const{api:t,messageStore:r}=this.context,{displayEmail:a,savedEmail:n}=this.state;a!==n&&t.updateUser({alertEmail:a}).then(()=>r.addSuccess(es.a.getString("alerts.email.updateSuccess",a))).catch(()=>r.addError(es.a.getString("error.general-error")))}),Zc(this,"shouldShowVerifyEmailButton",()=>{const{hasVerifiedAlertEmail:e,savedEmail:t,displayEmail:r}=this.state;return!e&&t&&r===t}),Zc(this,"shouldShowUpdateEmailButton",()=>{const{hasVerifiedAlertEmail:e,savedEmail:t,displayEmail:r}=this.state;return""!==t&&t!==r||t===r&&e}),this.state=this.getStateFromAuthStore(),this.context.authStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthStore)})}render(){const{displayEmail:e,savedEmail:t,hasVerifiedAlertEmail:r,isValidEmail:a}=this.state,o=!e||!a,i=N()("button button--primary button--large",{disabled:o}),s=t&&e===t;return n.a.createElement("form",{className:"email-settings",onSubmit:this.onSubmit},n.a.createElement("h4",null,"Email address"),n.a.createElement("div",{className:"flex-container"},n.a.createElement(It.a,{inputClassName:s?"box-border":"",value:e||"",type:"text",onChange:this.onEmailChange,placeholder:es.a.getString("alerts.email.placeholderEmail"),isRequired:!0}),s?n.a.createElement("div",{className:"verification-status-tag"},n.a.createElement("div",{className:"icon-padding"},n.a.createElement(U.a,{icon:r?"check-in-green-circle":"x",className:"verify-icon",width:"18",height:"18"})),es.a.getString("alerts.email.".concat(r?"verifiedEmail":"unverifiedEmail"))):null),""===t?n.a.createElement("button",{className:i,type:"submit",disabled:o},es.a.getString("alerts.email.addEmail")):null,this.shouldShowUpdateEmailButton()?n.a.createElement("button",{className:i,type:"submit",disabled:o||t===e&&r},es.a.getString("alerts.email.updateEmail")):null,this.shouldShowVerifyEmailButton()?n.a.createElement("button",{className:i,onClick:this.reVerify,disabled:!a},es.a.getString("alerts.email.resendEmail")):null)}}Zc($c,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,authStore:L.a.instanceOf(fe.a).isRequired,messageStore:L.a.instanceOf(Gc.a).isRequired});var el=r(967),tl=r(929),rl=r(171),al=r(930),nl=r(984);r(234);class ol extends a.PureComponent{constructor(){super(...arguments),this.state={top:0,bottom:0},this.onScroll=this.onScroll.bind(this)}onScroll(){this.setOffsets(this.getIsActive)}getIsActive(){const e=document.documentElement.scrollHeight-window.innerHeight,t=ac.a.scrollTop(),r=this.props.verticalOffsetPx?t+this.props.verticalOffsetPx:t,{top:a,bottom:n}=this.state;(r>=a&&r<=n||r>=e)&&this.props.onActive&&this.props.onActive()}setOffsets(e){const t=ac.a.offsetFromBody(this.refs.container);this.setState({top:t,bottom:t+this.refs.container.scrollHeight},e)}componentDidMount(){this.setOffsets(this.getIsActive),ac.a.listenForScroll(this.onScroll)}componentWillUnmount(){ac.a.stopListeningForScroll(this.onScroll)}render(){return n.a.createElement("div",{ref:"container"},this.props.children)}}function il(){return(il=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(ol,"propTypes",{onActive:L.a.func,verticalOffsetPx:L.a.number,children:Object(zi.n)(L.a.element,L.a.arrayOf(L.a.element))});class sl extends a.PureComponent{constructor(){super(...arguments),this.state={stuck:!1},this.onScroll=this.onScroll.bind(this)}onScroll(){this.setState({stuck:ac.a.scrollTop()>this._breakpoint})}componentDidMount(){this._breakpoint=ac.a.offsetFromBody(this.refs.container)-this.props.offset,ac.a.listenForScroll(this.onScroll)}componentWillUnmount(){ac.a.stopListeningForScroll(this.onScroll)}render(){let e=this.props.className||"";this.state.stuck&&(e+=" is-stuck");const t=this.state.stuck?{position:"fixed",top:this.props.offset||0}:null;return n.a.createElement("div",il({},this.props,{className:e,ref:"container",style:t}),this.props.children)}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(sl,"propTypes",{offset:L.a.number,className:L.a.string,children:L.a.any});class cl extends a.PureComponent{static propTypes(){return{name:L.a.string.isRequired,href:n.a.Proptypes.string.isRequired,isActive:L.a.bool}}constructor(){super(...arguments),this.trackNavClick=this.trackNavClick.bind(this)}trackNavClick(){Object(Ht.a)(ra.a.create(kt.a.STICKY_NAV,{section:this.props.name}))}render(){const e="#".concat(this.props.href),t=N()("sticky-nav__item",{"is-active":this.props.isActive});return n.a.createElement("li",{className:t},n.a.createElement("a",{className:"sticky-nav__item__link flex-row-vcenter",href:e,onClick:this.trackNavClick},this.props.name))}}class ll extends a.PureComponent{render(){const e=N()("sticky-nav",this.props.className),t=this.props.navSections&&this.props.navSections.map((e,t)=>n.a.createElement(cl,{key:"sticky-nav-".concat(t),name:e.get("name"),href:e.get("id"),isActive:e.get("id")===this.props.activeNavId}));return n.a.createElement(sl,{offset:70},n.a.createElement("nav",{className:e},n.a.createElement("ul",{"data-selenium-selector":"sticky-nav-items"},t)))}}var ul=r(951);function hl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function dl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class pl extends tl.a{static getPageTitle(){const e=es.a.getString("faq.title"),t=es.a.getString("general.appName");return"".concat(e," | ").concat(t)}constructor(e,t){super(e,t),dl(this,"onChangeActiveNav",e=>{this.state.activeNavId!==e&&(this.state.viewedSections.has(e)?this.setState({activeNavId:e}):(this.setState({activeNavId:e,viewedSections:this.state.viewedSections.add(e)}),Object(Ht.a)(ul.a.create(kt.a.STICKY_NAV,{section:e}))))}),dl(this,"onActiveNavClick",e=>{this.setState({activeNavId:e})}),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hl(Object(r),!0).forEach((function(t){dl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({activeNavId:"about",viewedSections:X.a.Set().add("about")},this.getStateFromContentfulStore(),{},this.getStateFromWeblabStore()),this.onActiveNavClick=this.onActiveNavClick.bind(this),this.onChangeActiveNav=this.onChangeActiveNav.bind(this),this.context.contentfulStore.registerComponent(this,()=>{this.setState(this.getStateFromContentfulStore())}),this.context.weblabStore.registerComponent(this,()=>{this.setState(this.getStateFromWeblabStore())})}getStateFromContentfulStore(){return{faq:this.context.contentfulStore.getFAQ()}}getStateFromWeblabStore(){return{isFAQFromContentful:this.context.weblabStore.isFeatureEnabled(Dt.b.FAQFromContentful)}}componentDidMount(){this.initializeContentful()}componentDidUpdate(){this.initializeContentful()}initializeContentful(){const e=this.context.contentfulStore;this.state.isFAQFromContentful&&e.isUninitialized()&&e.initialize()}render(){const e=this.state.isFAQFromContentful?this.state.faq:es.a.getValuesAsArray("faq.sections"),t=e&&e.map(e=>{const t=e.get("name");return a.createElement(ol,{key:t,onActive:()=>{this.onChangeActiveNav(e.get("id"))},verticalOffsetPx:80},a.createElement(nl.a,{title:t,id:e.get("id"),questions:e.get("questions"),verticalOffsetPx:80}))});return a.createElement("div",{className:"faq-page"},a.createElement(Jt.a,{showSearchBar:!0}),a.createElement("section",{className:"content",role:"main",id:"main-content"},a.createElement("div",{className:"container"},a.createElement(al.a,{title:es.a.getString("faq.title")}),a.createElement(ji,null,a.createElement(rc,{side:"left"},a.createElement(ll,{activeNavId:this.state.activeNavId,navSections:e,className:"sticky-nav--left",onClick:this.onActiveNavClick})),a.createElement(bs,{className:"faq-content"},t)))),a.createElement(la.a,null))}}dl(pl,"contextTypes",{contentfulStore:L.a.instanceOf(rl.a).isRequired,weblabStore:L.a.instanceOf(er.b).isRequired});var ml=r(980),bl=r(816),gl=r(972),fl=r(975),_l=r(969),yl=r(973),El=r(937),Ol=r(761),Sl=r(941),vl=r(942),Cl=r(986),wl=r(938),Pl=r(940),Nl=r(810),xl=r(876),Rl=r(943);class jl extends a.PureComponent{render(){return n.a.createElement(Nl.a,{className:"hero"},n.a.createElement(Jt.a,{sticky:!1,showSearchBar:!1}),n.a.createElement("div",{className:"hero-content",role:"main",id:"main-content"},n.a.createElement("div",{className:"container"},n.a.createElement("h1",null,Object(l.b)(e=>e.home.headline)),n.a.createElement("h2",null,Object(l.b)(e=>e.home.subHeadline)),n.a.createElement(xl.a,{autoFocus:!0}),n.a.createElement(Rl.a,{queries:this.props.sampleQueries})),n.a.createElement(wl.a,null),n.a.createElement(Pl.a,null)))}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(jl,"propTypes",{sampleQueries:L.a.instanceOf(G.List).isRequired});var Tl=r(970),Al=r(950),Il=r(110),Fl=r(812),kl=r(209);function Dl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ll(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ql extends a.PureComponent{static async willRouteTo(e){if(e.queryStore.reset(),e.sampleQueriesStore.sampleQueries.isEmpty())return e.api.fetchSampleQueries()}constructor(){super(...arguments),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dl(Object(r),!0).forEach((function(t){Ll(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromSampleQueriesStore()),this.context.sampleQueriesStore.registerComponent(this,()=>{this.setState(this.getStateFromSampleQueriesStore())}),this.context.weblabStore.registerComponent(this,()=>{this.setState(this.getStateFromSampleQueriesStore())})}componentDidMount(){var e;const t=this.context.router;Object(da.l)((null!=(e=t)&&null!=(e=e.route)&&null!=(e=e.location)?e.search:e)||"").signIn&&!this.context.authStore.hasAuthenticatedUser()&&this.context.dispatcher.dispatch(Object(Lr.b)({id:Dr.b.SIGNUP,location:Il.f.navBar}))}getStateFromSampleQueriesStore(){return{sampleQueries:this.context.sampleQueriesStore.sampleQueries}}render(){const{sampleQueries:e}=this.state;return a.createElement(Ol.a,{heapProps:{"page-type":Fl.a,"relevance-bucket":"featured"}},a.createElement("div",{className:"home-page"},a.createElement(jl,{sampleQueries:e}),a.createElement(Tl.a,null),a.createElement(El.a,null),a.createElement(Sl.a,null),a.createElement(vl.a,null),a.createElement(Al.a,null),a.createElement(Cl.a,null),a.createElement(la.a,null)))}}Ll(ql,"getPageTitle",()=>Object(l.b)(e=>e.home.pageTitle)),Ll(ql,"getPageMetaDescription",()=>Object(l.b)(e=>e.home.metaDescription)),Ll(ql,"getCanonicalUrl",()=>"/"),Ll(ql,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,authStore:L.a.instanceOf(fe.a).isRequired,dispatcher:L.a.instanceOf(di.a).isRequired,router:L.a.object.isRequired,sampleQueriesStore:L.a.instanceOf(kl.a).isRequired,weblabStore:L.a.instanceOf(er.b).isRequired});var Ml=r(751),Hl=r(756);function zl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ul extends a.PureComponent{renderPaperLink(){const{linkOpenInNewTab:e,paper:t}=this.props,{id:r,slug:a,title:o}=t;if(e){const e=Object(ie.d)({routeName:"PAPER_DETAIL",params:{paperId:r,slug:a}});return n.a.createElement(Ma.a,{href:e},n.a.createElement("span",{className:"paper-lite__metadata-title"},o))}return n.a.createElement(Te.a,{"data-selenium-selector":"title-link",to:"PAPER_DETAIL",params:{paperId:r,slug:a}},n.a.createElement("span",{className:"paper-lite__metadata-title"},o))}render(){const{displayAbstract:e,paper:t}=this.props,{authors:r,paperAbstract:a,venue:o,year:i}=t;return n.a.createElement("div",null,this.renderPaperLink(),n.a.createElement("div",{className:"paper-lite__metadata"},n.a.createElement(Ml.a,{authors:r}),o?n.a.createElement("span",{className:"paper-lite__metadata-item"},"  ",o):null,i?n.a.createElement("span",{className:"paper-lite__metadata-item"},"  ",i):null,e?n.a.createElement(Hl.a,{className:"text--preline abstract",text:a.text,limit:250,truncateByDefault:!0}):null))}}zl(Ul,"contextTypes",{router:L.a.object.isRequired}),zl(Ul,"propTypes",{paper:L.a.instanceOf(be.a).isRequired,displayAbstract:L.a.bool,linkOpenInNewTab:L.a.bool}),zl(Ul,"defaultProps",{displayAbstract:!1,linkOpenInNewTab:!1});r(240);var Vl=r(450),Bl=r(151);function Yl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Kl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Wl extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r);const{tagStore:n}=this.context;this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yl(Object(r),!0).forEach((function(t){Kl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromTagStore()),n.registerComponent(this,()=>{this.setState(this.getStateFromTagStore())}),this.handleEdit=this.handleEdit.bind(this)}getStateFromTagStore(){const{tagStore:e}=this.context;return{tags:e.getTags()}}handleEdit(){const{entry:e}=this.props;this.context.dispatcher.dispatch(Object(Lr.b)({id:Dr.b.EDIT_TAGS,data:{entryIds:X.a.List([e.id])}}))}render(){const{onDelete:e,onChange:t,entry:r,isSelected:a}=this.props,{tags:o}=this.state,i=r.tagIds.map(e=>o.get(e)).sortBy(e=>e.name);return n.a.createElement("li",{className:"library-entry__container"},n.a.createElement(ua.a,{layout:"row"},n.a.createElement("div",{className:"library-entry__select"},n.a.createElement("input",{type:"checkbox",className:"legacy__input",onChange:()=>{t(r.id)},checked:a,"aria-label":r.paper.title})),n.a.createElement(ua.a,{layout:"column"},n.a.createElement(Ul,{paper:r.paper,displayAbstract:!0}),n.a.createElement(At.c,{feature:Dt.b.LibraryTags},n.a.createElement(At.b,null,n.a.createElement(ua.a,{layout:"row",wrap:!0},i.map(e=>n.a.createElement(Te.a,{className:"library-entry__tag",key:e.id,to:"LIBRARY_TAG",params:{tagName:encodeURIComponent(e.name)}},e.name)),n.a.createElement("a",{className:"library-entry__tag tag__outlined add-edit-tag",onClick:this.handleEdit},r.tagIds.isEmpty()?es.a.getString("library.addTags"):es.a.getString("library.editTags")))))),n.a.createElement(U.a,{className:"remove-icon",icon:"library-entry-remove",width:"14",height:"14",onClick:()=>{e(r.id)}})))}}Kl(Wl,"contextTypes",{dispatcher:L.a.instanceOf(qr.Dispatcher).isRequired,tagStore:L.a.instanceOf(Bl.a).isRequired});var Ql=r(778),Gl=r(891),Xl=r(155);function Jl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Zl extends a.Component{constructor(){super(...arguments),this.handleOptionClick=this.handleOptionClick.bind(this)}handleOptionClick(){const{onClick:e,selectType:t}=this.props;e(t)}render(){const{selectType:e}=this.props;return n.a.createElement("li",{className:"library-entries-page__select-option",onClick:this.handleOptionClick},Xl.d.toDisplayText(e))}}Jl(Zl,"propTypes",{onClick:L.a.func.isRequired,selectType:L.a.string.isRequired});class $l extends a.PureComponent{constructor(){super(...arguments),this.state={expanded:!1},this.toggleExpandState=this.toggleExpandState.bind(this),this.handleOptionClick=this.handleOptionClick.bind(this)}toggleExpandState(){this.setState(e=>{let{expanded:t}=e;return{expanded:!t}})}handleOptionClick(e){this.props.onSelect(e),this.toggleExpandState()}render(){const{expanded:e}=this.state,{indeterminate:t,onCheckboxClick:r,checked:a}=this.props,o=e?Ql.a.Direction.UP:Ql.a.Direction.DOWN;return n.a.createElement("div",{className:"library-entries-page__select-container"},n.a.createElement("div",{className:"flex-row-centered"},n.a.createElement(Gl.a,{ariaLabel:"library-entry-select",checked:a,onChange:r,indeterminate:t}),n.a.createElement(Ql.a,{className:"flex-static",onClick:this.toggleExpandState,direction:o,width:"14",height:"14"}),e?n.a.createElement("ul",{className:"library-entries-page__select-options"},Xl.d.displayable().map(e=>n.a.createElement(Zl,{key:e,onClick:this.handleOptionClick,selectType:e}))):null))}}function eu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function tu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Jl($l,"propTypes",{indeterminate:L.a.bool.isRequired,onCheckboxClick:L.a.func.isRequired,onSelect:L.a.func.isRequired,checked:L.a.bool.isRequired});const ru={checkboxChecked:!1,selectedEntryIds:X.a.Set()};class au extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r);const{currentQuery:n}=this.props;this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eu(Object(r),!0).forEach((function(t){tu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({queryValue:n.q,selectedSort:Xl.e.RECENCY},ru),this.handleCheckboxClick=this.handleCheckboxClick.bind(this),this.handleClearSearch=this.handleClearSearch.bind(this),this.handleDeleteEntry=this.handleDeleteEntry.bind(this),this.handleDeleteSelectedEntries=this.handleDeleteSelectedEntries.bind(this),this.handleEntryCheckboxClick=this.handleEntryCheckboxClick.bind(this),this.handleFilterSubmit=this.handleFilterSubmit.bind(this),this.handleFilterTextChange=this.handleFilterTextChange.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleSelectClick=this.handleSelectClick.bind(this),this.handleSortChange=this.handleSortChange.bind(this),this.openEditTagsModal=this.openEditTagsModal.bind(this)}openEditTagsModal(){const{entries:e}=this.props,{selectedEntryIds:t}=this.state;this.context.dispatcher.dispatch(Object(Lr.b)({id:Dr.b.EDIT_TAGS,data:{entryIds:e.filter(e=>t.includes(e.id)).map(e=>e.id)}}))}someEntriesSelected(){const{entries:e}=this.props,{selectedEntryIds:t}=this.state;return!t.isEmpty()&&t.size<e.size}handleKeyDown(e){13===e.keyCode&&this.handleFilterSubmit()}handleFilterSubmit(){const{fetchEntriesForQuery:e,tag:t}=this.props,{queryValue:r,selectedSort:a}=this.state;e(Object(Xl.b)({q:r,sort:a,tag:t?t.id:null}),!1,()=>this.setState(ru))}handleFilterTextChange(e){this.setState({queryValue:e.target.value})}handleSortChange(e){this.setState({selectedSort:e.target.value},this.handleFilterSubmit)}handleClearSearch(){this.setState({queryValue:""},this.handleFilterSubmit)}handleCheckboxClick(){const{entries:e}=this.props;this.setState(t=>{let{checkboxChecked:r}=t;return{checkboxChecked:!r,selectedEntryIds:r?X.a.Set():X.a.Set(e.map(e=>{let{id:t}=e;return t}))}})}handleSelectClick(e){const{entries:t}=this.props;switch(e){case Xl.d.ALL:this.setState({selectedEntryIds:X.a.Set(t.map(e=>{let{id:t}=e;return t})),checkboxChecked:!0});break;case Xl.d.NONE:this.setState({selectedEntryIds:X.a.Set(),checkboxChecked:!1});break;default:g.a.error("Selected a select type that does not exist in LibrarySelect. This is likely a programming error.")}}handleEntryCheckboxClick(e){this.setState(t=>{let{selectedEntryIds:r}=t;return{selectedEntryIds:r.has(e)?r.delete(e):r.add(e)}})}handleDeleteEntry(e){this.props.deleteEntries(X.a.Set.of(e))}handleDeleteSelectedEntries(){this.props.deleteEntries(this.state.selectedEntryIds)}renderEntries(){const{currentQuery:e,totalPages:t,entries:r}=this.props,{selectedEntryIds:a}=this.state;return n.a.createElement("div",{className:"library-entry-list__container"},n.a.createElement("ul",{className:"library-entry-list__entries"},r.map(e=>n.a.createElement(Wl,{key:e.id,entry:e,onDelete:()=>this.handleDeleteEntry(e.id),onChange:this.handleEntryCheckboxClick,isSelected:a.has(e.id)}))),t>1?n.a.createElement(fs.a,{loadPage:this.props.loadPage,pageNumber:e.page,totalPages:t}):null)}renderLoading(){return n.a.createElement("div",{className:"loading-controls"},n.a.createElement(me.a,null)," ",Object(l.b)(e=>e.library.loadingIndicator))}render(){const{isLoading:e,totalHits:t,tag:r,currentQuery:o,entries:i}=this.props,{checkboxChecked:s,queryValue:c,selectedEntryIds:u,selectedSort:h}=this.state,{page:d,pageSize:p}=o||{page:null,pageSize:null},m=n.a.createElement("span",null,Object(l.b)(e=>e.library.noResultMessage,o.q),n.a.createElement(Te.a,is.a.routeForQuery(o.q),'"',o.q,'"'),"?"),b=i.isEmpty()?m:null!==d&&null!==p&&null!==t?Object(l.b)(e=>e.library.count,Object(zi.f)({page:d,pageSize:p,totalHits:t}),t):"";return n.a.createElement(a.Fragment,null,n.a.createElement(At.c,{feature:Dt.b.LibraryTags},n.a.createElement(At.b,null,n.a.createElement("div",{className:"library-entries-page__header"},r?'Papers tagged with "'.concat(decodeURIComponent(r.name),'"'):"All Papers"))),n.a.createElement("div",{className:"flex-row-centered library-entries-page__filter-container"},n.a.createElement("div",{className:"flex-row-centered library-entries-page__filter"},n.a.createElement("input",{className:"legacy__input library-entries-page__filter-input",type:"text",placeholder:"Filter Papers",value:c,onKeyDown:this.handleKeyDown,onChange:this.handleFilterTextChange}),c?n.a.createElement("div",{className:"clear-icon",onClick:this.handleClearSearch},n.a.createElement(U.a,{width:"16",height:"16",icon:"clear-input"})):null,n.a.createElement("div",{className:"flex-row-centered library-entries-page__filter-icon",onClick:this.handleFilterSubmit},n.a.createElement(U.a,{icon:"filter",width:"30",height:"30"}))),n.a.createElement("div",{className:"library-entries-page__sort flex-row-centered"},n.a.createElement("span",{className:"library-entries-page__sort-text"},Object(l.b)(e=>e.library.sortByLabel)),n.a.createElement("div",{className:"select--no-styles library-entries-page__sort-options"},n.a.createElement("select",{className:"legacy__select",value:h,onChange:this.handleSortChange},Xl.e.all().map(e=>n.a.createElement("option",{key:e,value:e},Xl.e.toDisplayText(e))))))),n.a.createElement("div",{className:"flex-row-vcenter library-entries-page__actions-container"},n.a.createElement($l,{onSelect:this.handleSelectClick,onCheckboxClick:this.handleCheckboxClick,checked:s,indeterminate:this.someEntriesSelected()}),n.a.createElement("div",{className:"library-entries-page__actions-buttons"},n.a.createElement(At.c,{feature:Dt.b.LibraryTags},n.a.createElement(At.b,null,n.a.createElement(Uo.a,{className:"library-entries-page__edit-tags",disabled:u.isEmpty(),iconProps:{icon:"tag",width:"10",height:"10"},text:Object(l.b)(e=>e.library.editTags),onClick:this.openEditTagsModal}))),n.a.createElement(Uo.a,{className:"library-entries-page__delete-entries",disabled:u.isEmpty(),iconProps:{icon:"library-entry-remove",width:"10",height:"10"},text:Object(l.b)(e=>e.library.delete),onClick:this.handleDeleteSelectedEntries}))),n.a.createElement("p",{className:"library-entries-page__result-count"},b),e?this.renderLoading():this.renderEntries())}}tu(au,"contextTypes",{dispatcher:L.a.instanceOf(qr.Dispatcher).isRequired});var nu=r(161),ou=r(65),iu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function su(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cu(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var lu=function(e){function t(){return su(this,t),cu(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){k()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t=Object(ou.b)(e.to),r=Object(ou.b)(this.props.to);Object(ou.d)(t,r)?ga()(!1,"You tried to redirect to the same route you're currently on: \""+r.pathname+r.search+'"'):this.perform()},t.prototype.computeTo=function(e){var t=e.computedMatch,r=e.to;return t?"string"==typeof r?Object(Cc.a)(r,t.params):iu({},r,{pathname:Object(Cc.a)(r.pathname,t.params)}):r},t.prototype.perform=function(){var e=this.context.router.history,t=this.props.push,r=this.computeTo(this.props);t?e.push(r):e.replace(r)},t.prototype.render=function(){return null},t}(n.a.Component);lu.propTypes={computedMatch:Ee.a.object,push:Ee.a.bool,from:Ee.a.string,to:Ee.a.oneOfType([Ee.a.string,Ee.a.object]).isRequired},lu.defaultProps={push:!1},lu.contextTypes={router:Ee.a.shape({history:Ee.a.shape({push:Ee.a.func.isRequired,replace:Ee.a.func.isRequired}).isRequired,staticContext:Ee.a.object}).isRequired};var uu=lu;function hu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function du(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hu(Object(r),!0).forEach((function(t){pu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const mu=Object.freeze({error:null});class bu extends a.PureComponent{static willRouteTo(e,t){let{tagStore:r}=e,{params:a}=t;const{tagName:n}=a;return r.setCurrentTagName(n),Promise.resolve()}constructor(){super(...arguments),this.state=du({currentQuery:Object(Xl.b)(),currentTag:null,selectedSort:Xl.e.RECENCY},this.getStateFromStores(),{},mu,{isLoading:!0});const{entryStore:e,tagStore:t}=this.context;e.registerComponent(this,()=>{this.setState(this.getStateFromStores())}),t.registerComponent(this,()=>{if(!t.isLoading()){const e=t.getTagFromName(t.currentTagName),r=e?e.id:null,a=r!==(this.state.currentQuery?this.state.currentQuery.tag:null),n={currentTag:t.getTagFromName(t.currentTagName),isLoading:!!a||this.state.isLoading};this.setState(n,()=>{setTimeout(()=>{this.fetchEntriesForQuery(Object(Xl.b)({tag:r}))},0)})}}),this.fetchEntriesForQuery=this.fetchEntriesForQuery.bind(this),this.deleteEntries=this.deleteEntries.bind(this),this.loadPage=this.loadPage.bind(this)}getStateFromStores(){const{entryStore:e,tagStore:t}=this.context;return{entries:e.getEntries().valueSeq().toList(),isInitialLoading:e.isUninitialized()||t.isUninitialized(),isLoading:e.isLoading()||t.isLoading(),totalHits:e.getTotalHits(),totalPages:e.getTotalPages()}}fetchEntriesForQuery(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};e.equals(this.state.currentQuery)&&!t||(this.setState(du({currentQuery:e},mu),()=>{this.context.api.getLibraryEntries(e).catch(e=>{this.setState({error:e})})}),r())}loadPage(e){const{currentQuery:t}=this.state;e!==t.page&&(ac.a.scrollTop(0),this.fetchEntriesForQuery(t.update("page",()=>e)))}deleteEntries(e){e.isEmpty()||this.context.api.deleteLibraryEntries(e).then(()=>{const{currentQuery:e,entries:t}=this.state,r=e.update("page",e=>0===t.size&&e>1?e-1:e);this.fetchEntriesForQuery(r,!0)}).catch(()=>{const e=es.a.getString("library.message.delete_error.header"),t=es.a.getString("library.message.delete_error.body"),r=n.a.createElement(Te.a,{to:"LIBRARY",className:"library-link button button--secondary",onClick:()=>{this.context.messageStore.clearMessages()}},"View Your Library");this.context.messageStore.addError(t,e,r)})}renderEmptyListInstructions(){return n.a.createElement("div",{className:"library-entries-page__empty-library"},n.a.createElement("div",{className:"library-entries-page__header"},"Welcome to Your Semantic Scholar Library"),n.a.createElement("p",null,"Save and organize papers of interest to you. To get started, save a paper via the bookmark icon on a paper or search results page. Then, you can organize your library via tags."),n.a.createElement("img",{src:"/img/empty_library.png",srcSet:"/img/empty_library_2x.png 2x",alt:"empty library graphic"}))}renderEmptyTagInstructions(){const{currentTag:e}=this.state;return n.a.createElement("div",{className:"library-entries-page__empty-library"},n.a.createElement("div",{className:"library-entries-page__header"},'No Papers Tagged with "',e.name,'" Yet'),n.a.createElement("p",null,"To get started, add this tag to papers via the",n.a.createElement(Aa,{exact:!0,to:"LIBRARY"},"All Papers"),"page."),n.a.createElement("img",{src:"/img/empty_tag.png",srcSet:"/img/empty_tag_2x.png 2x",alt:"no tagged entries graphic"}))}renderLoading(){return n.a.createElement("div",{className:"loading-controls"},n.a.createElement(me.a,null)," Loading")}render(){const{currentQuery:e,currentTag:t,entries:r,isInitialLoading:a,isLoading:o,totalHits:i,totalPages:s}=this.state,{tagStore:c}=this.context,l=r.isEmpty()&&!t,u=r.isEmpty()&&t;return c.isLoading()||!c.currentTagName||c.getTagFromName(c.currentTagName)?a||o?n.a.createElement("div",{className:"library-entries-page",role:"main",id:"main-content"},this.renderLoading()):l&&""===e.q?n.a.createElement("div",{className:"library-entries-page",role:"main",id:"main-content"},this.renderEmptyListInstructions()):u?n.a.createElement("div",{className:"library-entries-page",role:"main",id:"main-content"},this.renderEmptyTagInstructions()):n.a.createElement("div",{className:"library-entries-page",role:"main",id:"main-content"},n.a.createElement(au,{currentQuery:e,deleteEntries:this.deleteEntries,entries:r,fetchEntriesForQuery:this.fetchEntriesForQuery,isLoading:o,loadPage:this.loadPage,tag:t,totalHits:i,totalPages:s})):n.a.createElement(uu,{to:"/me/library"})}}pu(bu,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,entryStore:L.a.instanceOf(nu.a).isRequired,messageStore:L.a.instanceOf(Gc.a).isRequired,router:L.a.object.isRequired,tagStore:L.a.instanceOf(Bl.a).isRequired});var gu=r(806);function fu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function _u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class yu extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r);const{tagStore:n}=this.context;this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fu(Object(r),!0).forEach((function(t){_u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromTagStore()),n.registerComponent(this,()=>{this.setState(this.getStateFromTagStore())})}getStateFromTagStore(){const{tagStore:e}=this.context;return{isLoading:e.isLoading(),tags:e.getTags().sortBy(e=>e.name.toLowerCase())}}render(){const e=n.a.createElement(a.Fragment,null,this.state.tags.toList().map(e=>n.a.createElement(Te.a,{className:"tag__item",key:e.id,to:"LIBRARY_TAG",params:{tagName:encodeURIComponent(e.name)}},e.name)),n.a.createElement(Te.a,{className:"tag__manage",to:"LIBRARY_TAG_MANAGEMENT"},Object(l.b)(e=>e.library.tags.manage))),t=n.a.createElement("span",{className:"tag__label flex-justify-start flex-row-vcenter"},n.a.createElement(U.a,{icon:"tag-stack",width:"20",height:"20"}),n.a.createElement("span",null,Object(l.b)(e=>e.library.tags.tagButtonLabel))),r=this.props.location.pathname,o=new RegExp(ie.b.LIBRARY_TAG.replace(/:\w+/,"*")),i=r.includes(ie.b.LIBRARY_TAG_MANAGEMENT)||r.match(o);return n.a.createElement("div",{className:"library-sidebar__container"},n.a.createElement(Aa,{activeClassName:"is-active",className:"tag__section",exact:!0,to:"LIBRARY"},n.a.createElement("span",{className:"tag__label flex-justify-start flex-row-vcenter"},n.a.createElement(U.a,{icon:"fa-bookmark",width:"20",height:"20"}),n.a.createElement("span",null,Object(l.b)(e=>e.library.tags.libraryLink)))),n.a.createElement(gu.a,{className:"tag__section ".concat(i?"is-active":""),collapsibleContent:e,ignoreHash:!0,initialCollapseState:!i,label:t,showToggleIcon:!0}))}}_u(yu,"contextTypes",{tagStore:L.a.instanceOf(Bl.a).isRequired});const Eu={match:L.a.shape({params:L.a.object.isRequired,isExact:L.a.bool.isRequired,path:L.a.string.isRequired,url:L.a.string.isRequired}),location:L.a.shape({pathname:L.a.string.isRequired,search:L.a.string.isRequired,hash:L.a.string.isRequired,state:L.a.object}),history:L.a.shape({length:L.a.number.isRequired,action:L.a.string.isRequired,location:L.a.object.isRequired,search:L.a.string,hash:L.a.string,state:L.a.object,push:L.a.func.isRequired,replace:L.a.func.isRequired,go:L.a.func.isRequired,goBack:L.a.func.isRequired,goForward:L.a.func.isRequired,block:L.a.func.isRequired}),route:L.a.shape({component:L.a.func.isRequired,routes:L.a.arrayOf(L.a.object)})};function Ou(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Su extends a.PureComponent{static async willRouteTo(e){let{tagStore:t,api:r}=e;if(t.isUninitialized())return r.getLibraryTags()}render(){return a.createElement("div",{className:"library-page"},a.createElement(Jt.a,{showSearchBar:!0}),a.createElement("div",{className:"library-page__header bg-light-gray"},a.createElement("h1",{className:"centered-max-width-content"},Object(l.b)(e=>e.library.headline))),a.createElement(ua.a,{className:"library-page__container centered-max-width-content",layout:"row",position:"relative"},a.createElement(At.c,{feature:Dt.b.LibraryTags},a.createElement(At.b,null,a.createElement(yu,{location:this.context.router.route.location}))),a.createElement(ha.a,null,Object(tr.b)(this.props.route.routes))),a.createElement(la.a,null))}}Ou(Su,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,router:L.a.object.isRequired}),Ou(Su,"propTypes",Eu),Ou(Su,"requiresAuthentication",()=>!0),Ou(Su,"getPageTitle",()=>Object(l.b)(e=>e.library.pageTitle));var vu=r(889);function Cu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function wu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Pu extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r);const{tagStore:n}=this.context;this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cu(Object(r),!0).forEach((function(t){wu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({renameRequest:!1,renameTag:null},this.getStateFromTagStore()),n.registerComponent(this,()=>{this.setState(this.getStateFromTagStore())}),this.deleteLibraryTag=this.deleteLibraryTag.bind(this),this.focus=this.focus.bind(this),this.handleRenameBegin=this.handleRenameBegin.bind(this),this.handleRenameChange=this.handleRenameChange.bind(this),this.handleRenameKeyDown=this.handleRenameKeyDown.bind(this),this.handleRenameSubmit=this.handleRenameSubmit.bind(this),this.openDeleteModal=this.openDeleteModal.bind(this)}getStateFromTagStore(){const{tagStore:e}=this.context,{tag:t}=this.props;return{paperCount:e.getPaperCount(t.id)}}focus(){this.renameInput&&this.renameInput.focus()}deleteLibraryTag(e){const{api:t,messageStore:r}=this.context,{renameTag:a}=this.state,{DELETE_SUCCESS:n,DELETE_FAILURE:o}=kt.a.Library.Tags;t.deleteLibraryTag(e).then(()=>{Object(Ht.a)(qt.a.create(n,{tagId:e})),a&&a.id===e&&this.setState({renameTag:null})}).catch(()=>{Object(Ht.a)(qt.a.create(o,{tagId:e}));const t=Object(l.b)(e=>e.library.message.errorDeleteTag.header),a=Object(l.b)(e=>e.library.message.errorDeleteTag.body);r.addError(a,t)})}updateLibraryTag(e){const{api:t,messageStore:r,tagStore:a}=this.context,{RENAME_SUCCESS:n,RENAME_FAILURE:o}=kt.a.Library.Tags;if(a.hasTagByName(e.name)){const t=Object(l.b)(e=>e.library.message.duplicateTag.header),a=Object(l.b)(e=>e.library.message.duplicateTag.body,e.name);r.addWarning(a,t)}else this.setState({renameRequest:!0},()=>{t.updateLibraryTag({id:e.id,newName:e.name}).then(()=>{Object(Ht.a)(qt.a.create(n,{tagId:e.id,tagName:e.name})),this.setState({renameRequest:!1,renameTag:null})}).catch(()=>{Object(Ht.a)(qt.a.create(o,{tagId:e.id,tagName:e.name})),this.setState({renameRequest:!1});const t=Object(l.b)(e=>e.library.message.errorRenameTag.header),a=Object(l.b)(e=>e.library.message.errorRenameTag.body);r.addError(a,t)})})}openDeleteModal(e){this.context.dispatcher.dispatch(Object(Lr.b)({id:Dr.b.DELETE_TAG,data:{deleteLibraryTag:this.deleteLibraryTag,tag:e}}))}handleRenameBegin(e){this.setState({renameTag:e}),this.focus()}handleRenameChange(e){const{renameTag:t}=this.state,r=Object(Vl.a)(t);this.setState({renameTag:r.set("name",e.currentTarget.value)})}handleRenameKeyDown(e){13===e.keyCode?this.handleRenameSubmit():27===e.keyCode&&this.setState({renameTag:null})}handleRenameSubmit(){const{renameTag:e,renameRequest:t}=this.state;if(!e)return;const{tags:r}=this.props,a=r.get(e.id),n=e.name.replace(/\s+/g," ").trim();a.name===n?this.setState({renameTag:null}):""===n||t||this.updateLibraryTag(e)}renderRename(e){return n.a.createElement("div",{className:"flex-row-centered library-tags-page__rename"},n.a.createElement("input",{className:"legacy__input library-tags-page__rename-input",type:"text",ref:e=>this.renameInput=e,placeholder:"Rename Tag",value:e.name,onKeyDown:this.handleRenameKeyDown,onChange:this.handleRenameChange}),n.a.createElement("div",{className:"flex-row-centered library-tags-page__rename-update",onClick:this.handleRenameSubmit},Object(l.b)(e=>e.library.tags.updateNameButton)))}render(){const{tag:e}=this.props,{paperCount:t,renameTag:r}=this.state,o=r&&r.id===e.id;return n.a.createElement(ua.a,{className:"library-tags-page__tag-row",layout:"row"},o?null:n.a.createElement("span",{className:"library-tags-page__tag"},e.name),n.a.createElement(ua.a,{className:"flex-row-vcenter library-tags-page__tag-controls",layout:"row"},o?this.renderRename(r):n.a.createElement(a.Fragment,null,n.a.createElement("span",{className:"paper-count"},"".concat(t||"","\n                    ").concat(t&&1!==t?Object(l.b)(e=>e.library.tags.paperCountPlural):t?Object(l.b)(e=>e.library.tags.paperCountSingle):"")),n.a.createElement("div",{className:"rename-tag",onClick:()=>this.handleRenameBegin(e)},n.a.createElement(U.a,{icon:"pencil",width:"12",height:"12"}),n.a.createElement("span",null,Object(l.b)(e=>e.library.tags.renameButtonLabel)))),n.a.createElement("div",{className:"remove-tag",onClick:()=>this.openDeleteModal(e)},n.a.createElement(U.a,{icon:"small-x",width:"10",height:"10"}),n.a.createElement("span",null,Object(l.b)(e=>e.library.tags.removeButtonLabel)))))}}wu(Pu,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,dispatcher:L.a.instanceOf(qr.Dispatcher).isRequired,messageStore:L.a.instanceOf(Gc.a).isRequired,tagStore:L.a.instanceOf(Bl.a).isRequired});var Nu=uu;function xu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ru(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ju extends a.PureComponent{static willRouteTo(e){let{api:t}=e;return t.getLibraryTagPaperCounts()}constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r);const{tagStore:n}=this.context;this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xu(Object(r),!0).forEach((function(t){Ru(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromTagStore()),n.registerComponent(this,()=>{this.setState(this.getStateFromTagStore())})}getStateFromTagStore(){const{tagStore:e}=this.context;return{isLoading:e.isLoading(),tags:e.getTags()}}renderEmptyTagList(){return n.a.createElement("div",{className:"library-entries-page__empty-tag-list"},n.a.createElement("div",{className:"library-entries-page__header"},"You Haven't Created Any Tags Yet"),n.a.createElement("p",null,"Tags help you organize the papers youve saved to your library. Once created, you can add multiple tags to a single paper, and filter by those tags."))}renderLoading(){return n.a.createElement("div",{className:"loading-controls"},n.a.createElement(me.a,null)," Loading")}render(){const{isLoading:e,tags:t}=this.state;return n.a.createElement(At.c,{feature:Dt.b.LibraryTags},n.a.createElement(At.b,null,n.a.createElement("div",{className:"library-tags-page"},e?this.renderLoading():n.a.createElement(a.Fragment,null,t.isEmpty()?this.renderEmptyTagList():n.a.createElement("div",{className:"library-tags-page__header"},"Manage Tags"),n.a.createElement(vu.a,null),t.toList().map(e=>n.a.createElement(Pu,{tag:e,tags:t,key:e.id}))))),n.a.createElement(At.a,null,n.a.createElement(Nu,{to:ie.b.LIBRARY})))}}Ru(ju,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,messageStore:L.a.instanceOf(Gc.a).isRequired,tagStore:L.a.instanceOf(Bl.a).isRequired});class Tu extends a.PureComponent{render(){const{navItems:e,activeRouteName:t}=this.props;return a.createElement("nav",{className:"moderation-nav"},a.createElement("ul",{className:"moderation-nav__list"},e.map((e,r)=>{let{routeName:n,params:o,label:i,itemCount:s}=e;const c=n===t;return a.createElement("li",{key:r,className:N()({"moderation-nav__item":!0,"moderation-nav__is-active":c})},a.createElement(Te.a,{to:n,params:o||{}},i),"number"==typeof s&&a.createElement("div",{className:"moderation-nav__item__count"},s))})))}}function Au(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Iu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Au(Object(r),!0).forEach((function(t){Fu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Au(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ku extends a.PureComponent{static async willRouteTo(e){let{api:t}=e;return t.fetchModerationStats()}constructor(e,t){super(e,t),this.state=Iu({},this.getStateFromAuthorshipModerationStore(),{},this.getStateFromAuthorClaimModerationStore()),this.context.authorshipModerationStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorClaimModerationStore())}),this.context.claimModerationStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorClaimModerationStore())})}componentDidMount(){const{history:e}=this.props;if("MODERATION"===Object(ie.c)(e.location.pathname)){const t=new st.a(Iu({},this.pickRedirectRoute(),{replace:!0,status:302}));Object(it.a)({redirect:t,history:e})}}getStateFromAuthorshipModerationStore(){return{numPendingAuthorshipCorrections:this.context.authorshipModerationStore.getPendingPaperAuthorCorrectionsCount()}}getStateFromAuthorClaimModerationStore(){return{numPendingAuthorClaims:this.context.claimModerationStore.getPendingAuthorClaimCount()}}getActiveRouteName(){var e;const{router:t}=this.context,{route:r}=this.props,a=null!=(e=Object(tr.a)(r.routes,t.route.location.pathname))&&null!=(e=e[0])&&null!=(e=e.route)?e.path:e;return Object(ie.c)(a)||"MODERATION"}pickRedirectRoute(){return{routeName:"AUTHOR_CLAIM_MODERATION",params:{status:"pending"}}}getNavItems(){const{numPendingAuthorshipCorrections:e,numPendingAuthorClaims:t}=this.state;return[{routeName:"AUTHOR_CLAIM_MODERATION",params:{status:"pending"},label:Object(l.b)(e=>e.moderation.nav.authorClaimLabel),itemCount:t},{routeName:"AUTHOR_AUTHORSHIP_MODERATION",params:{status:"pending"},label:Object(l.b)(e=>e.moderation.nav.authorshipLabel),itemCount:e},{routeName:"AUTHOR_CORRECTIONS_TOOL",label:Object(l.b)(e=>e.moderation.nav.correctionsToolLabel),itemCount:null}]}render(){const{route:e}=this.props,t=this.getNavItems(),r=this.getActiveRouteName();return a.createElement("div",null,a.createElement(Jt.a,{showSearchBar:!0,isAdminPage:!0}),a.createElement("div",{className:"moderation",role:"main"},a.createElement("h2",{className:"moderation__header"},Object(l.b)(e=>e.moderation.headerLabel)),a.createElement(Tu,{navItems:t,activeRouteName:r}),a.createElement("div",{className:"moderation__sub-page"},Object(tr.b)(e.routes))))}}function Du(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Lu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Fu(ku,"contextTypes",{authorshipModerationStore:L.a.instanceOf(zo.a).isRequired,claimModerationStore:L.a.instanceOf(za.a).isRequired,router:L.a.object.isRequired}),Fu(ku,"getPageTitle",()=>Object(l.b)(e=>e.moderation.pageTitle)),Fu(ku,"requiresAuthentication",()=>!0);class qu extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),Lu(this,"onSubmitForm",()=>{this.setState({isSending:!0}),this.verifyAuthorId().then(()=>{const e=this.context.authorCorrectionsStore,t=this.state.authorId;if(!this.state.errorMessage){t&&e.setModeratorCorrectionsAuthorId(t),e.setIsModeratorCorrecting(!0),this.setState({isSending:!1}),this.context.router.history.push(Object(ie.d)({routeName:"AUTHOR_CORRECTIONS_TOOL_CONTACT"}))}})}),Lu(this,"onChangeInput",e=>{this.setState({authorId:parseInt(e,10)})}),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Du(Object(r),!0).forEach((function(t){Lu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Du(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isSending:!1,errorMessage:null,successMessage:null,hasAttemptedSubmit:!1},this.getStateFromAuthorCorrectionsStore()),this.context.authorCorrectionsStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorCorrectionsStore())})}getStateFromAuthorCorrectionsStore(){return{authorId:this.context.authorCorrectionsStore.getModeratorCorrectionsAuthorId()}}async verifyAuthorId(){const e=this.context.api,t=this.state.authorId;if(t)try{await e.fetchAuthorDetail(t,null,!1),this.setState({errorMessage:""})}catch(e){this.setState({errorMessage:"The author id is not valid"})}}renderMessage(){const{errorMessage:e}=this.state;return e?a.createElement("div",{className:"account__error-msg"},e):null}render(){const{authorId:e,isSending:t}=this.state;return a.createElement("div",{className:"moderator-corrections__author-id"},a.createElement(It.a,{name:"authorId",label:Object(l.b)(e=>e.moderatorCorrections.input.label),className:"standard-form",isRequired:!0,value:e?e.toString():"",onChange:this.onChangeInput,placeholder:"This author id will be used to make corrections"}),a.createElement(o,null,a.createElement(c,null,this.renderMessage()),a.createElement(s,null,t&&a.createElement(U.a,{className:"account__loading",icon:"gear"}),a.createElement("button",{className:"account-author-contact__submit-button button button--primary",onClick:this.onSubmitForm},Object(l.b)(e=>e.account.button.submit)))))}}function Mu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Hu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Lu(qu,"getPageTitle",()=>Object(l.b)(e=>e.moderatorCorrections.input.pageTitle)),Lu(qu,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,authStore:L.a.instanceOf(fe.a).isRequired,authorCorrectionsStore:L.a.instanceOf(A.a).isRequired,router:L.a.object.isRequired});class zu extends a.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mu(Object(r),!0).forEach((function(t){Hu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromAuthorCorrectionsStore()),this.context.authorCorrectionsStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorCorrectionsStore())})}getStateFromAuthorCorrectionsStore(){const{authorCorrectionsStore:e}=this.context;return{moderatorCorrectionsAuthorId:e.getModeratorCorrectionsAuthorId()||null}}componentWillUnmount(){const{authorCorrectionsStore:e}=this.context;e.resetModeratorCorrections()}getNavSections(){const{moderatorCorrectionsAuthorId:e}=this.state,t=[],r={label:Object(l.b)(e=>e.moderatorCorrections.authorCorrectionsTool.sectionLabel),links:[{routeName:"AUTHOR_CORRECTIONS_TOOL_AUTHOR_INPUT",label:Object(l.b)(e=>e.moderatorCorrections.authorCorrectionsTool.navLabel)}]},a=[{routeName:"AUTHOR_CORRECTIONS_TOOL_CONTACT",label:Object(l.b)(e=>e.account.page.authorContact.navLabel)},{routeName:"AUTHOR_CORRECTIONS_TOOL_REMOVE_PAPERS",label:Object(l.b)(e=>e.account.page.removePapers.navLabel)},{routeName:"AUTHOR_CORRECTIONS_TOOL_ADD_PAPERS",label:Object(l.b)(e=>e.account.page.addPapers.navLabel)},{routeName:"AUTHOR_CORRECTIONS_TOOL_STATUS",label:Object(l.b)(e=>e.account.page.corrections.navLabel)}];return e&&a.map(e=>r.links.push(e)),t.push(r),t}getActiveRouteName(){var e;const{router:t}=this.context,{route:r}=this.props,a=null!=(e=Object(tr.a)(r.routes,t.route.location.pathname))&&null!=(e=e[0])&&null!=(e=e.route)?e.path:e;return Object(ie.c)(a)||"AUTHOR_CORRECTIONS_TOOL"}render(){return a.createElement("div",{className:"author-corrections-tool"},a.createElement("div",{className:"account__columns"},a.createElement("div",{className:"account__column nav-bar__container"},a.createElement(Zt,{activeRouteName:this.getActiveRouteName(),navSections:this.getNavSections()})),a.createElement("div",{className:"account__column account__page"},Object(tr.b)(this.props.route.routes))))}}Hu(zu,"contextTypes",{api:L.a.instanceOf(ne.a).isRequired,router:L.a.object.isRequired,authorCorrectionsStore:L.a.instanceOf(A.a).isRequired});var Uu=r(846);const Vu=e=>{let{isMobile:t}=e;const{containerStyles:r,textStyles:a}=function(e){return{containerStyles:e?"flex-row-hcenter":"container flex-row-vcenter",textStyles:e?"":"flex-right text--right"}}(t);return n.a.createElement("footer",{className:"footer altmetric-footer"},n.a.createElement("div",{className:r},t?null:n.a.createElement("div",null),n.a.createElement("span",{className:a},"Blog posts, news articles and tweet counts and IDs sourced by ",n.a.createElement(Ma.a,{href:"https://www.altmetric.com/"},n.a.createElement("div",{className:"altmetric-icon"})," Altmetric.com"))))};Vu.propTypes={isMobile:L.a.bool};var Bu=Vu,Yu=r(965),Ku=r(48),Wu=r(218),Qu=r(152),Gu=r(238),Xu=r(749),Ju=r(755);function Zu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function $u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eh=r.n(Ju)()({displayName:"PaperDetailPage",mixins:[fe.a.Mixin,Qu.a.Mixin],contextTypes:{api:L.a.instanceOf(ne.a).isRequired},propTypes:{route:L.a.object.isRequired},statics:{willRouteTo(e,t){const{authStore:r,paperStore:a,api:n,dispatcher:o,feedApi:i}=e,{path:s,routes:c,query:l,params:u}=t,{paperId:h,slug:d=""}=u,p=l&&l.tab?l.tab:Wu.a.ABSTRACT.path;if(!Wu.a.isValidPath(p))return new st.a({params:u,routeName:"PAPER_DETAIL",replace:!0,status:302});a.setActiveTabPath(p);const m=a.getPaperDetail(),b=h!==m.paper.id,g=m.citingPapers.yearFilter.get("min"),f=m.citingPapers.yearFilter.get("max"),_=m.citingPapers.citationIntent,y=m.getIn(["citedPapers","sort"]),E=m.citedPapers.requestedPageSize,O=(m.getIn(["citedPapers","pageNumber"])-1)*E,S=m.getIn(["citingPapers","sort"]),v=m.citingPapers.requestedPageSize,C=(m.getIn(["citingPapers","pageNumber"])-1)*v,[w,P]=l.year?[l.year[0]||null,l.year[1]||null]:[null,null],N=l.citationIntent||Ku.a.INTENTS.ALL_INTENTS.id,x=l.citingPapersSort||cs.a.IS_INFLUENTIAL_CITATION.id,R=parseInt(l.citedPapersLimit)||Ku.a.CITATIONS_PAGE_SIZE,j=parseInt(l.citedPapersOffset)||0,T=l.citedPapersSort||cs.a.IS_INFLUENTIAL_CITATION.id,A=parseInt(l.citingPapersLimit)||Ku.a.CITATIONS_PAGE_SIZE,I=parseInt(l.citingPapersOffset)||0;let F;if(b)F=n.fetchPaperDetail({paperId:h,slug:d,citingPapersSort:x,citingPapersLimit:A,citingPapersOffset:I,citedPapersSort:T,citedPapersLimit:R,citedPapersOffset:j});else{if(w!=g||P!=f||N!=_?F=n.fetchCitations({paperId:h,citationType:"citingPapers",sort:x,intent:N,offset:0,pageSize:Ku.a.CITATIONS_PAGE_SIZE,yearMin:w,yearMax:P}):I===C&&v===A&&S===x||(F=n.fetchCitations({paperId:h,citationType:"citingPapers",sort:x,intent:N,offset:I,pageSize:A,yearMin:w,yearMax:P})),y!==T||E!==R||O!==j){let e=n.fetchCitations({paperId:h,citationType:"citedPapers",sort:T,intent:null,offset:j,pageSize:R});F?F.then(e):F=e}F||(F=Promise.resolve(void 0))}const k=r.hasAuthenticatedUser()&&b?n.findAlertByQueryTypeAndValue(Gr.c.PAPER_CITATION,h):Promise.resolve(),D=r.hasAuthenticatedUser()?i.getFeeds():Promise.resolve();return o.dispatch({actionType:bc.a.actions.UPDATE_FOCUSED_FIGURE_INDEX,figureIndex:u.figureIndex}),Promise.all([F,k,D]).then(e=>{const t=e[0];if(t&&t.resultData&&t.resultData.canonicalId){const e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zu(Object(r),!0).forEach((function(t){$u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},u,{paperId:t.resultData.canonicalId,slug:t.resultData.canonicalSlug});return c?new st.a({query:l,routeName:c[c.length-1].name,params:e,replace:!0}):new st.a({path:s,query:l,params:e,replace:!0})}{const t=c?c.filter(e=>"PAPER_DETAIL_FIGURE"===e.name).length>0:s===ie.b.PAPER_DETAIL_FIGURE,r=a.getPaperDetail();return t&&!r.figures.has(a.focusedFigureIndex)?Promise.reject({status:404}):e}})},getPageTitle(e){let{paperStore:t}=e;const{primaryPaperLink:r,title:{text:a}}=t.getPaperDetail().paper,n=!!r&&Object(Cs.g)(r.url)?"[PDF] ".concat(a):a;return es.a.getString("paperDetail.pageTitle.".concat(t.getActiveTab()),n)},getPageCitationMeta:e=>e.paperStore.getPaperDetail().citationMeta(),getPageMetaDescription:e=>e.paperStore.getPaperDetail().description(),getCanonicalUrl:e=>Object(ie.d)({routeName:"PAPER_DETAIL",params:e.params}),getSchemaData(e,t){const r=t.paperStore.getPaperDetail(),a=[{path:"/paper",name:"Papers"},{path:e.url,name:r.paper.title.text}];return{breadCrumbs:Gu.a.breadcrumb(t.envInfo.hostname,a),linkedData:r.linkedData()}}},getInitialState(){return{paperDetail:this.getPaperStore().getPaperDetail(),loading:this.getPaperStore().isLoading()}},onAuthStoreChange(){setTimeout(()=>this.apiFetchPaperDetail(),5)},apiFetchPaperDetail(){const{paperDetail:e}=this.state,t=e.paper.id;this.context.api.fetchPaperDetail({paperId:t,requireSlug:!1})},onPaperStoreChange(){this.setState({paperDetail:this.getPaperStore().getPaperDetail(),loading:this.getPaperStore().isLoading()})},render(){const{paperDetail:e,loading:t}=this.state,r=!e.paper.blogs.isEmpty();return n.a.createElement(Ol.a,{heapProps:{"page-type":Fl.b,"page-paper-id":e.paper.id}},n.a.createElement("div",{className:"paper"},n.a.createElement(Jt.a,{showSearchBar:!0}),t?n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"loading-controls flex-row-vcenter",role:"main",id:"main-content"},n.a.createElement(me.a,{seleniumSelector:"paper-details-loading"})," Loading")):n.a.createElement("div",null,n.a.createElement(Yu.a,{paperDetail:e}),Object(tr.b)(this.props.route.routes),n.a.createElement(Xu.a,{target:kt.a.PaperDetail.SCROLL_LANDMARKS,section:"Footer"},r?n.a.createElement(Bu,null):null,n.a.createElement(la.a,{className:r?"with-altmetric-footer":""})))))}}),th=r(955),rh=r(956);function ah(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class nh extends a.PureComponent{trackShareEvent(e){const t=ra.a.create(kt.a.SHARE,{socialType:e.id});Object(Ht.a)(t)}onClickShareLink(e){this.trackShareEvent(e);const t=encodeURIComponent("".concat(window.location.href,"?utm_source=").concat(e.id)),r=encodeURIComponent(this.props.title),a=this.props.message?"".concat(encodeURIComponent(this.props.message),": ").concat(t):t;let n;switch(e){case rh.a.EMAIL:n="mailto:?subject=".concat(r,"&body=").concat(a);break;case rh.a.FACEBOOK:n=Object(th.a)(t);break;case rh.a.REDDIT:n=Object(th.getRedditShareUrl)(t,r);break;case rh.a.TWITTER:n=Object(th.c)(t,r)}e!==rh.a.EMAIL?window.open(n,"_blank","left=100,top=100,width=800,height=500,toolbar=1,resizable=0"):window.location.href=n}render(){const e=rh.a.shareOptions().map((e,t)=>{const r=N()("".concat(e.id," share-option flex-row-vcenter"),this.props.linkClassName);return n.a.createElement("li",{className:r,onClick:this.onClickShareLink.bind(this,e),key:t},n.a.createElement(U.a,{icon:e.id,width:"25",height:"25"}),e.name)});return n.a.createElement("ul",null,e)}}function oh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}ah(nh,"propTypes",{className:L.a.string,linkClassName:L.a.string,message:L.a.string}),ah(nh,"contextTypes",{dispatcher:L.a.instanceOf(di.a).isRequired});class ih extends a.PureComponent{render(){const e=N()("share-button button",this.props.className);return n.a.createElement(Ws.a,{tooltipContent:n.a.createElement(nh,{message:this.props.message,title:this.props.title}),tooltipPosition:this.props.tooltipPosition,className:"share flex-row-vcenter",tooltipClassName:"share-tooltip"},n.a.createElement(Uo.a,{className:e,text:"Share",iconProps:{icon:"share",width:"15",height:"15"}}))}}oh(ih,"propTypes",{title:L.a.string.isRequired,message:L.a.string,className:L.a.string,tooltipPosition:L.a.string}),oh(ih,"defaultProps",{tooltipPosition:"bottom-left"});var sh=r(944),ch=r.n(sh);class lh extends n.a.PureComponent{constructor(){super(...arguments),this.onClickBackground=this.onClickBackground.bind(this),this.onClickClose=this.onClickClose.bind(this),this.onStartVideo=this.onStartVideo.bind(this)}onClickBackground(e){e.stopPropagation();const{target:t}=e;t instanceof HTMLElement&&t.className.split(" ").find(e=>"pdp-video"===e)&&this.closeModal()}onClickClose(e){e.stopPropagation(),this.closeModal()}onStartVideo(){const e=this.getVideo();if(!e)return;const{uniqueId:t,url:r}=e;Object(Ht.a)(ra.a.create(kt.a.PaperDetail.VIDEO_START,{uniqueId:t,url:r}))}closeModal(){const{paperStore:e,router:t}=this.context,{slug:r,id:a}=e.getPaperDetail().paper,n=Object(ie.d)({routeName:"PAPER_DETAIL",params:{slug:r,paperId:a}});t.history.replace(n)}getVideo(){const{featuredContent:e}=this.context.paperStore.getPaperDetail(),{uniqueId:t}=this.props.match.params;return t&&e.find(e=>e.uniqueId===t)||null}render(){const e=this.getVideo();if(!e)return null;const{title:t,url:r,summary:a,channel:o,datePosted:i}=e,s=Object(l.b)(e=>e.paperDetail.featured.video.shareTitle,t);return n.a.createElement("div",{className:"pdp-video",onClick:this.onClickBackground},n.a.createElement("a",{className:"close-modal-link flex-row-vcenter",onClick:this.onClickClose},n.a.createElement("span",null,Object(l.b)(e=>e.paperDetail.featured.video.closeButtonLabel)),n.a.createElement(U.a,{icon:"x",className:"flex-right",width:"30",height:"30"})),n.a.createElement("div",{className:"pdp-video__modal"},n.a.createElement(ua.a,null,n.a.createElement(ha.a,null,n.a.createElement("h4",{className:"pdp-video__title text--lg"},t),n.a.createElement("div",{className:"flex-row flex-center flex-space-between pdp-video__publish-info"},n.a.createElement("ul",null,o&&n.a.createElement("li",{className:"pdp-video__publish-info-item"},o),i&&n.a.createElement("li",{className:"pdp-video__publish-info-item"},i.format("MMM Do, YYYY"))),n.a.createElement(ih,{title:s,className:"button--primary flex-right",tooltipPosition:"bottom-right"})))),n.a.createElement("div",{className:"pdp-video__video"},n.a.createElement(ch.a,{controls:!0,url:r,height:480,width:800,onStart:this.onStartVideo})),n.a.createElement("div",{className:"pdp-video__summary"},a)))}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(lh,"contextTypes",{paperStore:L.a.instanceOf(Qu.a).isRequired,router:L.a.object.isRequired});var uh=r(959),hh=r(981),dh=r(877),ph=r(814);function mh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class bh extends a.PureComponent{constructor(){super(...arguments),this.state=this.getStateFromQueryStore(),this.handleToggleClick=this.handleToggleClick.bind(this),this.context.queryStore.registerComponent(this,()=>{this.setState(this.getStateFromQueryStore())})}getStateFromQueryStore(){const e=this.context.queryStore.getCurrentYearRange(),t=(new Date).getUTCFullYear(),r=t-5;return{isSelected:this.getIsSelected(e,r,t),isDisabled:this.getIsDisabled(r,t),currentYear:t,fiveYearsAgo:r}}getIsSelected(e,t,r){return e.min===t&&e.max===r}getIsDisabled(e,t){const{years:r,filteredYears:a}=this.props;return 0===(a.isEmpty()?r:a).filter(r=>r.year>=e&&r.year<=t).reduce((e,t)=>e+t.count,0)}handleToggleClick(){const{queryStore:e,router:t}=this.context,{currentYear:r,fiveYearsAgo:a,isSelected:n}=this.state;n?e.routeToYearRange(null,null,t):e.routeToYearRange(a,r,t)}render(){const{isSelected:e,isDisabled:t}=this.state;return n.a.createElement(ph.a,{isSelected:e,isDisabled:t,text:Object(l.b)(e=>e.serp.toggle.year.title),seleniumSelector:"last-five-years",onToggle:this.handleToggleClick})}}mh(bh,"contextTypes",{router:L.a.object.isRequired,queryStore:L.a.instanceOf(ss.a).isRequired}),mh(bh,"propTypes",{filteredYears:L.a.instanceOf(X.a.List).isRequired,years:L.a.instanceOf(X.a.List).isRequired});var gh=r(850);function fh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const _h=os.PUBLICATION_TYPE.id;class yh extends a.PureComponent{constructor(){super(...arguments),this.state=this.getStateFromQueryStore(),this.handleToggleClick=this.handleToggleClick.bind(this),this.context.queryStore.registerComponent(this,()=>{this.setState(this.getStateFromQueryStore())})}getDisabledStatus(){const e=this.props.publicationTypes.find(e=>"Reviews"===e.value);return!this.state.isSelected&&(!e||0===e.documentCount)}getStateFromQueryStore(){return{isSelected:this.context.queryStore.isFilterActive(_h,"Reviews")}}handleToggleClick(){const{queryStore:e,router:t}=this.context;e.routeToToggleFilter(_h,"Reviews",t)}render(){return n.a.createElement(ph.a,{isSelected:this.state.isSelected,isDisabled:this.getDisabledStatus(),text:Object(l.b)(e=>e.serp.toggle.review.title),seleniumSelector:"reviews",onToggle:this.handleToggleClick})}}fh(yh,"contextTypes",{router:L.a.object.isRequired,queryStore:L.a.instanceOf(ss.a).isRequired}),fh(yh,"propTypes",{publicationTypes:L.a.instanceOf(X.a.OrderedSet).isRequired});var Eh=r(24);function Oh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Sh extends a.PureComponent{constructor(e,t){super(e,t),Oh(this,"toggleSerpDensity",()=>{const{queryStore:e,router:t}=this.context,r=!this.state.isCompact;this.setState({isCompact:r}),e.routeToToggleSerpDensity(r,t)}),this.state=this.getStateFromQueryStore(),this.context.queryStore.registerComponent(this,()=>{this.setState(this.getStateFromQueryStore)})}getStateFromQueryStore(){return{isCompact:this.context.queryStore.isDisplayCompactActive()}}render(){const{isCompact:e}=this.state;return n.a.createElement(ha.a,{className:"fresh-filters__density-toggle"},n.a.createElement(Uo.a,{iconProps:{icon:"display-compact",width:"12",height:"12"},tagName:"button","data-selenium-selector":"density-toggle-compact",onClick:this.toggleSerpDensity,className:"button button--secondary",text:Object(l.b)(e=>e.serp.toggle.compact.title),disabled:e}),n.a.createElement(Uo.a,{iconProps:{icon:"display-comfortable",width:"12",height:"12"},tagName:"button","data-selenium-selector":"density-toggle-comfortable",onClick:this.toggleSerpDensity,className:"button button--secondary",text:Object(l.b)(e=>e.serp.toggle.comfortable.title),disabled:!e}))}}function vh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Oh(Sh,"contextTypes",{router:L.a.object.isRequired,queryStore:L.a.instanceOf(ss.a).isRequired,cookieJar:L.a.instanceOf(Eh.b).isRequired});const Ch=os.EXTERNAL_CONTENT_TYPE.id;class wh extends a.PureComponent{constructor(){super(...arguments),this.state=this.getStateFromQueryStore(),this.handleToggleClick=this.handleToggleClick.bind(this),this.context.queryStore.registerComponent(this,()=>{this.setState(this.getStateFromQueryStore())})}getDisabledStatus(){const e=this.props.externalContentTypes.find(e=>"video"===e.value);return!this.state.isSelected&&(!e||0===e.documentCount)}getStateFromQueryStore(){return{isSelected:this.context.queryStore.isFilterActive(Ch,"video")}}handleToggleClick(){const{queryStore:e,router:t}=this.context;e.routeToToggleFilter(Ch,"video",t)}render(){return n.a.createElement(ph.a,{isSelected:this.state.isSelected,isDisabled:this.getDisabledStatus(),text:Object(l.b)(e=>e.serp.toggle.video.title),seleniumSelector:"has-video-toggle",onToggle:this.handleToggleClick})}}function Ph(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}vh(wh,"contextTypes",{router:L.a.object.isRequired,queryStore:L.a.instanceOf(ss.a).isRequired}),vh(wh,"propTypes",{externalContentTypes:L.a.instanceOf(X.a.OrderedSet).isRequired});function Nh(e,t){return t.size>5?n.a.createElement(Xi.a,{label:os.findById(e).displayName,lessText:"Fewer"},r=>n.a.createElement(Ji.a,{maxLabelLength:30,collapsible:!1,filterType:e,displayDocCount:!0,filters:t.take(r?t.size:5)})):n.a.createElement(Ji.a,{maxLabelLength:30,displayDocCount:!0,collapsible:!1,filterType:e,filters:t})}class xh extends a.PureComponent{constructor(){super(...arguments),this.setYearRange=this.setYearRange.bind(this)}setYearRange(e,t){const{queryStore:r,router:a}=this.context;r.routeToYearRange(e,t,a)}render(){const{availableFilters:e}=this.props,t=e.get("publicationTypes"),r=e.get("authors"),a=e.get("venues"),o=e.get("externalContentTypes");return n.a.createElement(ua.a,{className:"flex-row"},n.a.createElement(ha.a,{className:"fresh-filters__filter_container",width:"25"},t?Nh(os.PUBLICATION_TYPE.id,t):null),n.a.createElement(ha.a,{className:"fresh-filters__filter_container",width:"25"},o.isEmpty()?null:Nh(os.EXTERNAL_CONTENT_TYPE.id,o)),n.a.createElement(ha.a,{className:"fresh-filters__filter_container",width:"25"},r.isEmpty()?null:Nh(os.AUTHOR.id,r)),n.a.createElement(ha.a,{className:"fresh-filters__filter_container",width:"25"},a.isEmpty()?null:Nh(os.VENUE.id,a)))}}Ph(xh,"propTypes",{availableFilters:L.a.object.isRequired}),Ph(xh,"contextTypes",{queryStore:L.a.instanceOf(ss.a).isRequired,router:L.a.object.isRequired});var Rh=r(864);function jh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Th extends a.PureComponent{constructor(){super(...arguments),this.state={showDensityToggle:this.shouldShowDensityToggle(),filtersAreExpanded:!1},this.toggleFilters=this.toggleFilters.bind(this)}toggleFilters(){this.setState(e=>({filtersAreExpanded:!e.filtersAreExpanded}))}shouldShowDensityToggle(){return this.context.weblabStore.getVariation(Ir.b.SerpDensity.KEY)!==Ir.b.SerpDensity.Variation.CONTROL}render(){const{response:e,layoutOptions:t,query:r}=this.props,{filtersAreExpanded:a,showDensityToggle:o}=this.state,i=e.stats.get("publicationTypes")||X.a.OrderedSet(),s=e.stats.get("externalContentTypes")||X.a.OrderedSet();return n.a.createElement("div",{className:"fresh-filters"},n.a.createElement("div",{className:"fresh-filters__controls"},n.a.createElement("div",{className:"centered-max-width-content"},n.a.createElement(ua.a,{className:"flex-row-vcenter fresh-filters__flex-container"},n.a.createElement(ha.a,{className:"fresh-filters__filter_container fresh-filters__filter_container--has-right-border"},n.a.createElement(gh.a,{response:e})),n.a.createElement(bh,{years:e.stats.get("years"),filteredYears:e.stats.get("filteredYears")||new X.a.List}),n.a.createElement(yh,{publicationTypes:i}),n.a.createElement(dh.a,{isToggle:!0}),n.a.createElement(wh,{externalContentTypes:s}),n.a.createElement(ha.a,null,n.a.createElement("button",{"data-selenium-selector":"more-search-filters",onClick:this.toggleFilters,className:"link-button fresh-filters__filters_button button"},n.a.createElement("span",null,a?"Fewer":"More"," Filters"))),n.a.createElement("div",{className:"fresh-filters__display-controls"},o&&n.a.createElement(Sh,null),n.a.createElement(ha.a,{className:"fresh-filters__sort-control"},n.a.createElement(Rh.a,{className:"select--no-styles",labelText:"Sort By",onChangeSort:this.props.onChangeSort,options:t.sorts,displayType:t.sortDisplayType,sort:r.sort})))))),a?n.a.createElement("div",{className:"fresh-filters__drawer","data-selenium-selector":"fresh-filters"},n.a.createElement("div",{className:"centered-max-width-content fresh-filters__drawer-pointer-container"},n.a.createElement("span",{className:"fresh-filters__drawer-pointer tooltip-pointer"},n.a.createElement("span",{className:"tooltip-pointer-arrow"})),n.a.createElement(xh,{availableFilters:e.stats}))):null)}}jh(Th,"propTypes",{isFiltering:L.a.bool.isRequired,layoutOptions:L.a.object.isRequired,response:L.a.object.isRequired,query:L.a.object.isRequired,onChangeSort:L.a.func.isRequired}),jh(Th,"contextTypes",{router:L.a.object.isRequired,weblabStore:L.a.instanceOf(er.b).isRequired,queryStore:L.a.instanceOf(ss.a).isRequired});var Ah=r(813),Ih=r(977);function Fh(e){let{title:t,authors:r,published:a,url:o}=e;return n.a.createElement("li",{className:"slide-item truncate-line"},n.a.createElement(Ma.a,{className:"slide-title",href:o},t),n.a.createElement("p",{className:"slide-info"},function(e){return e.size>1?"".concat(e.first()," + ").concat(e.size-1," ").concat(""," "):1===e.size?"".concat(e.first()," ").concat(""," "):""}(r),en.a.unix(a).utc().format("MMM DD, YYYY")))}Fh.propTypes={title:L.a.string.isRequired,authors:L.a.instanceOf(X.a.List).isRequired,published:L.a.number.isRequired,url:L.a.string.isRequired};var kh=Fh;class Dh extends a.PureComponent{constructor(e,t){super(e,t),this.state={collapsed:!0,canToggle:e.slides.size>2},this.toggle=this.toggle.bind(this)}toggle(){this.setState(e=>{let{collapsed:t}=e;return{collapsed:!t}})}render(){const{slides:e}=this.props,{canToggle:t,collapsed:r}=this.state,a=e.take(r?3:e.size);return n.a.createElement("ul",{className:"slide-list"},a.map(e=>{let{id:t,title:r,authors:a,published:o,url:i}=e;return n.a.createElement(kh,{key:t,title:r,authors:a,published:o,url:i})}),t?n.a.createElement("li",{className:"mod-clickable link-button",onClick:this.toggle},"Show ",r?"More":"Fewer"):null)}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Dh,"propTypes",{slides:L.a.instanceOf(X.a.List).isRequired});class Lh extends a.PureComponent{componentDidMount(){Object(Ht.a)(Lt.a.create(kt.a.Serp.MATCHED_SLIDES))}render(){const{queryString:e,slides:t}=this.props;return n.a.createElement(Ah.a,{title:"Slides related to ".concat(e),icon:"slides-list"},n.a.createElement(Dh,{slides:t}))}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Lh,"propTypes",{queryString:L.a.string.isRequired,slides:L.a.instanceOf(X.a.List).isRequired});var qh=r(960),Mh=r(863);class Hh extends a.PureComponent{render(){const e=this.props.sorts.map((e,t)=>n.a.createElement("div",{className:"sort-explanation-description",key:t},n.a.createElement("h4",{className:"flex-row-vcenter"},n.a.createElement(U.a,{icon:e.icon,width:"15",height:"15",className:"sort-explanation-icon"}),n.a.createElement("span",null,es.a.getString("sort.".concat(e.id,".title")))),n.a.createElement("span",{className:"sort-explanation-text",dangerouslySetInnerHTML:{__html:es.a.getString("sort.".concat(e.id,".description"))}}))),t=n.a.createElement("div",{className:"sort-explanation-tooltip-content"},e);return n.a.createElement(Ws.a,{tooltipPosition:"bottom-right",className:"flex-right sort-explanation-tooltip",tooltipContent:t},n.a.createElement("div",{className:"flex-row-vcenter"},n.a.createElement("span",{className:"sort-explanation-text-label"},"Learn More"),n.a.createElement(Mh.a,null)))}}function zh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Hh,"propTypes",{sorts:L.a.instanceOf(X.a.List).isRequired});class Uh extends a.PureComponent{constructor(){super(),this.onChangeSort=this.onChangeSort.bind(this)}onChangeSort(e){this.context.queryStore.routeToSort(e,this.context.router)}render(){return n.a.createElement("div",{className:"controls"},this.props.showResultCount?this.props.isFiltering?n.a.createElement("div",{className:"flex-row-vcenter"},n.a.createElement(me.a,{seleniumSelector:"icon-loading-serp"})," Updating results"):n.a.createElement(gh.a,{response:this.props.response}):null,n.a.createElement("div",{className:"controls-right flex-row"},n.a.createElement(Rh.a,{onChangeSort:this.onChangeSort,options:this.props.sorts,displayType:this.props.sortDisplayType,sort:this.props.query.sort})),this.props.showSortExplanation?n.a.createElement(Hh,{sorts:this.props.sorts}):null)}}zh(Uh,"contextTypes",{queryStore:L.a.instanceOf(ss.a).isRequired,router:L.a.object.isRequired}),zh(Uh,"propTypes",{isFiltering:L.a.bool,query:L.a.object.isRequired,response:L.a.object.isRequired,showResultCount:L.a.bool,sortDisplayType:L.a.string,showSortExplanation:L.a.bool,sorts:L.a.instanceOf(X.a.List)});var Vh=r(875);function Bh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Yh extends a.PureComponent{constructor(e,t){super(e,t),this.state=this.stateFromQueryStore(),this.context.queryStore.registerComponent(this,()=>{this.setState(this.stateFromQueryStore())}),this.histogramCallback=this.histogramCallback.bind(this)}histogramCallback(e,t){const{queryStore:r,router:a}=this.context;r.routeToYearRange(e,t,a)}stateFromQueryStore(){return{yearFilter:this.context.queryStore.getQuery().yearFilter}}render(){const{availableFilters:e,isAuthorHomePage:t}=this.props,r=e.get("authors"),a=e.get("coAuthors"),o=e.get("venues"),i=e.get("publicationTypes"),s=e.get("externalContentTypes");return n.a.createElement("div",{className:"filters-wrapper"},n.a.createElement("h4",{className:"filter-header"},"Filter Results:"),n.a.createElement(dh.a,null),t&&n.a.createElement(Vh.a,{analyticsEvent:kt.a.Serp.YEAR_SLIDER,years:e.get("years"),filteredYears:e.get("filteredYears")||new G.List,isMobile:!1,filterCallback:this.histogramCallback,histogramWidth:200,histogramHeight:50,yearFilter:this.state.yearFilter}),s.isEmpty()?null:n.a.createElement(Ji.a,{filterType:"externalContentType",filters:s}),i.isEmpty()?null:n.a.createElement(Ji.a,{filterType:"publicationType",filters:i}),r.isEmpty()?null:n.a.createElement(Ji.a,{filterType:"author",filters:r}),a.isEmpty()?null:n.a.createElement(Ji.a,{filterType:"coAuthor",filters:a}),o.isEmpty()?null:n.a.createElement(Ji.a,{maxLabelLength:bc.a.data.MAX_VENUE_LENGTH,filterType:"venue",filters:o}))}}Bh(Yh,"contextTypes",{queryStore:L.a.instanceOf(ss.a).isRequired,router:L.a.object.isRequired}),Bh(Yh,"propTypes",{availableFilters:L.a.object.isRequired,isAuthorHomePage:L.a.bool});class Kh extends a.PureComponent{constructor(){super(...arguments)}render(){return a.createElement(At.c,{feature:Dt.b.RecommenderSerpAd},a.createElement(At.b,null,a.createElement("a",{href:"https://s2-sanity.apps.allenai.org",target:"_blank","data-heap-id":"recommender-ad-call-to-action",className:"recommender-ad","data-selenium-selector":"recommender-ad"},a.createElement("div",{className:"recommender-ad__content-container"},a.createElement("div",{className:"recommender-ad__title"},"Start Your Personalized Research Feed"),a.createElement("div",{className:"recommender-ad__description"},"Want to stay up-to-date and spend less time searching for the latest Computer Science research? Get exclusive access to Semantic Sanity: a personalized adaptive arXiv feed created by Semantic Scholar."),a.createElement("span",{className:"recommender-ad__call-to-action button button--primary"},"TRY THE BETA")))))}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Kh,"contextTypes",{iconStore:L.a.instanceOf(Ni.a).isRequired});var Wh=r(60);function Qh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Gh=a.createContext({isFirstFeedLink:!1});class Xh extends a.PureComponent{constructor(){super(...arguments),Qh(this,"loadPage",e=>{e!==this.props.query.page&&(ac.a.scrollTop(this.props.layoutOptions.scrollToTopOfPage?0:ac.a.offsetFromBody(ic.a.findDOMNode(this))),this.context.queryStore.routeToPage(e,this.context.router))}),Qh(this,"trackSwap",(e,t)=>{const{query:{page:r},response:{results:a}}=this.props;if(this.context.weblabStore.isFeatureEnabled(Dt.b.SerpSwap)&&1===r){const e=this.swapResults(a),r={swapIndex:this.state.swapIndex,clickIndex:t};e.forEach((e,t)=>{r["paper".concat(t)]=e.id}),Object(Ht.a)(new ra.a(kt.a.Serp.SWAP,r))}}),Qh(this,"swapResults",e=>e.withMutations(e=>{const t=this.state.swapIndex,r=e.get(t);return e.set(t,e.get(0)).set(0,r)})),Qh(this,"onChangeSort",e=>{const{queryStore:t,router:r}=this.context;t.routeToSort(e,r)}),Qh(this,"onChangeYearFilter",(e,t)=>{const{queryStore:r,router:a}=this.context;r.routeToYearRange(e,t,a)});const e=this.props.response.results.size;this.state={swapIndex:Math.floor(Math.random()*Math.min(6,e))}}componentWillReceiveProps(e){const t=this.props.response.results,r=e.response.results;if(!t.equals(r)){const t=e.response.results.size;this.setState({swapIndex:Math.floor(Math.random()*Math.min(6,t))})}}componentDidUpdate(e){if(!X.a.is(e.response,this.props.response)&&!this.props.response.results.isEmpty()){const e=ac.a.scrollTop(),t=this.refs["search-result-".concat(this.props.response.results.size-1)];if(t){const r=ac.a.offsetFromBody(t);r<e&&ac.a.scrollTop(r-20)}}}renderResults(){const{query:e,response:{results:t},layoutOptions:{searchResultLayout:r}}=this.props;return(this.context.weblabStore.isFeatureEnabled(Dt.b.SerpSwap)&&1===e.page?this.swapResults(t):t).map((t,n)=>a.createElement(Gh.Provider,{key:t.id,value:{isFirstFeedLink:0===n}},a.createElement(tc,{result:t,key:t.id,index:(e.page-1)*e.pageSize+n,ref:"search-result-".concat(n),layout:r,onTitleClick:this.trackSwap})))}renderNoResults(){const{querySuggestions:e}=this.props.response,t=!(e&&!e.isEmpty())?void 0:e.first().text;return a.createElement(Ai.a,{query:this.props.query.queryString,hasFacets:this.props.response.hasFacets(),suggestedQuery:t})}renderAHPSerp(){const{response:e,isFiltering:t,layoutOptions:r,query:n,isAuthorHomePage:o}=this.props,{results:i,stats:s,matchedAuthors:c}=e;return a.createElement("section",{className:"content"},a.createElement(ji,null,a.createElement(rc,{className:"filter",side:"left"},a.createElement("div",{ref:"filters"},e.hasFacets()?a.createElement(Yh,{availableFilters:s,isAuthorHomePage:o}):null)),a.createElement(bs,{className:"results"},c.isEmpty()?null:a.createElement(gs.a,{queryString:n.queryString,authors:c}),i.isEmpty()?null:a.createElement(Uh,{query:n,response:e,isFiltering:t,showResultCount:r.showResultCount,sortDisplayType:r.sortDisplayType,showSortExplanation:r.showSortExplanation,sorts:r.sorts}),a.createElement("div",{className:N()("result-page",{"is-filtering":t})},i.isEmpty()?this.renderNoResults():this.renderResults()),a.createElement("div",{className:"flex-row"},a.createElement(fs.a,{className:"flex-right",loadPage:this.loadPage,pageNumber:n.page,totalPages:e.totalPages})))))}renderFreshSerpContent(){const{response:e,isFiltering:t,layoutOptions:r,isCompact:n,query:o}=this.props,{matchedAuthors:i,totalPages:s,stats:c,matchedEntity:l,modifiedQueryString:u,matchedPresentations:h}=e;return a.createElement("div",{className:N()("fresh-serp",{"fresh-serp--compact":n})},a.createElement(Th,{isFiltering:t,layoutOptions:r,onChangeSort:this.onChangeSort,query:o,response:e}),a.createElement(ua.a,{layoutMed:"column-reverse",className:"centered-max-width-content",role:"main",id:"main-content"},a.createElement(ha.a,{width:"66",className:"flex-item__left-column",seleniumSelector:"results"},u?a.createElement(qh.a,{originalQuery:e.query.queryString,modifiedQuery:u}):null,a.createElement("div",{className:N()("result-page",{"is-filtering":t})},this.renderResults()),a.createElement(fs.a,{className:"flex-right",loadPage:this.loadPage,pageNumber:o.page,totalPages:s})),a.createElement(ha.a,{width:"33",className:"flex-item__right-column"},a.createElement(Kh,null),c.get("years").size>1?a.createElement(Ah.a,{title:es.a.getString("serp.histogram.title"),icon:"bar-chart",className:"histogram"},a.createElement(Zi.a,{analyticsEvent:kt.a.Serp.YEAR_SLIDER,filterCallback:this.onChangeYearFilter,filters:c,yearFilter:o.yearFilter,yearBuckets:null,showPresetButtons:!0})):null,l?a.createElement(Ih.a,{entity:l}):null,i.isEmpty()?null:a.createElement(gs.a,{displayAsInfoBox:!0,queryString:o.queryString,authors:i}),!h.isEmpty()&&i.isEmpty()?a.createElement(Lh,{queryString:o.queryString,slides:h}):null)))}renderFreshSerpNoResults(){const{isFiltering:e}=this.props;return a.createElement("div",{className:"fresh-serp"},a.createElement(ua.a,{className:"centered-max-width-content",role:"main",id:"main-content"},a.createElement(ha.a,{width:"66",className:"flex-item__left-column"},a.createElement("div",{className:N()("result-page",{"is-filtering":e})},this.renderNoResults()))))}renderSerp(){return this.props.response.results.isEmpty()?this.renderFreshSerpNoResults():this.renderFreshSerpContent()}render(){return this.props.isAuthorHomePage?this.renderAHPSerp():this.renderSerp()}}function Jh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Qh(Xh,"contextTypes",{queryStore:L.a.instanceOf(ss.a).isRequired,router:L.a.object.isRequired,userPrefsStore:L.a.instanceOf(Wh.b).isRequired,weblabStore:L.a.instanceOf(er.b).isRequired}),Qh(Xh,"propTypes",{isAuthorHomePage:L.a.bool,isFiltering:L.a.bool,isCompact:L.a.bool.isRequired,query:L.a.object.isRequired,response:L.a.object.isRequired,layoutOptions:L.a.object.isRequired});class Zh extends a.PureComponent{constructor(){super(...arguments),this.state=this.stateFromQueryStore(),this.context.queryStore.registerComponent(this,()=>{this.setState(this.stateFromQueryStore())})}stateFromQueryStore(){return{queryStoreState:this.context.queryStore._state,query:this.context.queryStore._query,response:this.context.queryStore._response,isCompact:this.context.queryStore.isDisplayCompactActive()}}render(){const{queryStoreState:e,query:t,response:r,isCompact:n}=this.state;return e===nc.a.LOADING?a.createElement("section",{className:"content",role:"main",id:"main-content"},a.createElement("div",{className:"container loading-controls flex-row-vcenter"},a.createElement(me.a,{seleniumSelector:"icon-loading-serp"})," Loading results")):a.createElement(Xh,{isAuthorHomePage:this.props.isAuthorHomePage,isCompact:n,query:t,response:r,layoutOptions:this.props.layoutOptions,isFiltering:e===nc.a.FILTERING})}}Jh(Zh,"contextTypes",{queryStore:L.a.instanceOf(ss.a).isRequired}),Jh(Zh,"propTypes",{isAuthorHomePage:L.a.bool,layoutOptions:L.a.object.isRequired});var $h=r(18);function ed(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function td(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const rd=Object(uc.a)(kt.a.Serp)(Jt.a),ad=Object(uc.a)(kt.a.Serp)(Zh);class nd extends a.PureComponent{static async willRouteTo(e,t){const{api:r,authStore:a,feedApi:n}=e;if(!Object(we.a)())return ss.a.setQueryAndLoadingState(e,t);const o=a.hasAuthenticatedUser()?n.getFeeds():Promise.resolve(),i=(await Promise.all([ss.a.executeSearchQuery(e,t),o]))[0];if(!i.resultData)return i;const{matchedEntity:s}=i.resultData;return a.hasAuthenticatedUser()&&s?r.findAlertByQueryTypeAndValue(Gr.c.ENTITY_PAPER,s.id):i}static getPageTitle(e){let{queryStore:t}=e;const r=t.getQueryString();return r?Object(l.b)(e=>e.serp.pageTitleWithQuery,r):Object(l.b)(e=>e.serp.pageTitleWithoutQuery)}constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ed(Object(r),!0).forEach((function(t){td(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ed(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.stateFromQueryStore()),this.context.queryStore.registerComponent(this,()=>{this.setState(this.stateFromQueryStore())})}stateFromQueryStore(){return{isLoading:this.context.queryStore._state===nc.a.LOADING}}render(){const{isLoading:e}=this.state,t=new hs;return a.createElement("div",{className:"search"},a.createElement(rd,{showSearchBar:!0,submitSearchOnFieldOfStudyChange:!0}),a.createElement(ad,{layoutOptions:t}),e?null:a.createElement(la.a,null))}}td(nd,"contextTypes",{alertsStore:L.a.instanceOf(ia.a).isRequired,api:L.a.instanceOf(ne.a).isRequired,authStore:L.a.instanceOf(fe.a).isRequired,feedApi:L.a.instanceOf($h.a).isRequired,queryStore:L.a.instanceOf(ss.a).isRequired});var od=r(878),id=r(961),sd=r(962),cd=r(963),ld=r(964);t.default=[Object(ld.a)({component:ka.a,routes:[Object(ld.a)({path:ie.b.HOME,exact:!0,component:ql}),Object(ld.a)({path:ie.b.ENTITY_BY_ID,exact:!0,component:uh.a}),Object(ld.a)({path:ie.b.ENTITY,component:el.a}),Object(ld.a)({path:ie.b.SEARCH,component:nd}),Object(ld.a)({path:ie.b.PAPER_DETAIL_BY_ID,exact:!0,component:hh.a}),Object(ld.a)({path:ie.b.PAPER_DETAIL_PDF_REDIRECT,exact:!0,component:hh.a}),Object(ld.a)({path:ie.b.PAPER_DETAIL_CITED_BY,component:hh.a}),Object(ld.a)({path:ie.b.PAPER_DETAIL_REFERENCES,component:hh.a}),Object(ld.a)({path:ie.b.PAPER_DETAIL,component:eh,routes:[Object(ld.a)({path:ie.b.PAPER_DETAIL_FIGURE,component:yl.a}),Object(ld.a)({path:ie.b.PAPER_DETAIL_VIDEO,component:lh})]}),Object(ld.a)({path:ie.b.AUTHOR_ONBOARDING,component:gi,routes:[Object(ld.a)({path:ie.b.AUTHOR_ONBOARDING_PROFILE,component:Si}),Object(ld.a)({path:ie.b.AUTHOR_ONBOARDING_REMOVE_PAPERS,component:Pi}),Object(ld.a)({path:ie.b.AUTHOR_ONBOARDING_ADD_PAPERS,component:ni}),Object(ld.a)({path:ie.b.AUTHOR_ONBOARDING_COMPLETE,component:ci})]}),Object(ld.a)({path:ie.b.ADMIN,component:Nr,routes:[Object(ld.a)({path:ie.b.ADMIN_EXPERIMENTS,component:zr}),Object(ld.a)({path:ie.b.ADMIN_FEATURE_FLAGS,component:Wr})]}),Object(ld.a)({path:ie.b.MODERATION,component:ku,routes:[Object(ld.a)({path:ie.b.AUTHOR_CLAIM_MODERATION,component:Do}),Object(ld.a)({path:ie.b.AUTHOR_AUTHORSHIP_MODERATION,component:Qo}),Object(ld.a)({path:ie.b.AUTHOR_CORRECTIONS_TOOL,component:zu,routes:[Object(ld.a)({path:ie.b.AUTHOR_CORRECTIONS_TOOL_AUTHOR_INPUT,component:qu}),Object(ld.a)({path:ie.b.AUTHOR_CORRECTIONS_TOOL_CONTACT,component:pt}),Object(ld.a)({path:ie.b.AUTHOR_CORRECTIONS_TOOL_REMOVE_PAPERS,component:Sr}),Object(ld.a)({path:ie.b.AUTHOR_CORRECTIONS_TOOL_ADD_PAPERS,component:Re}),Object(ld.a)({path:ie.b.AUTHOR_CORRECTIONS_TOOL_STATUS,component:Tt})]})]}),Object(ld.a)({path:ie.b.AUTHOR_PROFILE_BY_CLAIMED,component:qa.a}),Object(ld.a)({path:ie.b.AUTHOR_CLAIM,component:Da.a}),Object(ld.a)({path:ie.b.AUTHOR_CLAIM_COMPLETE,component:La.a}),Object(ld.a)({path:ie.b.AUTHOR_PROFILE_BY_ID,exact:!0,component:yc}),Object(ld.a)({path:ie.b.AUTHOR_PROFILE,component:yc}),Object(ld.a)({path:ie.b.CREATE_ALERT,component:Oc.a}),Object(ld.a)({path:ie.b.ALERTS,component:Fa,routes:[Object(ld.a)({path:ie.b.ALERTS,exact:!0,component:ca}),Object(ld.a)({path:ie.b.ALERTS_EMAIL,component:$c})]}),Object(ld.a)({path:ie.b.ALERTS_VERIFY_EMAIL,component:sd.a}),Object(ld.a)({path:ie.b.ALERTS_UNSUBSCRIBE,component:id.a}),Object(ld.a)({path:ie.b.ALERTS_UNSUBSCRIBE_ALL,component:id.a}),Object(ld.a)({path:ie.b.LIBRARY,component:Su,routes:[Object(ld.a)({path:ie.b.LIBRARY,exact:!0,component:bu}),Object(ld.a)({path:ie.b.LIBRARY_TAG_MANAGEMENT,exact:!0,component:ju}),Object(ld.a)({path:ie.b.LIBRARY_TAG,component:bu})]}),Object(ld.a)({path:ie.b.FEED,component:bl.a,routes:[Object(ld.a)({path:ie.b.FEED_RATED,component:gl.a}),Object(ld.a)({path:ie.b.FEED_RECOMMENDATIONS,component:_l.a})]}),Object(ld.a)({path:ie.b.FEEDS,component:ml.a}),Object(ld.a)({path:ie.b.FEED_FTUE,component:fl.a}),Object(ld.a)({path:ie.b.ACCOUNT,component:nr,routes:[Object(ld.a)({path:ie.b.ACCOUNT_AUTHOR_CLAIM_PENDING,component:Fe}),Object(ld.a)({path:ie.b.ACCOUNT_AUTHOR_CONTACT,component:pt}),Object(ld.a)({path:ie.b.ACCOUNT_REMOVE_PAPERS,component:Sr}),Object(ld.a)({path:ie.b.ACCOUNT_ADD_PAPERS,component:Re}),Object(ld.a)({path:ie.b.ACCOUNT_CORRECTIONS,component:Tt}),Object(ld.a)({path:ie.b.ACCOUNT_CONTACT,component:Bt}),Object(ld.a)({path:ie.b.ACCOUNT_MANAGE,component:Xt})]}),Object(ld.a)({path:ie.b.USER_VERIFY_EMAIL,component:cd.a}),Object(ld.a)({path:ie.b.SIGN_IN,component:od.a}),Object(ld.a)({path:ie.b.ADD_ENROLLMENT_REDIRECT,component:vr.a}),Object(ld.a)({path:ie.b.CRAWLER,component:Ec.a}),Object(ld.a)({path:ie.b.FAQ,component:pl}),Object(ld.a)({path:ie.b.DEBUG_COMPONENT_LIBRARY,exact:!0,component:xc}),Object(ld.a)({path:ie.b.DEBUG_COMPONENT_LIBRARY_COMPONENT,component:xc}),Object(ld.a)({path:ie.b.DEBUG_COMPONENT_LIBRARY_PREVIEW,component:Kc.a}),Object(ld.a)({path:ie.b.DEBUG_SPRITES,component:Qc}),Object(ld.a)({component:Uu.a})]})]},743:function(e,t,r){e.exports=r(1076)()},771:function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},781:function(e,t){e.exports=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}},782:function(e,t,r){var a=r(1075);e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){a(e,t,r[t])}))}return e}},783:function(e,t){function r(){return e.exports=r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},r.apply(this,arguments)}e.exports=r},784:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},815:function(e,t,r){var a;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var o=typeof a;if("string"===o||"number"===o)e.push(a);else if(Array.isArray(a)&&a.length){var i=n.apply(null,a);i&&e.push(i)}else if("object"===o)for(var s in a)r.call(a,s)&&a[s]&&e.push(s)}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(a=function(){return n}.apply(t,[]))||(e.exports=a)}()},871:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u})),r.d(t,"exampleConfig",(function(){return h}));var a=r(791),n=r(8),o=r(722),i=r.n(o),s=r(229);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function u(e){let{className:t}=e,r=l(e,["className"]);return n.createElement(a.a,c({className:i()("cl-card-container",t)},r))}const h={fields:[{name:"children",desc:"Content to be displayed within the component",value:{type:"jsx",default:"",transform:e=>n.createElement("div",{dangerouslySetInnerHTML:{__html:e}})}},{name:"className",desc:"HTML classes to be added to the component",value:{type:"text",default:""}}],examples:[{title:"Basic",desc:"Card with some text in it",props:{children:"Suspendisse lacinia erat vitae tempor vehicula. Orci varius natoque penatibus et magnis dis parturient montes."},render:e=>n.createElement("div",{style:{width:"200px",padding:"16px"}},e)},{title:"Carousel",desc:"Several cards next to each other",props:{children:"Suspendisse lacinia erat vitae tempor vehicula. Orci varius natoque penatibus et magnis dis parturient montes."},render:e=>n.createElement(d,null,n.createElement(p,null,n.cloneElement(e)),n.createElement(p,null,n.cloneElement(e)),n.createElement(p,null,n.cloneElement(e)))}],events:{}},d=s.b.div.withConfig({displayName:"CLCardContainer__FakeCarousel",componentId:"inliw9-0"})(["display:flex;background:#f5f6f7;padding:12px;margin-left:-12px;"]),p=s.b.div.withConfig({displayName:"CLCardContainer__FakeCarouselItem",componentId:"inliw9-1"})(["flex:1 1 auto;margin-left:12px;"])}}]);
//# sourceMappingURL=bundle-2.js.map